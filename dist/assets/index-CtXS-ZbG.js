(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ym(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),s}var _d={exports:{}},_a={},bd={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rn=Symbol.for("react.element"),vm=Symbol.for("react.portal"),_m=Symbol.for("react.fragment"),bm=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),jm=Symbol.for("react.provider"),Nm=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),Cm=Symbol.for("react.memo"),Em=Symbol.for("react.lazy"),zo=Symbol.iterator;function Rm(t){return t===null||typeof t!="object"?null:(t=zo&&t[zo]||t["@@iterator"],typeof t=="function"?t:null)}var wd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jd=Object.assign,Nd={};function nr(t,e,s){this.props=t,this.context=e,this.refs=Nd,this.updater=s||wd}nr.prototype.isReactComponent={};nr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sd(){}Sd.prototype=nr.prototype;function Rl(t,e,s){this.props=t,this.context=e,this.refs=Nd,this.updater=s||wd}var Tl=Rl.prototype=new Sd;Tl.constructor=Rl;jd(Tl,nr.prototype);Tl.isPureReactComponent=!0;var Vo=Array.isArray,kd=Object.prototype.hasOwnProperty,Pl={current:null},Cd={key:!0,ref:!0,__self:!0,__source:!0};function Ed(t,e,s){var n,a={},i=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)kd.call(e,n)&&!Cd.hasOwnProperty(n)&&(a[n]=e[n]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:rn,type:t,key:i,ref:l,props:a,_owner:Pl.current}}function Tm(t,e){return{$$typeof:rn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Al(t){return typeof t=="object"&&t!==null&&t.$$typeof===rn}function Pm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Ho=/\/+/g;function Va(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Pm(""+t.key):e.toString(36)}function Dn(t,e,s,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case rn:case vm:l=!0}}if(l)return l=t,a=a(l),t=n===""?"."+Va(l,0):n,Vo(a)?(s="",t!=null&&(s=t.replace(Ho,"$&/")+"/"),Dn(a,e,s,"",function(d){return d})):a!=null&&(Al(a)&&(a=Tm(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Ho,"$&/")+"/")+t)),e.push(a)),1;if(l=0,n=n===""?".":n+":",Vo(t))for(var o=0;o<t.length;o++){i=t[o];var c=n+Va(i,o);l+=Dn(i,e,s,c,a)}else if(c=Rm(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=n+Va(i,o++),l+=Dn(i,e,s,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function mn(t,e,s){if(t==null)return t;var n=[],a=0;return Dn(t,n,"","",function(i){return e.call(s,i,a++)}),n}function Am(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ce={current:null},On={transition:null},Lm={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:On,ReactCurrentOwner:Pl};function Rd(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:mn,forEach:function(t,e,s){mn(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return mn(t,function(){e++}),e},toArray:function(t){return mn(t,function(e){return e})||[]},only:function(t){if(!Al(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=nr;F.Fragment=_m;F.Profiler=wm;F.PureComponent=Rl;F.StrictMode=bm;F.Suspense=km;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lm;F.act=Rd;F.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=jd({},t.props),a=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Pl.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)kd.call(e,c)&&!Cd.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:rn,type:t.type,key:a,ref:i,props:n,_owner:l}};F.createContext=function(t){return t={$$typeof:Nm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jm,_context:t},t.Consumer=t};F.createElement=Ed;F.createFactory=function(t){var e=Ed.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:Sm,render:t}};F.isValidElement=Al;F.lazy=function(t){return{$$typeof:Em,_payload:{_status:-1,_result:t},_init:Am}};F.memo=function(t,e){return{$$typeof:Cm,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=On.transition;On.transition={};try{t()}finally{On.transition=e}};F.unstable_act=Rd;F.useCallback=function(t,e){return Ce.current.useCallback(t,e)};F.useContext=function(t){return Ce.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return Ce.current.useDeferredValue(t)};F.useEffect=function(t,e){return Ce.current.useEffect(t,e)};F.useId=function(){return Ce.current.useId()};F.useImperativeHandle=function(t,e,s){return Ce.current.useImperativeHandle(t,e,s)};F.useInsertionEffect=function(t,e){return Ce.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return Ce.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return Ce.current.useMemo(t,e)};F.useReducer=function(t,e,s){return Ce.current.useReducer(t,e,s)};F.useRef=function(t){return Ce.current.useRef(t)};F.useState=function(t){return Ce.current.useState(t)};F.useSyncExternalStore=function(t,e,s){return Ce.current.useSyncExternalStore(t,e,s)};F.useTransition=function(){return Ce.current.useTransition()};F.version="18.3.1";bd.exports=F;var C=bd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=C,Om=Symbol.for("react.element"),Im=Symbol.for("react.fragment"),$m=Object.prototype.hasOwnProperty,qm=Dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mm={key:!0,ref:!0,__self:!0,__source:!0};function Td(t,e,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)$m.call(e,n)&&!Mm.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Om,type:t,key:i,ref:l,props:a,_owner:qm.current}}_a.Fragment=Im;_a.jsx=Td;_a.jsxs=Td;_d.exports=_a;var r=_d.exports,Pd={exports:{}},Ue={},Ad={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,O){var q=A.length;A.push(O);e:for(;0<q;){var X=q-1>>>1,ne=A[X];if(0<a(ne,O))A[X]=O,A[q]=ne,q=X;else break e}}function s(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var O=A[0],q=A.pop();if(q!==O){A[0]=q;e:for(var X=0,ne=A.length,bs=ne>>>1;X<bs;){var lt=2*(X+1)-1,ws=A[lt],ot=lt+1,ts=A[ot];if(0>a(ws,q))ot<ne&&0>a(ts,ws)?(A[X]=ts,A[ot]=q,X=ot):(A[X]=ws,A[lt]=q,X=lt);else if(ot<ne&&0>a(ts,q))A[X]=ts,A[ot]=q,X=ot;else break e}}return O}function a(A,O){var q=A.sortIndex-O.sortIndex;return q!==0?q:A.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,v=!1,g=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var O=s(d);O!==null;){if(O.callback===null)n(d);else if(O.startTime<=A)n(d),O.sortIndex=O.expirationTime,e(c,O);else break;O=s(d)}}function y(A){if(_=!1,x(A),!g)if(s(c)!==null)g=!0,ze(j);else{var O=s(d);O!==null&&Oe(y,O.startTime-A)}}function j(A,O){g=!1,_&&(_=!1,f(w),w=-1),v=!0;var q=h;try{for(x(O),m=s(c);m!==null&&(!(m.expirationTime>O)||A&&!D());){var X=m.callback;if(typeof X=="function"){m.callback=null,h=m.priorityLevel;var ne=X(m.expirationTime<=O);O=t.unstable_now(),typeof ne=="function"?m.callback=ne:m===s(c)&&n(c),x(O)}else n(c);m=s(c)}if(m!==null)var bs=!0;else{var lt=s(d);lt!==null&&Oe(y,lt.startTime-O),bs=!1}return bs}finally{m=null,h=q,v=!1}}var k=!1,N=null,w=-1,T=5,P=-1;function D(){return!(t.unstable_now()-P<T)}function Y(){if(N!==null){var A=t.unstable_now();P=A;var O=!0;try{O=N(!0,A)}finally{O?S():(k=!1,N=null)}}else k=!1}var S;if(typeof p=="function")S=function(){p(Y)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,B=U.port2;U.port1.onmessage=Y,S=function(){B.postMessage(null)}}else S=function(){b(Y,0)};function ze(A){N=A,k||(k=!0,S())}function Oe(A,O){w=b(function(){A(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){g||v||(g=!0,ze(j))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var q=h;h=O;try{return A()}finally{h=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,O){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var q=h;h=A;try{return O()}finally{h=q}},t.unstable_scheduleCallback=function(A,O,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,A){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=q+ne,A={id:u++,callback:O,priorityLevel:A,startTime:q,expirationTime:ne,sortIndex:-1},q>X?(A.sortIndex=q,e(d,A),s(c)===null&&A===s(d)&&(_?(f(w),w=-1):_=!0,Oe(y,q-X))):(A.sortIndex=ne,e(c,A),g||v||(g=!0,ze(j))),A},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(A){var O=h;return function(){var q=h;h=O;try{return A.apply(this,arguments)}finally{h=q}}}})(Ld);Ad.exports=Ld;var Fm=Ad.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=C,Fe=Fm;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dd=new Set,Ir={};function ys(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(Ir[t]=e,t=0;t<e.length;t++)Dd.add(e[t])}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Si=Object.prototype.hasOwnProperty,Bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wo={},Qo={};function zm(t){return Si.call(Qo,t)?!0:Si.call(Wo,t)?!1:Bm.test(t)?Qo[t]=!0:(Wo[t]=!0,!1)}function Vm(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hm(t,e,s,n){if(e===null||typeof e>"u"||Vm(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ee(t,e,s,n,a,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ge[t]=new Ee(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ge[e]=new Ee(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ge[t]=new Ee(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ge[t]=new Ee(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ge[t]=new Ee(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ge[t]=new Ee(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ge[t]=new Ee(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ge[t]=new Ee(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ge[t]=new Ee(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ll=/[\-:]([a-z])/g;function Dl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ll,Dl);ge[e]=new Ee(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ll,Dl);ge[e]=new Ee(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ll,Dl);ge[e]=new Ee(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ge[t]=new Ee(t,1,!1,t.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ge[t]=new Ee(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ol(t,e,s,n){var a=ge.hasOwnProperty(e)?ge[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hm(e,s,a,n)&&(s=null),n||a===null?zm(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):a.mustUseProperty?t[a.propertyName]=s===null?a.type===3?!1:"":s:(e=a.attributeName,n=a.attributeNamespace,s===null?t.removeAttribute(e):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Ct=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fn=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Il=Symbol.for("react.strict_mode"),ki=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Id=Symbol.for("react.context"),$l=Symbol.for("react.forward_ref"),Ci=Symbol.for("react.suspense"),Ei=Symbol.for("react.suspense_list"),ql=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),$d=Symbol.for("react.offscreen"),Go=Symbol.iterator;function dr(t){return t===null||typeof t!="object"?null:(t=Go&&t[Go]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,Ha;function vr(t){if(Ha===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Ha=e&&e[1]||""}return`
`+Ha+t}var Wa=!1;function Qa(t,e){if(!t||Wa)return"";Wa=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Wa=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?vr(t):""}function Wm(t){switch(t.tag){case 5:return vr(t.type);case 16:return vr("Lazy");case 13:return vr("Suspense");case 19:return vr("SuspenseList");case 0:case 2:case 15:return t=Qa(t.type,!1),t;case 11:return t=Qa(t.type.render,!1),t;case 1:return t=Qa(t.type,!0),t;default:return""}}function Ri(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Ps:return"Portal";case ki:return"Profiler";case Il:return"StrictMode";case Ci:return"Suspense";case Ei:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Id:return(t.displayName||"Context")+".Consumer";case Od:return(t._context.displayName||"Context")+".Provider";case $l:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ql:return e=t.displayName||null,e!==null?e:Ri(t.type)||"Memo";case Pt:e=t._payload,t=t._init;try{return Ri(t(e))}catch{}}return null}function Qm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ri(e);case 8:return e===Il?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gm(t){var e=qd(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pn(t){t._valueTracker||(t._valueTracker=Gm(t))}function Md(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=qd(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Gn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ti(t,e){var s=e.checked;return te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ko(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Wt(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fd(t,e){e=e.checked,e!=null&&Ol(t,"checked",e,!1)}function Pi(t,e){Fd(t,e);var s=Wt(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ai(t,e.type,s):e.hasOwnProperty("defaultValue")&&Ai(t,e.type,Wt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jo(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Ai(t,e,s){(e!=="number"||Gn(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var _r=Array.isArray;function zs(t,e,s,n){if(t=t.options,e){e={};for(var a=0;a<s.length;a++)e["$"+s[a]]=!0;for(s=0;s<t.length;s++)a=e.hasOwnProperty("$"+t[s].value),t[s].selected!==a&&(t[s].selected=a),a&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Wt(s),e=null,a=0;a<t.length;a++){if(t[a].value===s){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Li(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yo(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(E(92));if(_r(s)){if(1<s.length)throw Error(E(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Wt(s)}}function Ud(t,e){var s=Wt(e.value),n=Wt(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Xo(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Di(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xn,zd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xn=xn||document.createElement("div"),xn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $r(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Km=["Webkit","ms","Moz","O"];Object.keys(Nr).forEach(function(t){Km.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nr[e]=Nr[t]})});function Vd(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Nr.hasOwnProperty(t)&&Nr[t]?(""+e).trim():e+"px"}function Hd(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Vd(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,a):t[s]=a}}var Jm=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oi(t,e){if(e){if(Jm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Ii(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function Ml(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,Vs=null,Hs=null;function Zo(t){if(t=ln(t)){if(typeof qi!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Sa(e),qi(t.stateNode,t.type,e))}}function Wd(t){Vs?Hs?Hs.push(t):Hs=[t]:Vs=t}function Qd(){if(Vs){var t=Vs,e=Hs;if(Hs=Vs=null,Zo(t),e)for(t=0;t<e.length;t++)Zo(e[t])}}function Gd(t,e){return t(e)}function Kd(){}var Ga=!1;function Jd(t,e,s){if(Ga)return t(e,s);Ga=!0;try{return Gd(t,e,s)}finally{Ga=!1,(Vs!==null||Hs!==null)&&(Kd(),Qd())}}function qr(t,e){var s=t.stateNode;if(s===null)return null;var n=Sa(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(E(231,e,typeof s));return s}var Mi=!1;if(jt)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{Mi=!1}function Ym(t,e,s,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var Sr=!1,Kn=null,Jn=!1,Fi=null,Xm={onError:function(t){Sr=!0,Kn=t}};function Zm(t,e,s,n,a,i,l,o,c){Sr=!1,Kn=null,Ym.apply(Xm,arguments)}function ef(t,e,s,n,a,i,l,o,c){if(Zm.apply(this,arguments),Sr){if(Sr){var d=Kn;Sr=!1,Kn=null}else throw Error(E(198));Jn||(Jn=!0,Fi=d)}}function vs(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Yd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ec(t){if(vs(t)!==t)throw Error(E(188))}function tf(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(E(188));return e!==t?null:t}for(var s=t,n=e;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return ec(a),t;if(i===n)return ec(a),e;i=i.sibling}throw Error(E(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l)throw Error(E(189))}}if(s.alternate!==n)throw Error(E(190))}if(s.tag!==3)throw Error(E(188));return s.stateNode.current===s?t:e}function Xd(t){return t=tf(t),t!==null?Zd(t):null}function Zd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zd(t);if(e!==null)return e;t=t.sibling}return null}var eu=Fe.unstable_scheduleCallback,tc=Fe.unstable_cancelCallback,sf=Fe.unstable_shouldYield,rf=Fe.unstable_requestPaint,re=Fe.unstable_now,nf=Fe.unstable_getCurrentPriorityLevel,Fl=Fe.unstable_ImmediatePriority,tu=Fe.unstable_UserBlockingPriority,Yn=Fe.unstable_NormalPriority,af=Fe.unstable_LowPriority,su=Fe.unstable_IdlePriority,ba=null,mt=null;function lf(t){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(ba,t,void 0,(t.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:df,of=Math.log,cf=Math.LN2;function df(t){return t>>>=0,t===0?32:31-(of(t)/cf|0)|0}var gn=64,yn=4194304;function br(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xn(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,l=s&268435455;if(l!==0){var o=l&~a;o!==0?n=br(o):(i&=l,i!==0&&(n=br(i)))}else l=s&~a,l!==0?n=br(l):i!==0&&(n=br(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-rt(e),a=1<<s,n|=t[s],e&=~a;return n}function uf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hf(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-rt(i),o=1<<l,c=a[l];c===-1?(!(o&s)||o&n)&&(a[l]=uf(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function Ui(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ru(){var t=gn;return gn<<=1,!(gn&4194240)&&(gn=64),t}function Ka(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function nn(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rt(e),t[e]=s}function mf(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var a=31-rt(s),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,s&=~i}}function Ul(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-rt(s),a=1<<n;a&e|t[n]&e&&(t[n]|=e),s&=~a}}var H=0;function nu(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var au,Bl,iu,lu,ou,Bi=!1,vn=[],qt=null,Mt=null,Ft=null,Mr=new Map,Fr=new Map,Lt=[],ff="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(t,e){switch(t){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":Mr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(e.pointerId)}}function hr(t,e,s,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=ln(e),e!==null&&Bl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function pf(t,e,s,n,a){switch(e){case"focusin":return qt=hr(qt,t,e,s,n,a),!0;case"dragenter":return Mt=hr(Mt,t,e,s,n,a),!0;case"mouseover":return Ft=hr(Ft,t,e,s,n,a),!0;case"pointerover":var i=a.pointerId;return Mr.set(i,hr(Mr.get(i)||null,t,e,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Fr.set(i,hr(Fr.get(i)||null,t,e,s,n,a)),!0}return!1}function cu(t){var e=os(t.target);if(e!==null){var s=vs(e);if(s!==null){if(e=s.tag,e===13){if(e=Yd(s),e!==null){t.blockedOn=e,ou(t.priority,function(){iu(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function In(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=zi(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);$i=n,s.target.dispatchEvent(n),$i=null}else return e=ln(s),e!==null&&Bl(e),t.blockedOn=s,!1;e.shift()}return!0}function rc(t,e,s){In(t)&&s.delete(e)}function xf(){Bi=!1,qt!==null&&In(qt)&&(qt=null),Mt!==null&&In(Mt)&&(Mt=null),Ft!==null&&In(Ft)&&(Ft=null),Mr.forEach(rc),Fr.forEach(rc)}function mr(t,e){t.blockedOn===e&&(t.blockedOn=null,Bi||(Bi=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,xf)))}function Ur(t){function e(a){return mr(a,t)}if(0<vn.length){mr(vn[0],t);for(var s=1;s<vn.length;s++){var n=vn[s];n.blockedOn===t&&(n.blockedOn=null)}}for(qt!==null&&mr(qt,t),Mt!==null&&mr(Mt,t),Ft!==null&&mr(Ft,t),Mr.forEach(e),Fr.forEach(e),s=0;s<Lt.length;s++)n=Lt[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Lt.length&&(s=Lt[0],s.blockedOn===null);)cu(s),s.blockedOn===null&&Lt.shift()}var Ws=Ct.ReactCurrentBatchConfig,Zn=!0;function gf(t,e,s,n){var a=H,i=Ws.transition;Ws.transition=null;try{H=1,zl(t,e,s,n)}finally{H=a,Ws.transition=i}}function yf(t,e,s,n){var a=H,i=Ws.transition;Ws.transition=null;try{H=4,zl(t,e,s,n)}finally{H=a,Ws.transition=i}}function zl(t,e,s,n){if(Zn){var a=zi(t,e,s,n);if(a===null)ai(t,e,n,ea,s),sc(t,n);else if(pf(a,t,e,s,n))n.stopPropagation();else if(sc(t,n),e&4&&-1<ff.indexOf(t)){for(;a!==null;){var i=ln(a);if(i!==null&&au(i),i=zi(t,e,s,n),i===null&&ai(t,e,n,ea,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else ai(t,e,n,null,s)}}var ea=null;function zi(t,e,s,n){if(ea=null,t=Ml(n),t=os(t),t!==null)if(e=vs(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Yd(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ea=t,null}function du(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nf()){case Fl:return 1;case tu:return 4;case Yn:case af:return 16;case su:return 536870912;default:return 16}default:return 16}}var It=null,Vl=null,$n=null;function uu(){if($n)return $n;var t,e=Vl,s=e.length,n,a="value"in It?It.value:It.textContent,i=a.length;for(t=0;t<s&&e[t]===a[t];t++);var l=s-t;for(n=1;n<=l&&e[s-n]===a[i-n];n++);return $n=a.slice(t,1<n?1-n:void 0)}function qn(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _n(){return!0}function nc(){return!1}function Be(t){function e(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_n:nc,this.isPropagationStopped=nc,this}return te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=_n)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=_n)},persist:function(){},isPersistent:_n}),e}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hl=Be(ar),an=te({},ar,{view:0,detail:0}),vf=Be(an),Ja,Ya,fr,wa=te({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fr&&(fr&&t.type==="mousemove"?(Ja=t.screenX-fr.screenX,Ya=t.screenY-fr.screenY):Ya=Ja=0,fr=t),Ja)},movementY:function(t){return"movementY"in t?t.movementY:Ya}}),ac=Be(wa),_f=te({},wa,{dataTransfer:0}),bf=Be(_f),wf=te({},an,{relatedTarget:0}),Xa=Be(wf),jf=te({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Nf=Be(jf),Sf=te({},ar,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kf=Be(Sf),Cf=te({},ar,{data:0}),ic=Be(Cf),Ef={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pf(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tf[t])?!!e[t]:!1}function Wl(){return Pf}var Af=te({},an,{key:function(t){if(t.key){var e=Ef[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(t){return t.type==="keypress"?qn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lf=Be(Af),Df=te({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lc=Be(Df),Of=te({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),If=Be(Of),$f=te({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),qf=Be($f),Mf=te({},wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ff=Be(Mf),Uf=[9,13,27,32],Ql=jt&&"CompositionEvent"in window,kr=null;jt&&"documentMode"in document&&(kr=document.documentMode);var Bf=jt&&"TextEvent"in window&&!kr,hu=jt&&(!Ql||kr&&8<kr&&11>=kr),oc=" ",cc=!1;function mu(t,e){switch(t){case"keyup":return Uf.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function zf(t,e){switch(t){case"compositionend":return fu(e);case"keypress":return e.which!==32?null:(cc=!0,oc);case"textInput":return t=e.data,t===oc&&cc?null:t;default:return null}}function Vf(t,e){if(Ls)return t==="compositionend"||!Ql&&mu(t,e)?(t=uu(),$n=Vl=It=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hu&&e.locale!=="ko"?null:e.data;default:return null}}var Hf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hf[t.type]:e==="textarea"}function pu(t,e,s,n){Wd(n),e=ta(e,"onChange"),0<e.length&&(s=new Hl("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Cr=null,Br=null;function Wf(t){ku(t,0)}function ja(t){var e=Is(t);if(Md(e))return t}function Qf(t,e){if(t==="change")return e}var xu=!1;if(jt){var Za;if(jt){var ei="oninput"in document;if(!ei){var uc=document.createElement("div");uc.setAttribute("oninput","return;"),ei=typeof uc.oninput=="function"}Za=ei}else Za=!1;xu=Za&&(!document.documentMode||9<document.documentMode)}function hc(){Cr&&(Cr.detachEvent("onpropertychange",gu),Br=Cr=null)}function gu(t){if(t.propertyName==="value"&&ja(Br)){var e=[];pu(e,Br,t,Ml(t)),Jd(Wf,e)}}function Gf(t,e,s){t==="focusin"?(hc(),Cr=e,Br=s,Cr.attachEvent("onpropertychange",gu)):t==="focusout"&&hc()}function Kf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ja(Br)}function Jf(t,e){if(t==="click")return ja(e)}function Yf(t,e){if(t==="input"||t==="change")return ja(e)}function Xf(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:Xf;function zr(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Si.call(e,a)||!at(t[a],e[a]))return!1}return!0}function mc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fc(t,e){var s=mc(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=mc(s)}}function yu(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yu(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vu(){for(var t=window,e=Gn();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Gn(t.document)}return e}function Gl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zf(t){var e=vu(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&yu(s.ownerDocument.documentElement,s)){if(n!==null&&Gl(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=fc(s,i);var l=fc(s,n);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var e0=jt&&"documentMode"in document&&11>=document.documentMode,Ds=null,Vi=null,Er=null,Hi=!1;function pc(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Hi||Ds==null||Ds!==Gn(n)||(n=Ds,"selectionStart"in n&&Gl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Er&&zr(Er,n)||(Er=n,n=ta(Vi,"onSelect"),0<n.length&&(e=new Hl("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Ds)))}function bn(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Os={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},ti={},_u={};jt&&(_u=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function Na(t){if(ti[t])return ti[t];if(!Os[t])return t;var e=Os[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in _u)return ti[t]=e[s];return t}var bu=Na("animationend"),wu=Na("animationiteration"),ju=Na("animationstart"),Nu=Na("transitionend"),Su=new Map,xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yt(t,e){Su.set(t,e),ys(e,[t])}for(var si=0;si<xc.length;si++){var ri=xc[si],t0=ri.toLowerCase(),s0=ri[0].toUpperCase()+ri.slice(1);Yt(t0,"on"+s0)}Yt(bu,"onAnimationEnd");Yt(wu,"onAnimationIteration");Yt(ju,"onAnimationStart");Yt("dblclick","onDoubleClick");Yt("focusin","onFocus");Yt("focusout","onBlur");Yt(Nu,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r0=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function gc(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,ef(n,e,void 0,t),t.currentTarget=null}function ku(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;gc(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;gc(a,o,d),i=c}}}if(Jn)throw t=Fi,Jn=!1,Fi=null,t}function G(t,e){var s=e[Ji];s===void 0&&(s=e[Ji]=new Set);var n=t+"__bubble";s.has(n)||(Cu(e,t,2,!1),s.add(n))}function ni(t,e,s){var n=0;e&&(n|=4),Cu(s,t,n,e)}var wn="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[wn]){t[wn]=!0,Dd.forEach(function(s){s!=="selectionchange"&&(r0.has(s)||ni(s,!1,t),ni(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wn]||(e[wn]=!0,ni("selectionchange",!1,e))}}function Cu(t,e,s,n){switch(du(e)){case 1:var a=gf;break;case 4:a=yf;break;default:a=zl}s=a.bind(null,e,s,t),a=void 0,!Mi||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,s,{capture:!0,passive:a}):t.addEventListener(e,s,!0):a!==void 0?t.addEventListener(e,s,{passive:a}):t.addEventListener(e,s,!1)}function ai(t,e,s,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=os(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}Jd(function(){var d=i,u=Ml(s),m=[];e:{var h=Su.get(t);if(h!==void 0){var v=Hl,g=t;switch(t){case"keypress":if(qn(s)===0)break e;case"keydown":case"keyup":v=Lf;break;case"focusin":g="focus",v=Xa;break;case"focusout":g="blur",v=Xa;break;case"beforeblur":case"afterblur":v=Xa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=bf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=If;break;case bu:case wu:case ju:v=Nf;break;case Nu:v=qf;break;case"scroll":v=vf;break;case"wheel":v=Ff;break;case"copy":case"cut":case"paste":v=kf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=lc}var _=(e&4)!==0,b=!_&&t==="scroll",f=_?h!==null?h+"Capture":null:h;_=[];for(var p=d,x;p!==null;){x=p;var y=x.stateNode;if(x.tag===5&&y!==null&&(x=y,f!==null&&(y=qr(p,f),y!=null&&_.push(Hr(p,y,x)))),b)break;p=p.return}0<_.length&&(h=new v(h,g,null,s,u),m.push({event:h,listeners:_}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&s!==$i&&(g=s.relatedTarget||s.fromElement)&&(os(g)||g[Nt]))break e;if((v||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,v?(g=s.relatedTarget||s.toElement,v=d,g=g?os(g):null,g!==null&&(b=vs(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(v=null,g=d),v!==g)){if(_=ac,y="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=lc,y="onPointerLeave",f="onPointerEnter",p="pointer"),b=v==null?h:Is(v),x=g==null?h:Is(g),h=new _(y,p+"leave",v,s,u),h.target=b,h.relatedTarget=x,y=null,os(u)===d&&(_=new _(f,p+"enter",g,s,u),_.target=x,_.relatedTarget=b,y=_),b=y,v&&g)t:{for(_=v,f=g,p=0,x=_;x;x=js(x))p++;for(x=0,y=f;y;y=js(y))x++;for(;0<p-x;)_=js(_),p--;for(;0<x-p;)f=js(f),x--;for(;p--;){if(_===f||f!==null&&_===f.alternate)break t;_=js(_),f=js(f)}_=null}else _=null;v!==null&&yc(m,h,v,_,!1),g!==null&&b!==null&&yc(m,b,g,_,!0)}}e:{if(h=d?Is(d):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var j=Qf;else if(dc(h))if(xu)j=Yf;else{j=Kf;var k=Gf}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Jf);if(j&&(j=j(t,d))){pu(m,j,s,u);break e}k&&k(t,h,d),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Ai(h,"number",h.value)}switch(k=d?Is(d):window,t){case"focusin":(dc(k)||k.contentEditable==="true")&&(Ds=k,Vi=d,Er=null);break;case"focusout":Er=Vi=Ds=null;break;case"mousedown":Hi=!0;break;case"contextmenu":case"mouseup":case"dragend":Hi=!1,pc(m,s,u);break;case"selectionchange":if(e0)break;case"keydown":case"keyup":pc(m,s,u)}var N;if(Ql)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ls?mu(t,s)&&(w="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(w="onCompositionStart");w&&(hu&&s.locale!=="ko"&&(Ls||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ls&&(N=uu()):(It=u,Vl="value"in It?It.value:It.textContent,Ls=!0)),k=ta(d,w),0<k.length&&(w=new ic(w,t,null,s,u),m.push({event:w,listeners:k}),N?w.data=N:(N=fu(s),N!==null&&(w.data=N)))),(N=Bf?zf(t,s):Vf(t,s))&&(d=ta(d,"onBeforeInput"),0<d.length&&(u=new ic("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:d}),u.data=N))}ku(m,e)})}function Hr(t,e,s){return{instance:t,listener:e,currentTarget:s}}function ta(t,e){for(var s=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=qr(t,s),i!=null&&n.unshift(Hr(t,i,a)),i=qr(t,e),i!=null&&n.push(Hr(t,i,a))),t=t.return}return n}function js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yc(t,e,s,n,a){for(var i=e._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=qr(s,i),c!=null&&l.unshift(Hr(s,c,o))):a||(c=qr(s,i),c!=null&&l.push(Hr(s,c,o)))),s=s.return}l.length!==0&&t.push({event:e,listeners:l})}var n0=/\r\n?/g,a0=/\u0000|\uFFFD/g;function vc(t){return(typeof t=="string"?t:""+t).replace(n0,`
`).replace(a0,"")}function jn(t,e,s){if(e=vc(e),vc(t)!==e&&s)throw Error(E(425))}function sa(){}var Wi=null,Qi=null;function Gi(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ki=typeof setTimeout=="function"?setTimeout:void 0,i0=typeof clearTimeout=="function"?clearTimeout:void 0,_c=typeof Promise=="function"?Promise:void 0,l0=typeof queueMicrotask=="function"?queueMicrotask:typeof _c<"u"?function(t){return _c.resolve(null).then(t).catch(o0)}:Ki;function o0(t){setTimeout(function(){throw t})}function ii(t,e){var s=e,n=0;do{var a=s.nextSibling;if(t.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){t.removeChild(a),Ur(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);Ur(e)}function Ut(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var ir=Math.random().toString(36).slice(2),ht="__reactFiber$"+ir,Wr="__reactProps$"+ir,Nt="__reactContainer$"+ir,Ji="__reactEvents$"+ir,c0="__reactListeners$"+ir,d0="__reactHandles$"+ir;function os(t){var e=t[ht];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Nt]||s[ht]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=bc(t);t!==null;){if(s=t[ht])return s;t=bc(t)}return e}t=s,s=t.parentNode}return null}function ln(t){return t=t[ht]||t[Nt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Sa(t){return t[Wr]||null}var Yi=[],$s=-1;function Xt(t){return{current:t}}function K(t){0>$s||(t.current=Yi[$s],Yi[$s]=null,$s--)}function Q(t,e){$s++,Yi[$s]=t.current,t.current=e}var Qt={},je=Xt(Qt),Ae=Xt(!1),ms=Qt;function Js(t,e){var s=t.type.contextTypes;if(!s)return Qt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Le(t){return t=t.childContextTypes,t!=null}function ra(){K(Ae),K(je)}function wc(t,e,s){if(je.current!==Qt)throw Error(E(168));Q(je,e),Q(Ae,s)}function Eu(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(E(108,Qm(t)||"Unknown",a));return te({},s,n)}function na(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qt,ms=je.current,Q(je,t),Q(Ae,Ae.current),!0}function jc(t,e,s){var n=t.stateNode;if(!n)throw Error(E(169));s?(t=Eu(t,e,ms),n.__reactInternalMemoizedMergedChildContext=t,K(Ae),K(je),Q(je,t)):K(Ae),Q(Ae,s)}var vt=null,ka=!1,li=!1;function Ru(t){vt===null?vt=[t]:vt.push(t)}function u0(t){ka=!0,Ru(t)}function Zt(){if(!li&&vt!==null){li=!0;var t=0,e=H;try{var s=vt;for(H=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}vt=null,ka=!1}catch(a){throw vt!==null&&(vt=vt.slice(t+1)),eu(Fl,Zt),a}finally{H=e,li=!1}}return null}var qs=[],Ms=0,aa=null,ia=0,Ve=[],He=0,fs=null,_t=1,bt="";function ns(t,e){qs[Ms++]=ia,qs[Ms++]=aa,aa=t,ia=e}function Tu(t,e,s){Ve[He++]=_t,Ve[He++]=bt,Ve[He++]=fs,fs=t;var n=_t;t=bt;var a=32-rt(n)-1;n&=~(1<<a),s+=1;var i=32-rt(e)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,_t=1<<32-rt(e)+a|s<<a|n,bt=i+t}else _t=1<<i|s<<a|n,bt=t}function Kl(t){t.return!==null&&(ns(t,1),Tu(t,1,0))}function Jl(t){for(;t===aa;)aa=qs[--Ms],qs[Ms]=null,ia=qs[--Ms],qs[Ms]=null;for(;t===fs;)fs=Ve[--He],Ve[He]=null,bt=Ve[--He],Ve[He]=null,_t=Ve[--He],Ve[He]=null}var Me=null,qe=null,J=!1,st=null;function Pu(t,e){var s=We(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Nc(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Me=t,qe=Ut(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Me=t,qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=fs!==null?{id:_t,overflow:bt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=We(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Me=t,qe=null,!0):!1;default:return!1}}function Xi(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zi(t){if(J){var e=qe;if(e){var s=e;if(!Nc(t,e)){if(Xi(t))throw Error(E(418));e=Ut(s.nextSibling);var n=Me;e&&Nc(t,e)?Pu(n,s):(t.flags=t.flags&-4097|2,J=!1,Me=t)}}else{if(Xi(t))throw Error(E(418));t.flags=t.flags&-4097|2,J=!1,Me=t}}}function Sc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Me=t}function Nn(t){if(t!==Me)return!1;if(!J)return Sc(t),J=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gi(t.type,t.memoizedProps)),e&&(e=qe)){if(Xi(t))throw Au(),Error(E(418));for(;e;)Pu(t,e),e=Ut(e.nextSibling)}if(Sc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){qe=Ut(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}qe=null}}else qe=Me?Ut(t.stateNode.nextSibling):null;return!0}function Au(){for(var t=qe;t;)t=Ut(t.nextSibling)}function Ys(){qe=Me=null,J=!1}function Yl(t){st===null?st=[t]:st.push(t)}var h0=Ct.ReactCurrentBatchConfig;function pr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(E(309));var n=s.stateNode}if(!n)throw Error(E(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!s._owner)throw Error(E(290,t))}return t}function Sn(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kc(t){var e=t._init;return e(t._payload)}function Lu(t){function e(f,p){if(t){var x=f.deletions;x===null?(f.deletions=[p],f.flags|=16):x.push(p)}}function s(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function n(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function a(f,p){return f=Ht(f,p),f.index=0,f.sibling=null,f}function i(f,p,x){return f.index=x,t?(x=f.alternate,x!==null?(x=x.index,x<p?(f.flags|=2,p):x):(f.flags|=2,p)):(f.flags|=1048576,p)}function l(f){return t&&f.alternate===null&&(f.flags|=2),f}function o(f,p,x,y){return p===null||p.tag!==6?(p=fi(x,f.mode,y),p.return=f,p):(p=a(p,x),p.return=f,p)}function c(f,p,x,y){var j=x.type;return j===As?u(f,p,x.props.children,y,x.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Pt&&kc(j)===p.type)?(y=a(p,x.props),y.ref=pr(f,p,x),y.return=f,y):(y=Hn(x.type,x.key,x.props,null,f.mode,y),y.ref=pr(f,p,x),y.return=f,y)}function d(f,p,x,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=pi(x,f.mode,y),p.return=f,p):(p=a(p,x.children||[]),p.return=f,p)}function u(f,p,x,y,j){return p===null||p.tag!==7?(p=hs(x,f.mode,y,j),p.return=f,p):(p=a(p,x),p.return=f,p)}function m(f,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=fi(""+p,f.mode,x),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case fn:return x=Hn(p.type,p.key,p.props,null,f.mode,x),x.ref=pr(f,null,p),x.return=f,x;case Ps:return p=pi(p,f.mode,x),p.return=f,p;case Pt:var y=p._init;return m(f,y(p._payload),x)}if(_r(p)||dr(p))return p=hs(p,f.mode,x,null),p.return=f,p;Sn(f,p)}return null}function h(f,p,x,y){var j=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:o(f,p,""+x,y);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fn:return x.key===j?c(f,p,x,y):null;case Ps:return x.key===j?d(f,p,x,y):null;case Pt:return j=x._init,h(f,p,j(x._payload),y)}if(_r(x)||dr(x))return j!==null?null:u(f,p,x,y,null);Sn(f,x)}return null}function v(f,p,x,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return f=f.get(x)||null,o(p,f,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fn:return f=f.get(y.key===null?x:y.key)||null,c(p,f,y,j);case Ps:return f=f.get(y.key===null?x:y.key)||null,d(p,f,y,j);case Pt:var k=y._init;return v(f,p,x,k(y._payload),j)}if(_r(y)||dr(y))return f=f.get(x)||null,u(p,f,y,j,null);Sn(p,y)}return null}function g(f,p,x,y){for(var j=null,k=null,N=p,w=p=0,T=null;N!==null&&w<x.length;w++){N.index>w?(T=N,N=null):T=N.sibling;var P=h(f,N,x[w],y);if(P===null){N===null&&(N=T);break}t&&N&&P.alternate===null&&e(f,N),p=i(P,p,w),k===null?j=P:k.sibling=P,k=P,N=T}if(w===x.length)return s(f,N),J&&ns(f,w),j;if(N===null){for(;w<x.length;w++)N=m(f,x[w],y),N!==null&&(p=i(N,p,w),k===null?j=N:k.sibling=N,k=N);return J&&ns(f,w),j}for(N=n(f,N);w<x.length;w++)T=v(N,f,w,x[w],y),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?w:T.key),p=i(T,p,w),k===null?j=T:k.sibling=T,k=T);return t&&N.forEach(function(D){return e(f,D)}),J&&ns(f,w),j}function _(f,p,x,y){var j=dr(x);if(typeof j!="function")throw Error(E(150));if(x=j.call(x),x==null)throw Error(E(151));for(var k=j=null,N=p,w=p=0,T=null,P=x.next();N!==null&&!P.done;w++,P=x.next()){N.index>w?(T=N,N=null):T=N.sibling;var D=h(f,N,P.value,y);if(D===null){N===null&&(N=T);break}t&&N&&D.alternate===null&&e(f,N),p=i(D,p,w),k===null?j=D:k.sibling=D,k=D,N=T}if(P.done)return s(f,N),J&&ns(f,w),j;if(N===null){for(;!P.done;w++,P=x.next())P=m(f,P.value,y),P!==null&&(p=i(P,p,w),k===null?j=P:k.sibling=P,k=P);return J&&ns(f,w),j}for(N=n(f,N);!P.done;w++,P=x.next())P=v(N,f,w,P.value,y),P!==null&&(t&&P.alternate!==null&&N.delete(P.key===null?w:P.key),p=i(P,p,w),k===null?j=P:k.sibling=P,k=P);return t&&N.forEach(function(Y){return e(f,Y)}),J&&ns(f,w),j}function b(f,p,x,y){if(typeof x=="object"&&x!==null&&x.type===As&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case fn:e:{for(var j=x.key,k=p;k!==null;){if(k.key===j){if(j=x.type,j===As){if(k.tag===7){s(f,k.sibling),p=a(k,x.props.children),p.return=f,f=p;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Pt&&kc(j)===k.type){s(f,k.sibling),p=a(k,x.props),p.ref=pr(f,k,x),p.return=f,f=p;break e}s(f,k);break}else e(f,k);k=k.sibling}x.type===As?(p=hs(x.props.children,f.mode,y,x.key),p.return=f,f=p):(y=Hn(x.type,x.key,x.props,null,f.mode,y),y.ref=pr(f,p,x),y.return=f,f=y)}return l(f);case Ps:e:{for(k=x.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){s(f,p.sibling),p=a(p,x.children||[]),p.return=f,f=p;break e}else{s(f,p);break}else e(f,p);p=p.sibling}p=pi(x,f.mode,y),p.return=f,f=p}return l(f);case Pt:return k=x._init,b(f,p,k(x._payload),y)}if(_r(x))return g(f,p,x,y);if(dr(x))return _(f,p,x,y);Sn(f,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(s(f,p.sibling),p=a(p,x),p.return=f,f=p):(s(f,p),p=fi(x,f.mode,y),p.return=f,f=p),l(f)):s(f,p)}return b}var Xs=Lu(!0),Du=Lu(!1),la=Xt(null),oa=null,Fs=null,Xl=null;function Zl(){Xl=Fs=oa=null}function eo(t){var e=la.current;K(la),t._currentValue=e}function el(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function Qs(t,e){oa=t,Xl=Fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pe=!0),t.firstContext=null)}function Ke(t){var e=t._currentValue;if(Xl!==t)if(t={context:t,memoizedValue:e,next:null},Fs===null){if(oa===null)throw Error(E(308));Fs=t,oa.dependencies={lanes:0,firstContext:t}}else Fs=Fs.next=t;return e}var cs=null;function to(t){cs===null?cs=[t]:cs.push(t)}function Ou(t,e,s,n){var a=e.interleaved;return a===null?(s.next=s,to(e)):(s.next=a.next,a.next=s),e.interleaved=s,St(t,n)}function St(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var At=!1;function so(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iu(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bt(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,V&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,St(t,s)}return a=n.interleaved,a===null?(e.next=e,to(n)):(e.next=a.next,a.next=e),n.interleaved=e,St(t,s)}function Mn(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ul(t,s)}}function Cc(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=e:i=i.next=e}else a=i=e;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function ca(t,e,s,n){var a=t.updateQueue;At=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,v=o.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,_=o;switch(h=e,v=s,_.tag){case 1:if(g=_.payload,typeof g=="function"){m=g.call(v,m,h);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,h=typeof g=="function"?g.call(v,m,h):g,h==null)break e;m=te({},m,h);break e;case 2:At=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else v={eventTime:v,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=v,c=m):u=u.next=v,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,e=a.shared.interleaved,e!==null){a=e;do l|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);xs|=l,t.lanes=l,t.memoizedState=m}}function Ec(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(E(191,a));a.call(n)}}}var on={},ft=Xt(on),Qr=Xt(on),Gr=Xt(on);function ds(t){if(t===on)throw Error(E(174));return t}function ro(t,e){switch(Q(Gr,e),Q(Qr,t),Q(ft,on),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Di(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Di(e,t)}K(ft),Q(ft,e)}function Zs(){K(ft),K(Qr),K(Gr)}function $u(t){ds(Gr.current);var e=ds(ft.current),s=Di(e,t.type);e!==s&&(Q(Qr,t),Q(ft,s))}function no(t){Qr.current===t&&(K(ft),K(Qr))}var Z=Xt(0);function da(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oi=[];function ao(){for(var t=0;t<oi.length;t++)oi[t]._workInProgressVersionPrimary=null;oi.length=0}var Fn=Ct.ReactCurrentDispatcher,ci=Ct.ReactCurrentBatchConfig,ps=0,ee=null,oe=null,de=null,ua=!1,Rr=!1,Kr=0,m0=0;function ve(){throw Error(E(321))}function io(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!at(t[s],e[s]))return!1;return!0}function lo(t,e,s,n,a,i){if(ps=i,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fn.current=t===null||t.memoizedState===null?g0:y0,t=s(n,a),Rr){i=0;do{if(Rr=!1,Kr=0,25<=i)throw Error(E(301));i+=1,de=oe=null,e.updateQueue=null,Fn.current=v0,t=s(n,a)}while(Rr)}if(Fn.current=ha,e=oe!==null&&oe.next!==null,ps=0,de=oe=ee=null,ua=!1,e)throw Error(E(300));return t}function oo(){var t=Kr!==0;return Kr=0,t}function dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?ee.memoizedState=de=t:de=de.next=t,de}function Je(){if(oe===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=oe.next;var e=de===null?ee.memoizedState:de.next;if(e!==null)de=e,oe=t;else{if(t===null)throw Error(E(310));oe=t,t={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},de===null?ee.memoizedState=de=t:de=de.next=t}return de}function Jr(t,e){return typeof e=="function"?e(t):e}function di(t){var e=Je(),s=e.queue;if(s===null)throw Error(E(311));s.lastRenderedReducer=t;var n=oe,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ps&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=n):c=c.next=m,ee.lanes|=u,xs|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,at(n,e.memoizedState)||(Pe=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){a=t;do i=a.lane,ee.lanes|=i,xs|=i,a=a.next;while(a!==t)}else a===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function ui(t){var e=Je(),s=e.queue;if(s===null)throw Error(E(311));s.lastRenderedReducer=t;var n=s.dispatch,a=s.pending,i=e.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);at(i,e.memoizedState)||(Pe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function qu(){}function Mu(t,e){var s=ee,n=Je(),a=e(),i=!at(n.memoizedState,a);if(i&&(n.memoizedState=a,Pe=!0),n=n.queue,co(Bu.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||de!==null&&de.memoizedState.tag&1){if(s.flags|=2048,Yr(9,Uu.bind(null,s,n,a,e),void 0,null),me===null)throw Error(E(349));ps&30||Fu(s,e,a)}return a}function Fu(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Uu(t,e,s,n){e.value=s,e.getSnapshot=n,zu(e)&&Vu(t)}function Bu(t,e,s){return s(function(){zu(e)&&Vu(t)})}function zu(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!at(t,s)}catch{return!0}}function Vu(t){var e=St(t,1);e!==null&&nt(e,t,1,-1)}function Rc(t){var e=dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:t},e.queue=t,t=t.dispatch=x0.bind(null,ee,t),[e.memoizedState,t]}function Yr(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Hu(){return Je().memoizedState}function Un(t,e,s,n){var a=dt();ee.flags|=t,a.memoizedState=Yr(1|e,s,void 0,n===void 0?null:n)}function Ca(t,e,s,n){var a=Je();n=n===void 0?null:n;var i=void 0;if(oe!==null){var l=oe.memoizedState;if(i=l.destroy,n!==null&&io(n,l.deps)){a.memoizedState=Yr(e,s,i,n);return}}ee.flags|=t,a.memoizedState=Yr(1|e,s,i,n)}function Tc(t,e){return Un(8390656,8,t,e)}function co(t,e){return Ca(2048,8,t,e)}function Wu(t,e){return Ca(4,2,t,e)}function Qu(t,e){return Ca(4,4,t,e)}function Gu(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ku(t,e,s){return s=s!=null?s.concat([t]):null,Ca(4,4,Gu.bind(null,e,t),s)}function uo(){}function Ju(t,e){var s=Je();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&io(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function Yu(t,e){var s=Je();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&io(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Xu(t,e,s){return ps&21?(at(s,e)||(s=ru(),ee.lanes|=s,xs|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pe=!0),t.memoizedState=s)}function f0(t,e){var s=H;H=s!==0&&4>s?s:4,t(!0);var n=ci.transition;ci.transition={};try{t(!1),e()}finally{H=s,ci.transition=n}}function Zu(){return Je().memoizedState}function p0(t,e,s){var n=Vt(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},eh(t))th(e,s);else if(s=Ou(t,e,s,n),s!==null){var a=ke();nt(s,t,n,a),sh(s,e,n)}}function x0(t,e,s){var n=Vt(t),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(eh(t))th(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,o=i(l,s);if(a.hasEagerState=!0,a.eagerState=o,at(o,l)){var c=e.interleaved;c===null?(a.next=a,to(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}s=Ou(t,e,a,n),s!==null&&(a=ke(),nt(s,t,n,a),sh(s,e,n))}}function eh(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function th(t,e){Rr=ua=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function sh(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ul(t,s)}}var ha={readContext:Ke,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},g0={readContext:Ke,useCallback:function(t,e){return dt().memoizedState=[t,e===void 0?null:e],t},useContext:Ke,useEffect:Tc,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Un(4194308,4,Gu.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Un(4194308,4,t,e)},useInsertionEffect:function(t,e){return Un(4,2,t,e)},useMemo:function(t,e){var s=dt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=dt();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=p0.bind(null,ee,t),[n.memoizedState,t]},useRef:function(t){var e=dt();return t={current:t},e.memoizedState=t},useState:Rc,useDebugValue:uo,useDeferredValue:function(t){return dt().memoizedState=t},useTransition:function(){var t=Rc(!1),e=t[0];return t=f0.bind(null,t[1]),dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=ee,a=dt();if(J){if(s===void 0)throw Error(E(407));s=s()}else{if(s=e(),me===null)throw Error(E(349));ps&30||Fu(n,e,s)}a.memoizedState=s;var i={value:s,getSnapshot:e};return a.queue=i,Tc(Bu.bind(null,n,i,t),[t]),n.flags|=2048,Yr(9,Uu.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=dt(),e=me.identifierPrefix;if(J){var s=bt,n=_t;s=(n&~(1<<32-rt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kr++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=m0++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},y0={readContext:Ke,useCallback:Ju,useContext:Ke,useEffect:co,useImperativeHandle:Ku,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:Yu,useReducer:di,useRef:Hu,useState:function(){return di(Jr)},useDebugValue:uo,useDeferredValue:function(t){var e=Je();return Xu(e,oe.memoizedState,t)},useTransition:function(){var t=di(Jr)[0],e=Je().memoizedState;return[t,e]},useMutableSource:qu,useSyncExternalStore:Mu,useId:Zu,unstable_isNewReconciler:!1},v0={readContext:Ke,useCallback:Ju,useContext:Ke,useEffect:co,useImperativeHandle:Ku,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:Yu,useReducer:ui,useRef:Hu,useState:function(){return ui(Jr)},useDebugValue:uo,useDeferredValue:function(t){var e=Je();return oe===null?e.memoizedState=t:Xu(e,oe.memoizedState,t)},useTransition:function(){var t=ui(Jr)[0],e=Je().memoizedState;return[t,e]},useMutableSource:qu,useSyncExternalStore:Mu,useId:Zu,unstable_isNewReconciler:!1};function Ze(t,e){if(t&&t.defaultProps){e=te({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function tl(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:te({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ea={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=ke(),a=Vt(t),i=wt(n,a);i.payload=e,s!=null&&(i.callback=s),e=Bt(t,i,a),e!==null&&(nt(e,t,a,n),Mn(e,t,a))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=ke(),a=Vt(t),i=wt(n,a);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Bt(t,i,a),e!==null&&(nt(e,t,a,n),Mn(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=ke(),n=Vt(t),a=wt(s,n);a.tag=2,e!=null&&(a.callback=e),e=Bt(t,a,n),e!==null&&(nt(e,t,n,s),Mn(e,t,n))}};function Pc(t,e,s,n,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,l):e.prototype&&e.prototype.isPureReactComponent?!zr(s,n)||!zr(a,i):!0}function rh(t,e,s){var n=!1,a=Qt,i=e.contextType;return typeof i=="object"&&i!==null?i=Ke(i):(a=Le(e)?ms:je.current,n=e.contextTypes,i=(n=n!=null)?Js(t,a):Qt),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ea,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ac(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Ea.enqueueReplaceState(e,e.state,null)}function sl(t,e,s,n){var a=t.stateNode;a.props=s,a.state=t.memoizedState,a.refs={},so(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=Ke(i):(i=Le(e)?ms:je.current,a.context=Js(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(tl(t,e,i,s),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ea.enqueueReplaceState(a,a.state,null),ca(t,s,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function er(t,e){try{var s="",n=e;do s+=Wm(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function hi(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function rl(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var _0=typeof WeakMap=="function"?WeakMap:Map;function nh(t,e,s){s=wt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){fa||(fa=!0,ml=n),rl(t,e)},s}function ah(t,e,s){s=wt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;s.payload=function(){return n(a)},s.callback=function(){rl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){rl(t,e),typeof n!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),s}function Lc(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new _0;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(s)||(a.add(s),t=D0.bind(null,t,e,s),e.then(t,t))}function Dc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Oc(t,e,s,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=wt(-1,1),e.tag=2,Bt(s,e,1))),s.lanes|=1),t)}var b0=Ct.ReactCurrentOwner,Pe=!1;function Se(t,e,s,n){e.child=t===null?Du(e,null,s,n):Xs(e,t.child,s,n)}function Ic(t,e,s,n,a){s=s.render;var i=e.ref;return Qs(e,a),n=lo(t,e,s,n,i,a),s=oo(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,kt(t,e,a)):(J&&s&&Kl(e),e.flags|=1,Se(t,e,n,a),e.child)}function $c(t,e,s,n,a){if(t===null){var i=s.type;return typeof i=="function"&&!vo(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,ih(t,e,i,n,a)):(t=Hn(s.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:zr,s(l,n)&&t.ref===e.ref)return kt(t,e,a)}return e.flags|=1,t=Ht(i,n),t.ref=e.ref,t.return=e,e.child=t}function ih(t,e,s,n,a){if(t!==null){var i=t.memoizedProps;if(zr(i,n)&&t.ref===e.ref)if(Pe=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Pe=!0);else return e.lanes=t.lanes,kt(t,e,a)}return nl(t,e,s,n,a)}function lh(t,e,s){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Bs,$e),$e|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(Bs,$e),$e|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Q(Bs,$e),$e|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,Q(Bs,$e),$e|=n;return Se(t,e,a,s),e.child}function oh(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function nl(t,e,s,n,a){var i=Le(s)?ms:je.current;return i=Js(e,i),Qs(e,a),s=lo(t,e,s,n,i,a),n=oo(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,kt(t,e,a)):(J&&n&&Kl(e),e.flags|=1,Se(t,e,s,a),e.child)}function qc(t,e,s,n,a){if(Le(s)){var i=!0;na(e)}else i=!1;if(Qs(e,a),e.stateNode===null)Bn(t,e),rh(e,s,n),sl(e,s,n,a),n=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Ke(d):(d=Le(s)?ms:je.current,d=Js(e,d));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Ac(e,l,n,d),At=!1;var h=e.memoizedState;l.state=h,ca(e,n,l,a),c=e.memoizedState,o!==n||h!==c||Ae.current||At?(typeof u=="function"&&(tl(e,s,u,n),c=e.memoizedState),(o=At||Pc(e,s,o,n,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,Iu(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:Ze(e.type,o),l.props=d,m=e.pendingProps,h=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ke(c):(c=Le(s)?ms:je.current,c=Js(e,c));var v=s.getDerivedStateFromProps;(u=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&Ac(e,l,n,c),At=!1,h=e.memoizedState,l.state=h,ca(e,n,l,a);var g=e.memoizedState;o!==m||h!==g||Ae.current||At?(typeof v=="function"&&(tl(e,s,v,n),g=e.memoizedState),(d=At||Pc(e,s,d,n,h,g,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,g,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),l.props=n,l.state=g,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return al(t,e,s,n,i,a)}function al(t,e,s,n,a,i){oh(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return a&&jc(e,s,!1),kt(t,e,i);n=e.stateNode,b0.current=e;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=Xs(e,t.child,null,i),e.child=Xs(e,null,o,i)):Se(t,e,o,i),e.memoizedState=n.state,a&&jc(e,s,!0),e.child}function ch(t){var e=t.stateNode;e.pendingContext?wc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wc(t,e.context,!1),ro(t,e.containerInfo)}function Mc(t,e,s,n,a){return Ys(),Yl(a),e.flags|=256,Se(t,e,s,n),e.child}var il={dehydrated:null,treeContext:null,retryLane:0};function ll(t){return{baseLanes:t,cachePool:null,transitions:null}}function dh(t,e,s){var n=e.pendingProps,a=Z.current,i=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Q(Z,a&1),t===null)return Zi(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,i?(n=e.mode,i=e.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Pa(l,n,0,null),t=hs(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ll(s),e.memoizedState=il,t):ho(e,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return w0(t,e,l,n,o,a,s);if(i){i=n.fallback,l=e.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ht(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Ht(o,i):(i=hs(i,l,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,l=t.child.memoizedState,l=l===null?ll(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~s,e.memoizedState=il,n}return i=t.child,t=i.sibling,n=Ht(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function ho(t,e){return e=Pa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kn(t,e,s,n){return n!==null&&Yl(n),Xs(e,t.child,null,s),t=ho(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w0(t,e,s,n,a,i,l){if(s)return e.flags&256?(e.flags&=-257,n=hi(Error(E(422))),kn(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=Pa({mode:"visible",children:n.children},a,0,null),i=hs(i,a,l,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Xs(e,t.child,null,l),e.child.memoizedState=ll(l),e.memoizedState=il,i);if(!(e.mode&1))return kn(t,e,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(E(419)),n=hi(i,n,void 0),kn(t,e,l,n)}if(o=(l&t.childLanes)!==0,Pe||o){if(n=me,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,St(t,a),nt(n,t,a,-1))}return yo(),n=hi(Error(E(421))),kn(t,e,l,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=O0.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,qe=Ut(a.nextSibling),Me=e,J=!0,st=null,t!==null&&(Ve[He++]=_t,Ve[He++]=bt,Ve[He++]=fs,_t=t.id,bt=t.overflow,fs=e),e=ho(e,n.children),e.flags|=4096,e)}function Fc(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),el(t.return,e,s)}function mi(t,e,s,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function uh(t,e,s){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Se(t,e,n.children,s),n=Z.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fc(t,s,e);else if(t.tag===19)Fc(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Q(Z,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(s=e.child,a=null;s!==null;)t=s.alternate,t!==null&&da(t)===null&&(a=s),s=s.sibling;s=a,s===null?(a=e.child,e.child=null):(a=s.sibling,s.sibling=null),mi(e,!1,a,s,i);break;case"backwards":for(s=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&da(t)===null){e.child=a;break}t=a.sibling,a.sibling=s,s=a,a=t}mi(e,!0,s,null,i);break;case"together":mi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bn(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,s=Ht(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Ht(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function j0(t,e,s){switch(e.tag){case 3:ch(e),Ys();break;case 5:$u(e);break;case 1:Le(e.type)&&na(e);break;case 4:ro(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Q(la,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Q(Z,Z.current&1),e.flags|=128,null):s&e.child.childLanes?dh(t,e,s):(Q(Z,Z.current&1),t=kt(t,e,s),t!==null?t.sibling:null);Q(Z,Z.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return uh(t,e,s);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Q(Z,Z.current),n)break;return null;case 22:case 23:return e.lanes=0,lh(t,e,s)}return kt(t,e,s)}var hh,ol,mh,fh;hh=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};ol=function(){};mh=function(t,e,s,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,ds(ft.current);var i=null;switch(s){case"input":a=Ti(t,a),n=Ti(t,n),i=[];break;case"select":a=te({},a,{value:void 0}),n=te({},n,{value:void 0}),i=[];break;case"textarea":a=Li(t,a),n=Li(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=sa)}Oi(s,n);var l;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ir.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ir.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&G("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};fh=function(t,e,s,n){s!==n&&(e.flags|=4)};function xr(t,e){if(!J)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function N0(t,e,s){var n=e.pendingProps;switch(Jl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return Le(e.type)&&ra(),_e(e),null;case 3:return n=e.stateNode,Zs(),K(Ae),K(je),ao(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Nn(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(xl(st),st=null))),ol(t,e),_e(e),null;case 5:no(e);var a=ds(Gr.current);if(s=e.type,t!==null&&e.stateNode!=null)mh(t,e,s,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(E(166));return _e(e),null}if(t=ds(ft.current),Nn(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[ht]=e,n[Wr]=i,t=(e.mode&1)!==0,s){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(a=0;a<wr.length;a++)G(wr[a],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":Ko(n,i),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},G("invalid",n);break;case"textarea":Yo(n,i),G("invalid",n)}Oi(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&jn(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&jn(n.textContent,o,t),a=["children",""+o]):Ir.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&G("scroll",n)}switch(s){case"input":pn(n),Jo(n,i,!0);break;case"textarea":pn(n),Xo(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=sa)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bd(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(s,{is:n.is}):(t=l.createElement(s),s==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,s),t[ht]=e,t[Wr]=n,hh(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ii(s,n),s){case"dialog":G("cancel",t),G("close",t),a=n;break;case"iframe":case"object":case"embed":G("load",t),a=n;break;case"video":case"audio":for(a=0;a<wr.length;a++)G(wr[a],t);a=n;break;case"source":G("error",t),a=n;break;case"img":case"image":case"link":G("error",t),G("load",t),a=n;break;case"details":G("toggle",t),a=n;break;case"input":Ko(t,n),a=Ti(t,n),G("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=te({},n,{value:void 0}),G("invalid",t);break;case"textarea":Yo(t,n),a=Li(t,n),G("invalid",t);break;default:a=n}Oi(s,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Hd(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zd(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&$r(t,c):typeof c=="number"&&$r(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ir.hasOwnProperty(i)?c!=null&&i==="onScroll"&&G("scroll",t):c!=null&&Ol(t,i,c,l))}switch(s){case"input":pn(t),Jo(t,n,!1);break;case"textarea":pn(t),Xo(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Wt(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?zs(t,!!n.multiple,i,!1):n.defaultValue!=null&&zs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=sa)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)fh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(E(166));if(s=ds(Gr.current),ds(ft.current),Nn(e)){if(n=e.stateNode,s=e.memoizedProps,n[ht]=e,(i=n.nodeValue!==s)&&(t=Me,t!==null))switch(t.tag){case 3:jn(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jn(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ht]=e,e.stateNode=n}return _e(e),null;case 13:if(K(Z),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(J&&qe!==null&&e.mode&1&&!(e.flags&128))Au(),Ys(),e.flags|=98560,i=!1;else if(i=Nn(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[ht]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),i=!1}else st!==null&&(xl(st),st=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Z.current&1?ce===0&&(ce=3):yo())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return Zs(),ol(t,e),t===null&&Vr(e.stateNode.containerInfo),_e(e),null;case 10:return eo(e.type._context),_e(e),null;case 17:return Le(e.type)&&ra(),_e(e),null;case 19:if(K(Z),i=e.memoizedState,i===null)return _e(e),null;if(n=(e.flags&128)!==0,l=i.rendering,l===null)if(n)xr(i,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=da(t),l!==null){for(e.flags|=128,xr(i,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Q(Z,Z.current&1|2),e.child}t=t.sibling}i.tail!==null&&re()>tr&&(e.flags|=128,n=!0,xr(i,!1),e.lanes=4194304)}else{if(!n)if(t=da(l),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),xr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!J)return _e(e),null}else 2*re()-i.renderingStartTime>tr&&s!==1073741824&&(e.flags|=128,n=!0,xr(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(s=i.last,s!==null?s.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=re(),e.sibling=null,s=Z.current,Q(Z,n?s&1|2:s&1),e):(_e(e),null);case 22:case 23:return go(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?$e&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function S0(t,e){switch(Jl(e),e.tag){case 1:return Le(e.type)&&ra(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zs(),K(Ae),K(je),ao(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return no(e),null;case 13:if(K(Z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(Z),null;case 4:return Zs(),null;case 10:return eo(e.type._context),null;case 22:case 23:return go(),null;case 24:return null;default:return null}}var Cn=!1,be=!1,k0=typeof WeakSet=="function"?WeakSet:Set,L=null;function Us(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){se(t,e,n)}else s.current=null}function cl(t,e,s){try{s()}catch(n){se(t,e,n)}}var Uc=!1;function C0(t,e){if(Wi=Zn,t=vu(),Gl(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,h=null;t:for(;;){for(var v;m!==s||a!==0&&m.nodeType!==3||(o=l+a),m!==i||n!==0&&m.nodeType!==3||(c=l+n),m.nodeType===3&&(l+=m.nodeValue.length),(v=m.firstChild)!==null;)h=m,m=v;for(;;){if(m===t)break t;if(h===s&&++d===a&&(o=l),h===i&&++u===n&&(c=l),(v=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=v}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qi={focusedElem:t,selectionRange:s},Zn=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,b=g.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ze(e.type,_),b);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(y){se(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return g=Uc,Uc=!1,g}function Tr(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&cl(e,s,i)}a=a.next}while(a!==n)}}function Ra(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function dl(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function ph(t){var e=t.alternate;e!==null&&(t.alternate=null,ph(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ht],delete e[Wr],delete e[Ji],delete e[c0],delete e[d0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xh(t){return t.tag===5||t.tag===3||t.tag===4}function Bc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ul(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=sa));else if(n!==4&&(t=t.child,t!==null))for(ul(t,e,s),t=t.sibling;t!==null;)ul(t,e,s),t=t.sibling}function hl(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(hl(t,e,s),t=t.sibling;t!==null;)hl(t,e,s),t=t.sibling}var pe=null,et=!1;function Et(t,e,s){for(s=s.child;s!==null;)gh(t,e,s),s=s.sibling}function gh(t,e,s){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(ba,s)}catch{}switch(s.tag){case 5:be||Us(s,e);case 6:var n=pe,a=et;pe=null,Et(t,e,s),pe=n,et=a,pe!==null&&(et?(t=pe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):pe.removeChild(s.stateNode));break;case 18:pe!==null&&(et?(t=pe,s=s.stateNode,t.nodeType===8?ii(t.parentNode,s):t.nodeType===1&&ii(t,s),Ur(t)):ii(pe,s.stateNode));break;case 4:n=pe,a=et,pe=s.stateNode.containerInfo,et=!0,Et(t,e,s),pe=n,et=a;break;case 0:case 11:case 14:case 15:if(!be&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&cl(s,e,l),a=a.next}while(a!==n)}Et(t,e,s);break;case 1:if(!be&&(Us(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){se(s,e,o)}Et(t,e,s);break;case 21:Et(t,e,s);break;case 22:s.mode&1?(be=(n=be)||s.memoizedState!==null,Et(t,e,s),be=n):Et(t,e,s);break;default:Et(t,e,s)}}function zc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new k0),e.forEach(function(n){var a=I0.bind(null,t,n);s.has(n)||(s.add(n),n.then(a,a))})}}function Ye(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:pe=o.stateNode,et=!1;break e;case 3:pe=o.stateNode.containerInfo,et=!0;break e;case 4:pe=o.stateNode.containerInfo,et=!0;break e}o=o.return}if(pe===null)throw Error(E(160));gh(i,l,a),pe=null,et=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){se(a,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yh(e,t),e=e.sibling}function yh(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ye(e,t),ct(t),n&4){try{Tr(3,t,t.return),Ra(3,t)}catch(_){se(t,t.return,_)}try{Tr(5,t,t.return)}catch(_){se(t,t.return,_)}}break;case 1:Ye(e,t),ct(t),n&512&&s!==null&&Us(s,s.return);break;case 5:if(Ye(e,t),ct(t),n&512&&s!==null&&Us(s,s.return),t.flags&32){var a=t.stateNode;try{$r(a,"")}catch(_){se(t,t.return,_)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=s!==null?s.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Fd(a,i),Ii(o,l);var d=Ii(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?Hd(a,m):u==="dangerouslySetInnerHTML"?zd(a,m):u==="children"?$r(a,m):Ol(a,u,m,d)}switch(o){case"input":Pi(a,i);break;case"textarea":Ud(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?zs(a,!!i.multiple,v,!1):h!==!!i.multiple&&(i.defaultValue!=null?zs(a,!!i.multiple,i.defaultValue,!0):zs(a,!!i.multiple,i.multiple?[]:"",!1))}a[Wr]=i}catch(_){se(t,t.return,_)}}break;case 6:if(Ye(e,t),ct(t),n&4){if(t.stateNode===null)throw Error(E(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(_){se(t,t.return,_)}}break;case 3:if(Ye(e,t),ct(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Ur(e.containerInfo)}catch(_){se(t,t.return,_)}break;case 4:Ye(e,t),ct(t);break;case 13:Ye(e,t),ct(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(po=re())),n&4&&zc(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(be=(d=be)||u,Ye(e,t),be=d):Ye(e,t),ct(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(L=t,u=t.child;u!==null;){for(m=L=u;L!==null;){switch(h=L,v=h.child,h.tag){case 0:case 11:case 14:case 15:Tr(4,h,h.return);break;case 1:Us(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,s=h.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){se(n,s,_)}}break;case 5:Us(h,h.return);break;case 22:if(h.memoizedState!==null){Hc(m);continue}}v!==null?(v.return=h,L=v):Hc(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Vd("display",l))}catch(_){se(t,t.return,_)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(_){se(t,t.return,_)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ye(e,t),ct(t),n&4&&zc(t);break;case 21:break;default:Ye(e,t),ct(t)}}function ct(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(xh(s)){var n=s;break e}s=s.return}throw Error(E(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&($r(a,""),n.flags&=-33);var i=Bc(t);hl(t,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Bc(t);ul(t,o,l);break;default:throw Error(E(161))}}catch(c){se(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E0(t,e,s){L=t,vh(t)}function vh(t,e,s){for(var n=(t.mode&1)!==0;L!==null;){var a=L,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||Cn;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||be;o=Cn;var d=be;if(Cn=l,(be=c)&&!d)for(L=a;L!==null;)l=L,c=l.child,l.tag===22&&l.memoizedState!==null?Wc(a):c!==null?(c.return=l,L=c):Wc(a);for(;i!==null;)L=i,vh(i),i=i.sibling;L=a,Cn=o,be=d}Vc(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,L=i):Vc(t)}}function Vc(t){for(;L!==null;){var e=L;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:be||Ra(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!be)if(s===null)n.componentDidMount();else{var a=e.elementType===e.type?s.memoizedProps:Ze(e.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ec(e,i,n);break;case 3:var l=e.updateQueue;if(l!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Ec(e,l,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Ur(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}be||e.flags&512&&dl(e)}catch(h){se(e,e.return,h)}}if(e===t){L=null;break}if(s=e.sibling,s!==null){s.return=e.return,L=s;break}L=e.return}}function Hc(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var s=e.sibling;if(s!==null){s.return=e.return,L=s;break}L=e.return}}function Wc(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Ra(4,e)}catch(c){se(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){se(e,a,c)}}var i=e.return;try{dl(e)}catch(c){se(e,i,c)}break;case 5:var l=e.return;try{dl(e)}catch(c){se(e,l,c)}}}catch(c){se(e,e.return,c)}if(e===t){L=null;break}var o=e.sibling;if(o!==null){o.return=e.return,L=o;break}L=e.return}}var R0=Math.ceil,ma=Ct.ReactCurrentDispatcher,mo=Ct.ReactCurrentOwner,Qe=Ct.ReactCurrentBatchConfig,V=0,me=null,ae=null,xe=0,$e=0,Bs=Xt(0),ce=0,Xr=null,xs=0,Ta=0,fo=0,Pr=null,Re=null,po=0,tr=1/0,gt=null,fa=!1,ml=null,zt=null,En=!1,$t=null,pa=0,Ar=0,fl=null,zn=-1,Vn=0;function ke(){return V&6?re():zn!==-1?zn:zn=re()}function Vt(t){return t.mode&1?V&2&&xe!==0?xe&-xe:h0.transition!==null?(Vn===0&&(Vn=ru()),Vn):(t=H,t!==0||(t=window.event,t=t===void 0?16:du(t.type)),t):1}function nt(t,e,s,n){if(50<Ar)throw Ar=0,fl=null,Error(E(185));nn(t,s,n),(!(V&2)||t!==me)&&(t===me&&(!(V&2)&&(Ta|=s),ce===4&&Dt(t,xe)),De(t,n),s===1&&V===0&&!(e.mode&1)&&(tr=re()+500,ka&&Zt()))}function De(t,e){var s=t.callbackNode;hf(t,e);var n=Xn(t,t===me?xe:0);if(n===0)s!==null&&tc(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&tc(s),e===1)t.tag===0?u0(Qc.bind(null,t)):Ru(Qc.bind(null,t)),l0(function(){!(V&6)&&Zt()}),s=null;else{switch(nu(n)){case 1:s=Fl;break;case 4:s=tu;break;case 16:s=Yn;break;case 536870912:s=su;break;default:s=Yn}s=Ch(s,_h.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function _h(t,e){if(zn=-1,Vn=0,V&6)throw Error(E(327));var s=t.callbackNode;if(Gs()&&t.callbackNode!==s)return null;var n=Xn(t,t===me?xe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=xa(t,n);else{e=n;var a=V;V|=2;var i=wh();(me!==t||xe!==e)&&(gt=null,tr=re()+500,us(t,e));do try{A0();break}catch(o){bh(t,o)}while(!0);Zl(),ma.current=i,V=a,ae!==null?e=0:(me=null,xe=0,e=ce)}if(e!==0){if(e===2&&(a=Ui(t),a!==0&&(n=a,e=pl(t,a))),e===1)throw s=Xr,us(t,0),Dt(t,n),De(t,re()),s;if(e===6)Dt(t,n);else{if(a=t.current.alternate,!(n&30)&&!T0(a)&&(e=xa(t,n),e===2&&(i=Ui(t),i!==0&&(n=i,e=pl(t,i))),e===1))throw s=Xr,us(t,0),Dt(t,n),De(t,re()),s;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(E(345));case 2:as(t,Re,gt);break;case 3:if(Dt(t,n),(n&130023424)===n&&(e=po+500-re(),10<e)){if(Xn(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){ke(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Ki(as.bind(null,t,Re,gt),e);break}as(t,Re,gt);break;case 4:if(Dt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var l=31-rt(n);i=1<<l,l=e[l],l>a&&(a=l),n&=~i}if(n=a,n=re()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*R0(n/1960))-n,10<n){t.timeoutHandle=Ki(as.bind(null,t,Re,gt),n);break}as(t,Re,gt);break;case 5:as(t,Re,gt);break;default:throw Error(E(329))}}}return De(t,re()),t.callbackNode===s?_h.bind(null,t):null}function pl(t,e){var s=Pr;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=xa(t,e),t!==2&&(e=Re,Re=s,e!==null&&xl(e)),t}function xl(t){Re===null?Re=t:Re.push.apply(Re,t)}function T0(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!at(i(),a))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dt(t,e){for(e&=~fo,e&=~Ta,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-rt(e),n=1<<s;t[s]=-1,e&=~n}}function Qc(t){if(V&6)throw Error(E(327));Gs();var e=Xn(t,0);if(!(e&1))return De(t,re()),null;var s=xa(t,e);if(t.tag!==0&&s===2){var n=Ui(t);n!==0&&(e=n,s=pl(t,n))}if(s===1)throw s=Xr,us(t,0),Dt(t,e),De(t,re()),s;if(s===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,as(t,Re,gt),De(t,re()),null}function xo(t,e){var s=V;V|=1;try{return t(e)}finally{V=s,V===0&&(tr=re()+500,ka&&Zt())}}function gs(t){$t!==null&&$t.tag===0&&!(V&6)&&Gs();var e=V;V|=1;var s=Qe.transition,n=H;try{if(Qe.transition=null,H=1,t)return t()}finally{H=n,Qe.transition=s,V=e,!(V&6)&&Zt()}}function go(){$e=Bs.current,K(Bs)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,i0(s)),ae!==null)for(s=ae.return;s!==null;){var n=s;switch(Jl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ra();break;case 3:Zs(),K(Ae),K(je),ao();break;case 5:no(n);break;case 4:Zs();break;case 13:K(Z);break;case 19:K(Z);break;case 10:eo(n.type._context);break;case 22:case 23:go()}s=s.return}if(me=t,ae=t=Ht(t.current,null),xe=$e=e,ce=0,Xr=null,fo=Ta=xs=0,Re=Pr=null,cs!==null){for(e=0;e<cs.length;e++)if(s=cs[e],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}cs=null}return t}function bh(t,e){do{var s=ae;try{if(Zl(),Fn.current=ha,ua){for(var n=ee.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ua=!1}if(ps=0,de=oe=ee=null,Rr=!1,Kr=0,mo.current=null,s===null||s.return===null){ce=1,Xr=e,ae=null;break}e:{var i=t,l=s.return,o=s,c=e;if(e=xe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var v=Dc(l);if(v!==null){v.flags&=-257,Oc(v,l,o,i,e),v.mode&1&&Lc(i,d,e),e=v,c=d;var g=e.updateQueue;if(g===null){var _=new Set;_.add(c),e.updateQueue=_}else g.add(c);break e}else{if(!(e&1)){Lc(i,d,e),yo();break e}c=Error(E(426))}}else if(J&&o.mode&1){var b=Dc(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Oc(b,l,o,i,e),Yl(er(c,o));break e}}i=c=er(c,o),ce!==4&&(ce=2),Pr===null?Pr=[i]:Pr.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=nh(i,c,e);Cc(i,f);break e;case 1:o=c;var p=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(zt===null||!zt.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var y=ah(i,o,e);Cc(i,y);break e}}i=i.return}while(i!==null)}Nh(s)}catch(j){e=j,ae===s&&s!==null&&(ae=s=s.return);continue}break}while(!0)}function wh(){var t=ma.current;return ma.current=ha,t===null?ha:t}function yo(){(ce===0||ce===3||ce===2)&&(ce=4),me===null||!(xs&268435455)&&!(Ta&268435455)||Dt(me,xe)}function xa(t,e){var s=V;V|=2;var n=wh();(me!==t||xe!==e)&&(gt=null,us(t,e));do try{P0();break}catch(a){bh(t,a)}while(!0);if(Zl(),V=s,ma.current=n,ae!==null)throw Error(E(261));return me=null,xe=0,ce}function P0(){for(;ae!==null;)jh(ae)}function A0(){for(;ae!==null&&!sf();)jh(ae)}function jh(t){var e=kh(t.alternate,t,$e);t.memoizedProps=t.pendingProps,e===null?Nh(t):ae=e,mo.current=null}function Nh(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=S0(s,e),s!==null){s.flags&=32767,ae=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,ae=null;return}}else if(s=N0(s,e,$e),s!==null){ae=s;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);ce===0&&(ce=5)}function as(t,e,s){var n=H,a=Qe.transition;try{Qe.transition=null,H=1,L0(t,e,s,n)}finally{Qe.transition=a,H=n}return null}function L0(t,e,s,n){do Gs();while($t!==null);if(V&6)throw Error(E(327));s=t.finishedWork;var a=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(mf(t,i),t===me&&(ae=me=null,xe=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||En||(En=!0,Ch(Yn,function(){return Gs(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Qe.transition,Qe.transition=null;var l=H;H=1;var o=V;V|=4,mo.current=null,C0(t,s),yh(s,t),Zf(Qi),Zn=!!Wi,Qi=Wi=null,t.current=s,E0(s),rf(),V=o,H=l,Qe.transition=i}else t.current=s;if(En&&(En=!1,$t=t,pa=a),i=t.pendingLanes,i===0&&(zt=null),lf(s.stateNode),De(t,re()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)a=e[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(fa)throw fa=!1,t=ml,ml=null,t;return pa&1&&t.tag!==0&&Gs(),i=t.pendingLanes,i&1?t===fl?Ar++:(Ar=0,fl=t):Ar=0,Zt(),null}function Gs(){if($t!==null){var t=nu(pa),e=Qe.transition,s=H;try{if(Qe.transition=null,H=16>t?16:t,$t===null)var n=!1;else{if(t=$t,$t=null,pa=0,V&6)throw Error(E(331));var a=V;for(V|=4,L=t.current;L!==null;){var i=L,l=i.child;if(L.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(L=d;L!==null;){var u=L;switch(u.tag){case 0:case 11:case 15:Tr(8,u,i)}var m=u.child;if(m!==null)m.return=u,L=m;else for(;L!==null;){u=L;var h=u.sibling,v=u.return;if(ph(u),u===d){L=null;break}if(h!==null){h.return=v,L=h;break}L=v}}}var g=i.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}L=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,L=l;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Tr(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,L=f;break e}L=i.return}}var p=t.current;for(L=p;L!==null;){l=L;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,L=x;else e:for(l=p;L!==null;){if(o=L,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ra(9,o)}}catch(j){se(o,o.return,j)}if(o===l){L=null;break e}var y=o.sibling;if(y!==null){y.return=o.return,L=y;break e}L=o.return}}if(V=a,Zt(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(ba,t)}catch{}n=!0}return n}finally{H=s,Qe.transition=e}}return!1}function Gc(t,e,s){e=er(s,e),e=nh(t,e,1),t=Bt(t,e,1),e=ke(),t!==null&&(nn(t,1,e),De(t,e))}function se(t,e,s){if(t.tag===3)Gc(t,t,s);else for(;e!==null;){if(e.tag===3){Gc(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zt===null||!zt.has(n))){t=er(s,t),t=ah(e,t,1),e=Bt(e,t,1),t=ke(),e!==null&&(nn(e,1,t),De(e,t));break}}e=e.return}}function D0(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=ke(),t.pingedLanes|=t.suspendedLanes&s,me===t&&(xe&s)===s&&(ce===4||ce===3&&(xe&130023424)===xe&&500>re()-po?us(t,0):fo|=s),De(t,e)}function Sh(t,e){e===0&&(t.mode&1?(e=yn,yn<<=1,!(yn&130023424)&&(yn=4194304)):e=1);var s=ke();t=St(t,e),t!==null&&(nn(t,e,s),De(t,s))}function O0(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Sh(t,s)}function I0(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(E(314))}n!==null&&n.delete(e),Sh(t,s)}var kh;kh=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ae.current)Pe=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Pe=!1,j0(t,e,s);Pe=!!(t.flags&131072)}else Pe=!1,J&&e.flags&1048576&&Tu(e,ia,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Bn(t,e),t=e.pendingProps;var a=Js(e,je.current);Qs(e,s),a=lo(null,e,n,t,a,s);var i=oo();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Le(n)?(i=!0,na(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,so(e),a.updater=Ea,e.stateNode=a,a._reactInternals=e,sl(e,n,t,s),e=al(null,e,n,!0,i,s)):(e.tag=0,J&&i&&Kl(e),Se(null,e,a,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Bn(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=q0(n),t=Ze(n,t),a){case 0:e=nl(null,e,n,t,s);break e;case 1:e=qc(null,e,n,t,s);break e;case 11:e=Ic(null,e,n,t,s);break e;case 14:e=$c(null,e,n,Ze(n.type,t),s);break e}throw Error(E(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),nl(t,e,n,a,s);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),qc(t,e,n,a,s);case 3:e:{if(ch(e),t===null)throw Error(E(387));n=e.pendingProps,i=e.memoizedState,a=i.element,Iu(t,e),ca(e,n,null,s);var l=e.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=er(Error(E(423)),e),e=Mc(t,e,n,s,a);break e}else if(n!==a){a=er(Error(E(424)),e),e=Mc(t,e,n,s,a);break e}else for(qe=Ut(e.stateNode.containerInfo.firstChild),Me=e,J=!0,st=null,s=Du(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ys(),n===a){e=kt(t,e,s);break e}Se(t,e,n,s)}e=e.child}return e;case 5:return $u(e),t===null&&Zi(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,Gi(n,a)?l=null:i!==null&&Gi(n,i)&&(e.flags|=32),oh(t,e),Se(t,e,l,s),e.child;case 6:return t===null&&Zi(e),null;case 13:return dh(t,e,s);case 4:return ro(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Xs(e,null,n,s):Se(t,e,n,s),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),Ic(t,e,n,a,s);case 7:return Se(t,e,e.pendingProps,s),e.child;case 8:return Se(t,e,e.pendingProps.children,s),e.child;case 12:return Se(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,l=a.value,Q(la,n._currentValue),n._currentValue=l,i!==null)if(at(i.value,l)){if(i.children===a.children&&!Ae.current){e=kt(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=wt(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),el(i.return,s,e),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(E(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),el(l,s,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Se(t,e,a.children,s),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Qs(e,s),a=Ke(a),n=n(a),e.flags|=1,Se(t,e,n,s),e.child;case 14:return n=e.type,a=Ze(n,e.pendingProps),a=Ze(n.type,a),$c(t,e,n,a,s);case 15:return ih(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Ze(n,a),Bn(t,e),e.tag=1,Le(n)?(t=!0,na(e)):t=!1,Qs(e,s),rh(e,n,a),sl(e,n,a,s),al(null,e,n,!0,t,s);case 19:return uh(t,e,s);case 22:return lh(t,e,s)}throw Error(E(156,e.tag))};function Ch(t,e){return eu(t,e)}function $0(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(t,e,s,n){return new $0(t,e,s,n)}function vo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q0(t){if(typeof t=="function")return vo(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$l)return 11;if(t===ql)return 14}return 2}function Ht(t,e){var s=t.alternate;return s===null?(s=We(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Hn(t,e,s,n,a,i){var l=2;if(n=t,typeof t=="function")vo(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case As:return hs(s.children,a,i,e);case Il:l=8,a|=8;break;case ki:return t=We(12,s,e,a|2),t.elementType=ki,t.lanes=i,t;case Ci:return t=We(13,s,e,a),t.elementType=Ci,t.lanes=i,t;case Ei:return t=We(19,s,e,a),t.elementType=Ei,t.lanes=i,t;case $d:return Pa(s,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Od:l=10;break e;case Id:l=9;break e;case $l:l=11;break e;case ql:l=14;break e;case Pt:l=16,n=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=We(l,s,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function hs(t,e,s,n){return t=We(7,t,n,e),t.lanes=s,t}function Pa(t,e,s,n){return t=We(22,t,n,e),t.elementType=$d,t.lanes=s,t.stateNode={isHidden:!1},t}function fi(t,e,s){return t=We(6,t,null,e),t.lanes=s,t}function pi(t,e,s){return e=We(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function M0(t,e,s,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ka(0),this.expirationTimes=Ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ka(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _o(t,e,s,n,a,i,l,o,c){return t=new M0(t,e,s,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=We(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},so(i),t}function F0(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Eh(t){if(!t)return Qt;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Le(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var s=t.type;if(Le(s))return Eu(t,s,e)}return e}function Rh(t,e,s,n,a,i,l,o,c){return t=_o(s,n,!0,t,a,i,l,o,c),t.context=Eh(null),s=t.current,n=ke(),a=Vt(s),i=wt(n,a),i.callback=e??null,Bt(s,i,a),t.current.lanes=a,nn(t,a,n),De(t,n),t}function Aa(t,e,s,n){var a=e.current,i=ke(),l=Vt(a);return s=Eh(s),e.context===null?e.context=s:e.pendingContext=s,e=wt(i,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bt(a,e,l),t!==null&&(nt(t,a,l,i),Mn(t,a,l)),l}function ga(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function bo(t,e){Kc(t,e),(t=t.alternate)&&Kc(t,e)}function U0(){return null}var Th=typeof reportError=="function"?reportError:function(t){console.error(t)};function wo(t){this._internalRoot=t}La.prototype.render=wo.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Aa(t,e,null,null)};La.prototype.unmount=wo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){Aa(null,t,null,null)}),e[Nt]=null}};function La(t){this._internalRoot=t}La.prototype.unstable_scheduleHydration=function(t){if(t){var e=lu();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Lt.length&&e!==0&&e<Lt[s].priority;s++);Lt.splice(s,0,t),s===0&&cu(t)}};function jo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jc(){}function B0(t,e,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=ga(l);i.call(d)}}var l=Rh(e,n,t,0,null,!1,!1,"",Jc);return t._reactRootContainer=l,t[Nt]=l.current,Vr(t.nodeType===8?t.parentNode:t),gs(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=ga(c);o.call(d)}}var c=_o(t,0,!1,null,null,!1,!1,"",Jc);return t._reactRootContainer=c,t[Nt]=c.current,Vr(t.nodeType===8?t.parentNode:t),gs(function(){Aa(e,c,s,n)}),c}function Oa(t,e,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=ga(l);o.call(c)}}Aa(e,l,t,a)}else l=B0(s,e,t,a,n);return ga(l)}au=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=br(e.pendingLanes);s!==0&&(Ul(e,s|1),De(e,re()),!(V&6)&&(tr=re()+500,Zt()))}break;case 13:gs(function(){var n=St(t,1);if(n!==null){var a=ke();nt(n,t,1,a)}}),bo(t,1)}};Bl=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var s=ke();nt(e,t,134217728,s)}bo(t,134217728)}};iu=function(t){if(t.tag===13){var e=Vt(t),s=St(t,e);if(s!==null){var n=ke();nt(s,t,e,n)}bo(t,e)}};lu=function(){return H};ou=function(t,e){var s=H;try{return H=t,e()}finally{H=s}};qi=function(t,e,s){switch(e){case"input":if(Pi(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var a=Sa(n);if(!a)throw Error(E(90));Md(n),Pi(n,a)}}}break;case"textarea":Ud(t,s);break;case"select":e=s.value,e!=null&&zs(t,!!s.multiple,e,!1)}};Gd=xo;Kd=gs;var z0={usingClientEntryPoint:!1,Events:[ln,Is,Sa,Wd,Qd,xo]},gr={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V0={bundleType:gr.bundleType,version:gr.version,rendererPackageName:gr.rendererPackageName,rendererConfig:gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ct.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xd(t),t===null?null:t.stateNode},findFiberByHostInstance:gr.findFiberByHostInstance||U0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rn.isDisabled&&Rn.supportsFiber)try{ba=Rn.inject(V0),mt=Rn}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0;Ue.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jo(e))throw Error(E(200));return F0(t,e,null,s)};Ue.createRoot=function(t,e){if(!jo(t))throw Error(E(299));var s=!1,n="",a=Th;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=_o(t,1,!1,null,null,s,!1,n,a),t[Nt]=e.current,Vr(t.nodeType===8?t.parentNode:t),new wo(e)};Ue.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Xd(e),t=t===null?null:t.stateNode,t};Ue.flushSync=function(t){return gs(t)};Ue.hydrate=function(t,e,s){if(!Da(e))throw Error(E(200));return Oa(null,t,e,!0,s)};Ue.hydrateRoot=function(t,e,s){if(!jo(t))throw Error(E(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=Th;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),e=Rh(e,null,t,1,s??null,a,!1,i,l),t[Nt]=e.current,Vr(t),n)for(t=0;t<n.length;t++)s=n[t],a=s._getVersion,a=a(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,a]:e.mutableSourceEagerHydrationData.push(s,a);return new La(e)};Ue.render=function(t,e,s){if(!Da(e))throw Error(E(200));return Oa(null,t,e,!1,s)};Ue.unmountComponentAtNode=function(t){if(!Da(t))throw Error(E(40));return t._reactRootContainer?(gs(function(){Oa(null,null,t,!1,function(){t._reactRootContainer=null,t[Nt]=null})}),!0):!1};Ue.unstable_batchedUpdates=xo;Ue.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!Da(s))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Oa(t,e,s,!1,n)};Ue.version="18.3.1-next-f1338f8080-20240426";function Ph(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ph)}catch(t){console.error(t)}}Ph(),Pd.exports=Ue;var H0=Pd.exports,Ah,Yc=H0;Ah=Yc.createRoot,Yc.hydrateRoot;const W0="modulepreload",Q0=function(t){return"/"+t},Xc={},cn=function(e,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=Q0(c),c in Xc)return;Xc[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":W0,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,v)=>{m.addEventListener("load",h),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},G0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>cn(async()=>{const{default:n}=await Promise.resolve().then(()=>lr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class No extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class K0 extends No{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zc extends No{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ed extends No{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gl||(gl={}));var J0=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class Y0{constructor(e,{headers:s={},customFetch:n,region:a=gl.Any}={}){this.url=e,this.headers=s,this.region=a,this.fetch=G0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return J0(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=s;let o={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const m=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(_=>{throw new K0(_)}),h=m.headers.get("x-relay-error");if(h&&h==="true")throw new Zc(m);if(!m.ok)throw new ed(m);let v=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return v==="application/json"?g=yield m.json():v==="application/octet-stream"?g=yield m.blob():v==="text/event-stream"?g=m:v==="multipart/form-data"?g=yield m.formData():g=yield m.text(),{data:g,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof ed||a instanceof Zc?a.context:void 0}}})}}var Te={},So={},Ia={},dn={},$a={},qa={},X0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sr=X0();const Z0=sr.fetch,Lh=sr.fetch.bind(sr),Dh=sr.Headers,ep=sr.Request,tp=sr.Response,lr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Dh,Request:ep,Response:tp,default:Lh,fetch:Z0},Symbol.toStringTag,{value:"Module"})),sp=ym(lr);var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});let rp=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ma.default=rp;var Oh=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qa,"__esModule",{value:!0});const np=Oh(sp),ap=Oh(Ma);let ip=class{constructor(e){var s,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=np.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,d;let u=null,m=null,h=null,v=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?m=p:m=JSON.parse(p))}const b=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),f=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&f&&f.length>1&&(h=parseInt(f[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(u={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,h=null,v=406,g="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(m=[],u=null,v=200,g="OK")}catch{i.status===404&&b===""?(v=204,g="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,v=200,g="OK"),u&&this.shouldThrowOnError)throw new ap.default(u)}return{error:u,data:m,count:h,status:v,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,s)}returns(){return this}overrideTypes(){return this}};qa.default=ip;var lp=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($a,"__esModule",{value:!0});const op=lp(qa);let cp=class extends op.default{select(e){let s=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(l,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};$a.default=cp;var dp=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dn,"__esModule",{value:!0});const up=dp($a);let hp=class extends up.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${l}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};dn.default=hp;var mp=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ia,"__esModule",{value:!0});const yr=mp(dn);let fp=class{constructor(e,{headers:s={},schema:n,fetch:a}){this.url=e,this.headers=new Headers(s),this.schema=n,this.fetch=a}select(e,{head:s=!1,count:n}={}){const a=s?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new yr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:n=!0}={}){var a;const i="POST";if(s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new yr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new yr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:s}={}){var n;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new yr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var s;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new yr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Ia.default=fp;var Ih=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(So,"__esModule",{value:!0});const pp=Ih(Ia),xp=Ih(dn);let gp=class $h{constructor(e,{headers:s={},schema:n,fetch:a}={}){this.url=e,this.headers=new Headers(s),this.schemaName=n,this.fetch=a}from(e){const s=new URL(`${this.url}/${e}`);return new pp.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $h(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:a=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${e}`);let d;n||a?(o=n?"HEAD":"GET",Object.entries(s).filter(([m,h])=>h!==void 0).map(([m,h])=>[m,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([m,h])=>{c.searchParams.append(m,h)})):(o="POST",d=s);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new xp.default({method:o,url:c,headers:u,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};So.default=gp;var or=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Te,"__esModule",{value:!0});Te.PostgrestError=Te.PostgrestBuilder=Te.PostgrestTransformBuilder=Te.PostgrestFilterBuilder=Te.PostgrestQueryBuilder=Te.PostgrestClient=void 0;const qh=or(So);Te.PostgrestClient=qh.default;const Mh=or(Ia);Te.PostgrestQueryBuilder=Mh.default;const Fh=or(dn);Te.PostgrestFilterBuilder=Fh.default;const Uh=or($a);Te.PostgrestTransformBuilder=Uh.default;const Bh=or(qa);Te.PostgrestBuilder=Bh.default;const zh=or(Ma);Te.PostgrestError=zh.default;var yp=Te.default={PostgrestClient:qh.default,PostgrestQueryBuilder:Mh.default,PostgrestFilterBuilder:Fh.default,PostgrestTransformBuilder:Uh.default,PostgrestBuilder:Bh.default,PostgrestError:zh.default};const{PostgrestClient:vp,PostgrestQueryBuilder:ey,PostgrestFilterBuilder:ty,PostgrestTransformBuilder:sy,PostgrestBuilder:ry,PostgrestError:ny}=yp;class _p{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const bp="2.15.5",wp=`realtime-js/${bp}`,jp="1.0.0",yl=1e4,Np=1e3,Sp=100;var Lr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Lr||(Lr={}));var ie;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ie||(ie={}));var tt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(tt||(tt={}));var vl;(function(t){t.websocket="websocket"})(vl||(vl={}));var ls;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ls||(ls={}));class kp{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const a=s.getUint8(1),i=s.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(e.slice(l,l+a));l=l+a;const c=n.decode(e.slice(l,l+i));l=l+i;const d=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class Vh{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(W||(W={}));const td=(t,e,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,l)=>(i[l]=Cp(l,t,e,a),i),{})},Cp=(t,e,s,n)=>{const a=e.find(o=>o.name===t),i=a==null?void 0:a.type,l=s[t];return i&&!n.includes(i)?Hh(i,l):_l(l)},Hh=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Pp(e,s)}switch(t){case W.bool:return Ep(e);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return Rp(e);case W.json:case W.jsonb:return Tp(e);case W.timestamp:return Ap(e);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return _l(e);default:return _l(e)}},_l=t=>t,Ep=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Rp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Tp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Pp=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const l=t.slice(1,s);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Hh(e,o))}return t},Ap=t=>typeof t=="string"?t.replace(" ","T"):t,Wh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class xi{constructor(e,s,n={},a=yl){this.channel=e,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var sd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(sd||(sd={}));class Dr{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dr.syncState(this.state,a,i,l),this.pendingDiffs.forEach(c=>{this.state=Dr.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Dr.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,a){const i=this.cloneDeep(e),l=this.transformState(s),o={},c={};return this.map(i,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const m=i[d];if(m){const h=u.map(b=>b.presence_ref),v=m.map(b=>b.presence_ref),g=u.filter(b=>v.indexOf(b.presence_ref)<0),_=m.filter(b=>h.indexOf(b.presence_ref)<0);g.length>0&&(o[d]=g),_.length>0&&(c[d]=_)}else o[d]=u}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(e,s,n,a){const{joins:i,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var d;const u=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(c),u.length>0){const m=e[o].map(v=>v.presence_ref),h=u.filter(v=>m.indexOf(v.presence_ref)<0);e[o].unshift(...h)}n(o,u,c)}),this.map(l,(o,c)=>{let d=e[o];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),e[o]=d,a(o,d,c),d.length===0&&delete e[o]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const a=e[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(rd||(rd={}));var Or;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Or||(Or={}));var yt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class ko{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new xi(this,tt.join,this.params,this.timeout),this.rejoinTimer=new Vh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Dr(this),this.broadcastEndpointURL=Wh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ie.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Or.PRESENCE]&&this.bindings[Or.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},h={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(yt.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(yt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},m)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:v})=>{var g;if(this.socket.setAuth(),v===void 0){e==null||e(yt.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,b=(g=_==null?void 0:_.length)!==null&&g!==void 0?g:0,f=[];for(let p=0;p<b;p++){const x=_[p],{filter:{event:y,schema:j,table:k,filter:N}}=x,w=v&&v[p];if(w&&w.event===y&&w.schema===j&&w.table===k&&w.filter===N)f.push(Object.assign(Object.assign({},x),{id:w.id}));else{this.unsubscribe(),this.state=ie.errored,e==null||e(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e(yt.SUBSCRIBED);return}}).receive("error",v=>{this.state=ie.errored,e==null||e(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===ie.joined&&e===Or.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async send(e,s={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ie.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new xi(this,tt.leave,{},e),n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ie.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),l}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new xi(this,e,s,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Sp){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var a,i;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=tt;if(n&&[o,c,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let h=this._onMessage(l,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var g,_,b;return((g=v.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(_=v.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(v=>v.callback(h,n)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var g,_,b,f,p,x;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const y=v.id,j=(g=v.filter)===null||g===void 0?void 0:g.event;return y&&((_=s.ids)===null||_===void 0?void 0:_.includes(y))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const y=(p=(f=v==null?void 0:v.filter)===null||f===void 0?void 0:f.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return y==="*"||y===((x=s==null?void 0:s.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:_,table:b,commit_timestamp:f,type:p,errors:x}=g;h=Object.assign(Object.assign({},{schema:_,table:b,commit_timestamp:f,eventType:p,new:{},old:{},errors:x}),this._getPayloadRecords(g))}v.callback(h,n)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const a=e.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ko.isEqual(a.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(tt.close,{},e)}_onError(e){this._on(tt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=td(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=td(e.columns,e.old_record)),s}}const gi=()=>{},Tn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lp=[1e3,2e3,5e3,1e4],Dp=1e4,Op=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ip{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yl,this.transport=null,this.heartbeatIntervalMs=Tn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gi,this.ref=0,this.reconnectTimer=null,this.logger=gi,this.conn=null,this.sendBuffer=[],this.serializer=new kp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>cn(async()=>{const{default:o}=await Promise.resolve().then(()=>lr);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=s==null?void 0:s.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${vl.websocket}`,this.httpEndpoint=Wh(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_p.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jp}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Lr.connecting:return ls.Connecting;case Lr.open:return ls.Open;case Lr.closing:return ls.Closing;default:return ls.Closed}}isConnected(){return this.connectionState()===ls.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new ko(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:a,ref:i}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Np,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Tn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:l}=s,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,l)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(tt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${e}${n}${a}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Op],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const a={access_token:s,version:wp};s&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(tt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Vh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,a,i,l,o,c,d,u;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:yl,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Tn.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:gi,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>Lp[m-1]||Dp,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(m,h)=>h(JSON.stringify(m)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Co extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function le(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class $p extends Co{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bl extends Co{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var qp=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const Qh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>cn(async()=>{const{default:n}=await Promise.resolve().then(()=>lr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Mp=()=>qp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cn(()=>Promise.resolve().then(()=>lr),void 0)).Response:Response}),wl=t=>{if(Array.isArray(t))return t.map(s=>wl(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=wl(n)}),e},Fp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var _s=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const yi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Up=(t,e,s)=>_s(void 0,void 0,void 0,function*(){const n=yield Mp();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(a=>{const i=t.status||500,l=(a==null?void 0:a.statusCode)||i+"";e(new $p(yi(a),i,l))}).catch(a=>{e(new bl(yi(a),a))}):e(new bl(yi(t),t))}),Bp=(t,e,s,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?a:(Fp(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),s))};function un(t,e,s,n,a,i){return _s(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(s,Bp(e,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Up(c,o,n))})})}function ya(t,e,s,n){return _s(this,void 0,void 0,function*(){return un(t,"GET",e,s,n)})}function ut(t,e,s,n,a){return _s(this,void 0,void 0,function*(){return un(t,"POST",e,n,a,s)})}function jl(t,e,s,n,a){return _s(this,void 0,void 0,function*(){return un(t,"PUT",e,n,a,s)})}function zp(t,e,s,n){return _s(this,void 0,void 0,function*(){return un(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Gh(t,e,s,n,a){return _s(this,void 0,void 0,function*(){return un(t,"DELETE",e,n,a,s)})}var Ne=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const Vp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hp{constructor(e,s={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=n,this.fetch=Qh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,n,a){return Ne(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},nd),a);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),m=yield(e=="PUT"?jl:ut)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}upload(e,s,n){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,a){return Ne(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:nd.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield jl(this.fetch,o.toString(),c,{headers:u});return{data:{path:i,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(le(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return Ne(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield ut(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Co("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}update(e,s,n){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Ne(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(le(a))return{data:null,error:a};throw a}})}copy(e,s,n){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield ut(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(le(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,n){return Ne(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield ut(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(le(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,n){return Ne(this,void 0,void 0,function*(){try{const a=yield ut(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(le(a))return{data:null,error:a};throw a}})}download(e,s){return Ne(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield ya(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(le(o))return{data:null,error:o};throw o}})}info(e){return Ne(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield ya(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:wl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}exists(e){return Ne(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield zp(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n)&&n instanceof bl){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}list(e,s,n){return Ne(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Vp),s),{prefix:e||""});return{data:yield ut(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(le(a))return{data:null,error:a};throw a}})}listV2(e,s){return Ne(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ut(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Wp="2.12.1",Qp={"X-Client-Info":`storage-js/${Wp}`};var Ns=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class Gp{constructor(e,s={},n,a){this.shouldThrowOnError=!1;const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Qp),s),this.fetch=Qh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ns(this,void 0,void 0,function*(){try{return{data:yield ya(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(le(e))return{data:null,error:e};throw e}})}getBucket(e){return Ns(this,void 0,void 0,function*(){try{return{data:yield ya(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ns(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Ns(this,void 0,void 0,function*(){try{return{data:yield jl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ns(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ns(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}}class Kp extends Gp{constructor(e,s={},n,a){super(e,s,n,a)}from(e){return new Hp(this.url,this.headers,e,this.fetch)}}const Jp="2.57.4";let jr="";typeof Deno<"u"?jr="deno":typeof document<"u"?jr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jr="react-native":jr="node";const Yp={"X-Client-Info":`supabase-js-${jr}/${Jp}`},Xp={headers:Yp},Zp={schema:"public"},ex={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tx={};var sx=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const rx=t=>{let e;return t?e=t:typeof fetch>"u"?e=Lh:e=fetch,(...s)=>e(...s)},nx=()=>typeof Headers>"u"?Dh:Headers,ax=(t,e,s)=>{const n=rx(s),a=nx();return(i,l)=>sx(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},l),{headers:d}))})};var ix=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};function lx(t){return t.endsWith("/")?t:t+"/"}function ox(t,e){var s,n;const{db:a,auth:i,realtime:l,global:o}=t,{db:c,auth:d,realtime:u,global:m}=e,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),l),storage:{},global:Object.assign(Object.assign(Object.assign({},m),o),{headers:Object.assign(Object.assign({},(s=m==null?void 0:m.headers)!==null&&s!==void 0?s:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>ix(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function cx(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lx(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Kh="2.71.1",Rs=30*1e3,Nl=3,vi=Nl*Rs,dx="http://localhost:9999",ux="supabase.auth.token",hx={"X-Client-Info":`gotrue-js/${Kh}`},Sl="X-Supabase-Api-Version",Jh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fx=10*60*1e3;class Eo extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function $(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class px extends Eo{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function xx(t){return $(t)&&t.name==="AuthApiError"}class Yh extends Eo{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class es extends Eo{constructor(e,s,n,a){super(e,n,a),this.name=s,this.status=n}}class Tt extends es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gx(t){return $(t)&&t.name==="AuthSessionMissingError"}class Pn extends es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class An extends es{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ln extends es{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yx(t){return $(t)&&t.name==="AuthImplicitGrantRedirectError"}class ad extends es{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kl extends es{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function _i(t){return $(t)&&t.name==="AuthRetryableFetchError"}class id extends es{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Cl extends es{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ld=` 	
\r=`.split(""),vx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ld.length;e+=1)t[ld[e].charCodeAt(0)]=-2;for(let e=0;e<va.length;e+=1)t[va[e].charCodeAt(0)]=e;return t})();function od(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(va[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(va[n]),e.queuedBits-=6}}function Xh(t,e,s){const n=vx[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function cd(t){const e=[],s=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{wx(l,n,s)};for(let l=0;l<t.length;l+=1)Xh(t.charCodeAt(l),a,i);return e.join("")}function _x(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function bx(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}_x(n,e)}}function wx(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function jx(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Xh(t.charCodeAt(a),s,n);return new Uint8Array(e)}function Nx(t){const e=[];return bx(t,s=>e.push(s)),new Uint8Array(e)}function Sx(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>od(a,s,n)),od(null,s,n),e.join("")}function kx(t){return Math.round(Date.now()/1e3)+t}function Cx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Xe=()=>typeof window<"u"&&typeof document<"u",ss={tested:!1,writable:!1},Zh=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ss.tested)return ss.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ss.tested=!0,ss.writable=!0}catch{ss.tested=!0,ss.writable=!1}return ss.writable};function Ex(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{e[a]=n}),e}const em=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>cn(async()=>{const{default:n}=await Promise.resolve().then(()=>lr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Rx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ts=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},rs=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Rt=async(t,e)=>{await t.removeItem(e)};class Fa{constructor(){this.promise=new Fa.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Fa.promiseConstructor=Promise;function bi(t){const e=t.split(".");if(e.length!==3)throw new Cl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!mx.test(e[n]))throw new Cl("JWT not in base64url format");return{header:JSON.parse(cd(e[0])),payload:JSON.parse(cd(e[1])),signature:jx(e[2]),raw:{header:e[0],payload:e[1]}}}async function Tx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Px(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){n(l);return}}catch(l){if(!e(i,l)){a(l);return}}})()})}function Ax(t){return("0"+t.toString(16)).substr(-2)}function Lx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,Ax).join("")}async function Dx(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Ox(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Dx(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ss(t,e,s=!1){const n=Lx();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await Ts(t,`${e}-code-verifier`,a);const i=await Ox(n);return[i,n===i?"plain":"s256"]}const Ix=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $x(t){const e=t.headers.get(Sl);if(!e||!e.match(Ix))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function qx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Mx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Fx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ks(t){if(!Fx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wi(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dd(t){return JSON.parse(JSON.stringify(t))}var Ux=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s};const is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Bx=[502,503,504];async function ud(t){var e;if(!Rx(t))throw new kl(is(t),0);if(Bx.includes(t.status))throw new kl(is(t),t.status);let s;try{s=await t.json()}catch(i){throw new Yh(is(i),i)}let n;const a=$x(t);if(a&&a.getTime()>=Jh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new id(is(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Tt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new id(is(s),t.status,s.weak_password.reasons);throw new px(is(s),t.status||500,n)}const zx=(t,e,s,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function M(t,e,s,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Sl]||(i[Sl]=Jh["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Vx(t,e,s+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Vx(t,e,s,n,a,i){const l=zx(e,n,a,i);let o;try{o=await t(s,Object.assign({},l))}catch(c){throw console.error(c),new kl(is(c),0)}if(o.ok||await ud(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await ud(c)}}function xt(t){var e;let s=null;Gx(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=kx(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function hd(t){const e=xt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ot(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Hx(t){return{data:t,error:null}}function Wx(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=t,l=Ux(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Qx(t){return t}function Gx(t){return t.access_token&&t.refresh_token&&t.expires_in}const ji=["global","local","others"];var Kx=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s};class Jx{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=em(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=ji[0]){if(ji.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ji.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ot})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Kx(e,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Wx,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if($(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ot})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,a,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Qx});if(u.error)throw u.error;const m=await u.json(),h=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(g=>{const _=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);d[`${b}Page`]=_}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if($(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){ks(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ot})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){ks(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ot})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){ks(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ot})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ks(e.userId);try{const{data:s,error:n}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if($(s))return{data:null,error:s};throw s}}async _deleteFactor(e){ks(e.userId),ks(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}}function md(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Yx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Cs={debug:!!(globalThis&&Zh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Xx extends tm{}async function Zx(t,e,s){Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Xx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Cs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Yx();const eg={url:dx,storageKey:ux,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fd(t,e,s){return await s()}const Es={};class Zr{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zr.nextInstanceID,Zr.nextInstanceID+=1,this.instanceID>0&&Xe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},eg),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Jx({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=em(a.fetch),this.lock=a.lock||fd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Xe()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Zx:this.lock=fd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Zh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=md(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=md(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Es[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Es[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Ex(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Xe()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),yx(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return $(s)?{error:s}:{error:new Yh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,a;try{const i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:xt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if($(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,a;try{let i;if("email"in e){const{email:u,password:m,options:h}=e;let v=null,g=null;this.flowType==="pkce"&&([v,g]=await Ss(this.storage,this.storageKey)),i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:m,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:v,code_challenge_method:g},xform:xt})}else if("phone"in e){const{phone:u,password:m,options:h}=e;i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:xt})}else throw new An("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if($(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:l,options:o}=e;s=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hd})}else if("phone"in e){const{phone:i,password:l,options:o}=e;s=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hd})}else throw new An("You must provide either an email or phone number and a password");const{data:n,error:a}=s;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Pn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if($(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,a,i,l,o,c,d,u,m,h,v;let g,_;if("message"in e)g=e.message,_=e.signature;else{const{chain:b,wallet:f,statement:p,options:x}=e;let y;if(Xe())if(typeof f=="object")y=f;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))y=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=f}const j=new URL((s=x==null?void 0:x.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in y&&y.signIn){const k=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),p?{statement:p}:null));let N;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")N=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)N=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),_=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((m=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...x.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const k=await y.signMessage(new TextEncoder().encode(g),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=k}}try{const{data:b,error:f}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Sx(_)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:xt});if(f)throw f;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Pn}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:f})}catch(b){if($(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await rs(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{const{data:i,error:l}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:xt});if(await Rt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Pn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if($(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:a,access_token:i,nonce:l}=e,o=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:xt}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if($(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,a,i,l;try{if("email"in e){const{email:o,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ss(this.storage,this.storageKey));const{error:m}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:o,options:c}=e,{data:d,error:u}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new An("You must provide either an email or phone number.")}catch(o){if($(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var s,n;try{let a,i;"options"in e&&(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:xt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if($(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var s,n,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Ss(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Hx})}catch(i){if($(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Tt;const{error:a}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if($(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:l}=await M(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:l,error:o}=await M(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new An("You must provide either an email or phone number and a type")}catch(s){if($(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await rs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<vi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await rs(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=wi()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async s=>{var n,a,i;const{data:l,error:o}=s;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tt}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ot})})}catch(s){if($(s))return gx(s)&&(await this._removeSession(),await Rt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Tt;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Ss(this.storage,this.storageKey));const{data:d,error:u}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Ot});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tt;const s=Date.now()/1e3;let n=s,a=!0,i=null;const{payload:l}=bi(e.access_token);if(l.exp&&(n=l.exp,a=n<=s),a){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if($(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:l,error:o}=s;if(o)throw o;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Tt;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if($(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Xe())throw new Ln("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ln(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ad("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ln("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ad("No code detected.");const{data:p,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=e;if(!i||!o||!l||!d)throw new Ln("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(o);let h=u+m;c&&(h=parseInt(c));const v=h-u;v*1e3<=Rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const g=h-m;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:_,error:b}=await this._getUser(i);if(b)throw b;const f={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:h,refresh_token:l,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(n){if($(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await rs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{error:i};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(xx(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Rt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Cx(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ss(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if($(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var l,o,c,d,u;const{data:m,error:h}=i;if(h)throw h;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Xe()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)throw l;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if($(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Px(async a=>(a>0&&await Tx(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&_i(i)&&Date.now()+l-n<Rs})}catch(n){if(this._debug(s,"error",n),$(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Xe()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await rs(this.storage,this.storageKey);if(a&&this.userStorage){let l=await rs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Ts(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:wi()}else if(a&&!a.user&&!a.user){const l=await rs(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Rt(this.storage,this.storageKey+"-user"),await Ts(this.storage,this.storageKey,a)):a.user=wi()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<vi;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${vi}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),_i(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fa;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Tt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),$(i)){const l={session:null,error:i};return _i(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Ts(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const i=dd(a);await Ts(this.storage,this.storageKey,i)}else{const a=dd(s);await Ts(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Rt(this.storage,this.storageKey),await Rt(this.storage,this.storageKey+"-code-verifier"),await Rt(this.storage,this.storageKey+"-user"),this.userStorage&&await Rt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Rs}ms, refresh threshold is ${Nl} ticks`),a<=Nl&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ss(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if($(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await M(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if($(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:l,error:o}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(s){if($(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if($(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],a=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=bi(a.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(s=a.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+fx>a)return n;const{data:i,error:l}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:v,error:g}=await this.getSession();if(g||!v.session)return{data:null,error:g};n=v.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:c}}=bi(n);s!=null&&s.allowExpired||qx(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:a,signature:l},error:null}}const u=Mx(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,l,Nx(`${o}.${c}`)))throw new Cl("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}}Zr.nextInstanceID=0;const tg=Zr;class sg extends tg{constructor(e){super(e)}}var rg=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class ng{constructor(e,s,n){var a,i,l;this.supabaseUrl=e,this.supabaseKey=s;const o=cx(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:Zp,realtime:tx,auth:Object.assign(Object.assign({},ex),{storageKey:c}),global:Xp},u=ox(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=ax(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new vp(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Kp(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Y0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return rg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:l,flowType:o,lock:c,debug:d},u,m){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sg({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:l,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ip(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ag=(t,e,s)=>new ng(t,e,s);function ig(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ig()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lg="https://kvzskzkzsdvdavdnvndo.supabase.co",og="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt2enNremt6c2R2ZGF2ZG52bmRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODM1OTAsImV4cCI6MjA3ODQ1OTU5MH0.rsTeSJhHAAP8H7cvlMGn11cRWUYDwz5yhUJ8r3aSor4",R=ag(lg,og),sm=C.createContext(void 0);function cg({children:t}){const e={id:"00000000-0000-0000-0000-000000000000",email:"user@statestreet.com",app_metadata:{},user_metadata:{},aud:"authenticated",created_at:new Date().toISOString()},[s]=C.useState(e),[n]=C.useState(!1),a=async(o,c,d)=>{const{data:u,error:m}=await R.auth.signUp({email:o,password:c});return!m&&u.user&&await R.from("user_profiles").insert({id:u.user.id,email:u.user.email,full_name:d||null}),{error:m}},i=async(o,c)=>{const{error:d}=await R.auth.signInWithPassword({email:o,password:c});return{error:d}},l=async()=>{await R.auth.signOut()};return r.jsx(sm.Provider,{value:{user:s,loading:n,signUp:a,signIn:i,signOut:l},children:t})}function ye(){const t=C.useContext(sm);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),I=(t,e)=>{const s=C.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>C.createElement("svg",{ref:u,...dg,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${ug(t)}`,o].join(" "),...d},[...e.map(([m,h])=>C.createElement(m,h)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=I("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=I("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=I("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=I("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=I("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=I("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=I("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=I("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=I("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=I("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=I("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=I("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=I("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=I("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=I("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=I("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=I("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=I("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=I("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=I("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=I("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=I("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=I("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=I("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=I("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=I("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=I("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=I("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=I("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=I("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=I("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=I("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=I("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=I("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=I("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=I("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=I("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=I("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=I("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=I("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=I("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=I("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);async function jg(t){const e=[{user_id:t,entity_code:"SSC",entity_name:"State Street Corporation",entity_type:"parent",jurisdiction:"United States (MA)",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Parent Holding Company"],description:"Top-tier bank holding company"},{user_id:t,entity_code:"SSBT",entity_name:"State Street Bank and Trust Company",entity_type:"subsidiary",jurisdiction:"United States (MA)",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Global Custody","Investment Servicing","Investment Management"],description:"Principal banking subsidiary providing custody and investment servicing"},{user_id:t,entity_code:"SSIF",entity_name:"State Street Intermediate Funding LLC",entity_type:"funding_entity",jurisdiction:"United States (DE)",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Internal Funding"],description:"Intermediate funding entity for capital and liquidity distribution"},{user_id:t,entity_code:"SSIH",entity_name:"State Street International Holdings",entity_type:"material_entity",jurisdiction:"United States (MA)",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Global Custody"],description:"Edge corporation holding international subsidiaries"},{user_id:t,entity_code:"SSTCC",entity_name:"State Street Trust Company Canada",entity_type:"material_entity",jurisdiction:"Canada",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Global Custody"],description:"Canadian trust company for custody services"},{user_id:t,entity_code:"SSGA",entity_name:"State Street Global Advisors",entity_type:"material_entity",jurisdiction:"United States (MA)",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Investment Management"],description:"Investment management division"},{user_id:t,entity_code:"SSBEL",entity_name:"State Street Bank Europe Limited",entity_type:"material_entity",jurisdiction:"Ireland",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Global Custody","Investment Servicing"],description:"European banking operations"},{user_id:t,entity_code:"SSLUX",entity_name:"State Street Bank International GmbH",entity_type:"material_entity",jurisdiction:"Germany",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Global Custody"],description:"German banking subsidiary"},{user_id:t,entity_code:"SSAPAC",entity_name:"State Street Australia Limited",entity_type:"material_entity",jurisdiction:"Australia",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Global Custody"],description:"Asia-Pacific custody operations"},{user_id:t,entity_code:"SSTZ",entity_name:"State Street Technology (Zhejiang) Co. Ltd",entity_type:"material_entity",jurisdiction:"China",is_material_entity:!0,parent_entity_id:null,core_business_lines:["Technology Services"],description:"IT development and technology services"}],{data:s,error:n}=await R.from("legal_entities").insert(e).select();if(n)return console.error("Error seeding legal entities:",n),{entities:[],entityMap:{}};const a={};return s==null||s.forEach(i=>{a[i.entity_code]=i.id}),{entities:s||[],entityMap:a}}async function Ng(t){const e=[{user_id:t,feed_name:"Core Banking System",feed_type:"core_banking",source_system:"State Street Core",status:"active",last_successful_run:new Date(Date.now()-72e5).toISOString(),last_run_at:new Date(Date.now()-72e5).toISOString(),records_loaded:2547891,error_count:0,freshness_threshold_hours:4,is_stale:!1,connection_status:"connected",notes:"Primary source for account balances and transactions"},{user_id:t,feed_name:"Treasury Management System",feed_type:"treasury",source_system:"TMS Pro",status:"active",last_successful_run:new Date(Date.now()-36e5).toISOString(),last_run_at:new Date(Date.now()-36e5).toISOString(),records_loaded:156432,error_count:0,freshness_threshold_hours:2,is_stale:!1,connection_status:"connected",notes:"Cash positions and liquidity forecasts"},{user_id:t,feed_name:"Market Data Feed",feed_type:"market_data",source_system:"Bloomberg",status:"active",last_successful_run:new Date(Date.now()-9e5).toISOString(),last_run_at:new Date(Date.now()-9e5).toISOString(),records_loaded:89234,error_count:0,freshness_threshold_hours:1,is_stale:!1,connection_status:"connected",notes:"Real-time pricing and FX rates"},{user_id:t,feed_name:"Regulatory Reporting",feed_type:"regulatory",source_system:"Federal Reserve",status:"active",last_successful_run:new Date(Date.now()-864e5).toISOString(),last_run_at:new Date(Date.now()-864e5).toISOString(),records_loaded:45678,error_count:0,freshness_threshold_hours:24,is_stale:!1,connection_status:"connected",notes:"FR 2052a and other regulatory submissions"},{user_id:t,feed_name:"Securities Reference Data",feed_type:"market_data",source_system:"DTCC",status:"active",last_successful_run:new Date(Date.now()-216e5).toISOString(),last_run_at:new Date(Date.now()-216e5).toISOString(),records_loaded:342109,error_count:2,freshness_threshold_hours:12,is_stale:!1,connection_status:"connected",notes:"Securities master data and corporate actions"},{user_id:t,feed_name:"Payment Systems",feed_type:"core_banking",source_system:"Fedwire/CHIPS",status:"active",last_successful_run:new Date(Date.now()-18e5).toISOString(),last_run_at:new Date(Date.now()-18e5).toISOString(),records_loaded:12456,error_count:0,freshness_threshold_hours:1,is_stale:!1,connection_status:"connected",notes:"Intraday payment flows and settlement data"}],s=[{user_id:t,check_name:"Balance Sheet Reconciliation",check_type:"reconciliation",data_source:"balance_sheet_metrics",status:"passed",total_records:12,passed_records:12,failed_records:0,execution_time_ms:245,last_run_at:new Date(Date.now()-3*60*60*1e3).toISOString()},{user_id:t,check_name:"LCR HQLA Validation",check_type:"input",data_source:"lcr_metrics",status:"passed",total_records:8,passed_records:8,failed_records:0,execution_time_ms:189,last_run_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{user_id:t,check_name:"NSFR Component Check",check_type:"transformation",data_source:"nsfr_metrics",status:"passed",total_records:8,passed_records:8,failed_records:0,execution_time_ms:312,last_run_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{user_id:t,check_name:"Interest Rate Risk Data Quality",check_type:"input",data_source:"interest_rate_risk_metrics",status:"passed",total_records:48,passed_records:48,failed_records:0,execution_time_ms:523,last_run_at:new Date(Date.now()-4*60*60*1e3).toISOString()},{user_id:t,check_name:"Resolution Liquidity Completeness",check_type:"output",data_source:"resolution_liquidity_metrics",status:"passed",total_records:8,passed_records:8,failed_records:0,execution_time_ms:198,last_run_at:new Date(Date.now()-3*60*60*1e3).toISOString()},{user_id:t,check_name:"Stress Test Scenario Validation",check_type:"transformation",data_source:"liquidity_stress_tests",status:"warning",total_records:30,passed_records:28,failed_records:2,error_message:"2 scenarios missing severity classification",execution_time_ms:445,last_run_at:new Date(Date.now()-5*60*60*1e3).toISOString()},{user_id:t,check_name:"Legal Entity Hierarchy",check_type:"reconciliation",data_source:"legal_entities",status:"passed",total_records:10,passed_records:10,failed_records:0,execution_time_ms:134,last_run_at:new Date(Date.now()-1*60*60*1e3).toISOString()},{user_id:t,check_name:"Account Balance Cross-Check",check_type:"reconciliation",data_source:"accounts",status:"passed",total_records:4,passed_records:4,failed_records:0,execution_time_ms:87,last_run_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{user_id:t,check_name:"Transaction Category Mapping",check_type:"transformation",data_source:"transactions",status:"passed",total_records:450,passed_records:450,failed_records:0,execution_time_ms:678,last_run_at:new Date(Date.now()-1*60*60*1e3).toISOString()}],n=[{user_id:t,source_system:"Core Banking",source_table:"accounts",source_column:"current_balance",target_system:"Analytics",target_table:"balance_sheet_metrics",target_column:"cash_and_due_from_banks",transformation_rule:"SUM(current_balance) WHERE account_type IN ('checking', 'savings')",transformation_type:"aggregated",dependency_level:1,is_critical:!0},{user_id:t,source_system:"Core Banking",source_table:"accounts",source_column:"current_balance",target_system:"Analytics",target_table:"balance_sheet_metrics",target_column:"total_assets",transformation_rule:"SUM(current_balance) WHERE current_balance > 0",transformation_type:"aggregated",dependency_level:1,is_critical:!0},{user_id:t,source_system:"Treasury Management",source_table:"securities_holdings",source_column:"market_value",target_system:"Analytics",target_table:"lcr_metrics",target_column:"hqla_level_1",transformation_rule:"SUM(market_value) WHERE security_type = 'US Treasury' AND maturity <= 90",transformation_type:"calculated",dependency_level:1,is_critical:!0},{user_id:t,source_system:"Analytics",source_table:"lcr_metrics",source_column:"total_hqla",target_system:"Reporting",target_table:"fr2052a_data",target_column:"hqla_amount",transformation_rule:"Direct mapping with date alignment",transformation_type:"direct",dependency_level:2,is_critical:!0},{user_id:t,source_system:"Analytics",source_table:"balance_sheet_metrics",source_column:"tier1_capital",target_system:"Analytics",target_table:"resolution_liquidity_metrics",target_column:"rcap_amount",transformation_rule:"tier1_capital * stress_factor WHERE scenario = 'resolution'",transformation_type:"derived",dependency_level:2,is_critical:!0},{user_id:t,source_system:"Market Data",source_table:"yield_curves",source_column:"rate",target_system:"Analytics",target_table:"interest_rate_risk_metrics",target_column:"eve_change_amount",transformation_rule:"Apply shock scenarios to rate curve and revalue portfolio",transformation_type:"calculated",dependency_level:1,is_critical:!0},{user_id:t,source_system:"Core Banking",source_table:"deposits",source_column:"balance",target_system:"Analytics",target_table:"nsfr_metrics",target_column:"required_stable_funding",transformation_rule:"Apply RSF factors based on deposit type and maturity",transformation_type:"calculated",dependency_level:1,is_critical:!0},{user_id:t,source_system:"Payment Systems",source_table:"fedwire_transactions",source_column:"amount",target_system:"Analytics",target_table:"intraday_liquidity",target_column:"peak_usage",transformation_rule:"MAX(cumulative_debit_position) GROUP BY business_day",transformation_type:"aggregated",dependency_level:1,is_critical:!0},{user_id:t,source_system:"Legal Entity Master",source_table:"entity_structure",source_column:"entity_id",target_system:"Analytics",target_table:"legal_entities",target_column:"id",transformation_rule:"Direct synchronization with enrichment",transformation_type:"direct",dependency_level:1,is_critical:!0},{user_id:t,source_system:"Analytics",source_table:"lcr_metrics",source_column:"lcr_ratio",target_system:"Analytics",target_table:"liquidity_stress_tests",target_column:"baseline_liquidity",transformation_rule:"Use current LCR as baseline for stress scenarios",transformation_type:"derived",dependency_level:2,is_critical:!1}],{error:a}=await R.from("data_feeds").insert(e);a&&console.error("Error seeding data feeds:",a);const{error:i}=await R.from("data_quality_checks").insert(s);i&&console.error("Error seeding quality checks:",i);const{error:l}=await R.from("data_lineage").insert(n);l&&console.error("Error seeding data lineage:",l),console.log("Data quality data seeded:",e.length,"feeds,",s.length,"checks,",n.length,"lineage mappings")}async function hm(t){const e=[{user_id:t,name:"Operating Account",account_type:"checking",currency:"USD",current_balance:245e4,institution:"State Street Bank",is_active:!0},{user_id:t,name:"Money Market Fund",account_type:"savings",currency:"USD",current_balance:58e5,institution:"State Street Global Advisors",is_active:!0},{user_id:t,name:"Investment Portfolio",account_type:"investment",currency:"USD",current_balance:125e5,institution:"State Street Investments",is_active:!0},{user_id:t,name:"Credit Facility",account_type:"credit",currency:"USD",current_balance:-12e5,institution:"State Street Bank",is_active:!0}],s=new Date,n=[];for(let a=0;a<90;a++){const i=new Date(s);i.setDate(i.getDate()-a);const l=i.toISOString().split("T")[0];a%3===0&&n.push({user_id:t,transaction_date:l,description:"Client Service Fees",amount:75e4+Math.random()*2e5,transaction_type:"credit",category:"Revenue"}),a%2===0&&n.push({user_id:t,transaction_date:l,description:"Operational Expenses",amount:-(8e4+Math.random()*6e4),transaction_type:"debit",category:"Operations"}),a%4===0&&n.push({user_id:t,transaction_date:l,description:"Securities Trading Revenue",amount:3e5+Math.random()*25e4,transaction_type:"credit",category:"Trading"}),a%5===0&&n.push({user_id:t,transaction_date:l,description:"Custody Fees",amount:6e5+Math.random()*15e4,transaction_type:"credit",category:"Revenue"}),a%7===1&&n.push({user_id:t,transaction_date:l,description:"Technology Infrastructure",amount:-(7e4+Math.random()*4e4),transaction_type:"debit",category:"Technology"}),a%6===0&&n.push({user_id:t,transaction_date:l,description:"Management Fees",amount:45e4+Math.random()*18e4,transaction_type:"credit",category:"Revenue"}),a%14===0&&n.push({user_id:t,transaction_date:l,description:"Compensation & Benefits",amount:-(28e4+Math.random()*8e4),transaction_type:"debit",category:"Personnel"}),a%5===2&&n.push({user_id:t,transaction_date:l,description:"FX Trading Revenue",amount:2e5+Math.random()*15e4,transaction_type:"credit",category:"Trading"}),a%10===0&&n.push({user_id:t,transaction_date:l,description:"Regulatory Compliance",amount:-(5e4+Math.random()*3e4),transaction_type:"debit",category:"Compliance"}),a%4===1&&n.push({user_id:t,transaction_date:l,description:"Investment Advisory Fees",amount:65e4+Math.random()*18e4,transaction_type:"credit",category:"Revenue"})}try{await R.from("transactions").delete().eq("user_id",t),await R.from("accounts").delete().eq("user_id",t);const a=await R.from("accounts").insert(e).select();if(a.error)return console.error("Error inserting accounts:",a.error),{success:!1,error:a.error};const i=a.data.map(c=>c.id),l=n.map((c,d)=>({...c,account_id:i[d%i.length]}));console.log("Inserting",l.length,"transactions");const o=await R.from("transactions").insert(l);return o.error?(console.error("Error inserting transactions:",o.error),{success:!1,error:o.error}):(console.log("Successfully seeded",i.length,"accounts and",l.length,"transactions"),{success:!0,message:"Dashboard data seeded successfully"})}catch(a){return console.error("Error seeding dashboard data:",a),{success:!1,error:a}}}async function Sg(t){try{await R.from("data_lineage").delete().eq("user_id",t),await R.from("data_quality_checks").delete().eq("user_id",t),await R.from("data_feeds").delete().eq("user_id",t),await R.from("legal_entities").delete().eq("user_id",t),await R.from("liquidity_stress_tests").delete().eq("user_id",t),await R.from("resolution_liquidity_metrics").delete().eq("user_id",t),await R.from("reg_k_metrics").delete().eq("user_id",t),await R.from("resolution_metrics").delete().eq("user_id",t),await R.from("interest_rate_risk_metrics").delete().eq("user_id",t),await R.from("balance_sheet_metrics").delete().eq("user_id",t),await R.from("nsfr_metrics").delete().eq("user_id",t),await R.from("lcr_metrics").delete().eq("user_id",t)}catch{console.log("Note: Some tables may not exist yet or have no data to delete")}const{entities:e,entityMap:s}=await jg(t);console.log("Seeded legal entities:",e.length),await Ng(t),console.log("Seeded data quality data");const n=[{user_id:t,report_date:"2024-09-30",hqla_level_1:548e8,hqla_level_2a:6117647059,hqla_level_2b:0,total_hqla:59e9,total_net_cash_outflows:529e8,lcr_ratio:1.115,is_compliant:!0,notes:"Q3 2024 - State Street Corporation LCR"},{user_id:t,report_date:"2024-06-30",hqla_level_1:532e8,hqla_level_2a:5882352941,hqla_level_2b:0,total_hqla:582e8,total_net_cash_outflows:518e8,lcr_ratio:1.124,is_compliant:!0,notes:"Q2 2024 - State Street Corporation LCR"},{user_id:t,report_date:"2024-03-31",hqla_level_1:521e8,hqla_level_2a:5764705882,hqla_level_2b:0,total_hqla:57e9,total_net_cash_outflows:505e8,lcr_ratio:1.129,is_compliant:!0,notes:"Q1 2024 - State Street Corporation LCR"}],a=[{user_id:t,report_date:"2024-09-30",available_stable_funding:1985e8,required_stable_funding:1601e8,nsfr_ratio:1.24,is_compliant:!0,retail_deposits:1542e8,wholesale_funding:328e8,notes:"Q3 2024 - State Street Corporation NSFR"},{user_id:t,report_date:"2024-06-30",available_stable_funding:1958e8,required_stable_funding:1589e8,nsfr_ratio:1.232,is_compliant:!0,retail_deposits:1516e8,wholesale_funding:321e8,notes:"Q2 2024 - State Street Corporation NSFR"},{user_id:t,report_date:"2024-03-31",available_stable_funding:1932e8,required_stable_funding:1572e8,nsfr_ratio:1.229,is_compliant:!0,retail_deposits:1498e8,wholesale_funding:319e8,notes:"Q1 2024 - State Street Corporation NSFR"}],i=[{user_id:t,report_date:"2024-09-30",total_assets:3058e8,total_liabilities:2782e8,total_equity:276e8,cash_and_due_from_banks:452e8,securities_available_for_sale:985e8,securities_held_to_maturity:123e8,loans_gross:421e8,allowance_for_loan_losses:-35e7,deposits_total:2548e8,deposits_noninterest_bearing:982e8,deposits_interest_bearing:1566e8,short_term_borrowings:82e8,long_term_debt:152e8,tier1_capital:224e8,total_risk_weighted_assets:1623e8,tier1_capital_ratio:.138,leverage_ratio:.072,notes:"Q3 2024 - State Street Corporation Balance Sheet"},{user_id:t,report_date:"2024-06-30",total_assets:3021e8,total_liabilities:2752e8,total_equity:269e8,cash_and_due_from_banks:441e8,securities_available_for_sale:968e8,securities_held_to_maturity:121e8,loans_gross:415e8,allowance_for_loan_losses:-34e7,deposits_total:2512e8,deposits_noninterest_bearing:968e8,deposits_interest_bearing:1544e8,short_term_borrowings:85e8,long_term_debt:155e8,tier1_capital:221e8,total_risk_weighted_assets:1608e8,tier1_capital_ratio:.137,leverage_ratio:.073,notes:"Q2 2024 - State Street Corporation Balance Sheet"}],l=[{user_id:t,report_date:"2024-09-30",scenario_type:"+200bp Parallel Shift",nii_current:52e8,nii_scenario:56264e5,nii_change_amount:4264e5,nii_change_percent:.082,eve_current:276e8,eve_scenario:26496e6,eve_change_amount:-1104e6,eve_change_percent:-.04,duration_gap:.35,notes:"Q3 2024 - Asset sensitive position"},{user_id:t,report_date:"2024-09-30",scenario_type:"+100bp Parallel Shift",nii_current:52e8,nii_scenario:5408e6,nii_change_amount:208e6,nii_change_percent:.04,eve_current:276e8,eve_scenario:27048e6,eve_change_amount:-552e6,eve_change_percent:-.02,duration_gap:.35,notes:"Q3 2024 - Moderate rate increase"},{user_id:t,report_date:"2024-09-30",scenario_type:"-100bp Parallel Shift",nii_current:52e8,nii_scenario:4992e6,nii_change_amount:-208e6,nii_change_percent:-.04,eve_current:276e8,eve_scenario:28152e6,eve_change_amount:552e6,eve_change_percent:.02,duration_gap:.35,notes:"Q3 2024 - Rate decrease scenario"}],o=[{user_id:t,report_date:"2024-09-30",total_loss_absorbing_capacity:352e8,tlac_ratio:.217,qualified_ltd:128e8,operational_deposit_capacity:982e8,resolution_liquidity_requirement:45e9,resolution_liquidity_available:59e9,critical_operations_count:8,material_entities_count:12,cross_border_exposures:1568e8,is_resolution_ready:!0,notes:"Q3 2024 - Resolution Planning Metrics"}],c=[{user_id:t,report_date:"2024-09-30",total_foreign_exposures:1568e8,country_risk_rating:"Investment Grade",cross_currency_funding_gap:123e8,foreign_office_assets:1425e8,foreign_office_liabilities:1302e8,fx_swap_notional:856e8,net_stable_funding_ratio_foreign:1.185,notes:"Q3 2024 - Significant operations in UK, Europe, APAC"}],d=[{user_id:t,report_date:"2024-09-30",rcap_amount:284e8,rcap_ratio:1.175,rcap_requirement:242e8,rcap_surplus_deficit:42e8,rcen_amount:185e8,rcen_ratio:1.085,rcen_requirement:1705e7,rlap_amount:628e8,rlap_ratio:1.256,rlap_requirement:5e10,rlap_surplus_deficit:128e8,rlen_amount:382e8,rlen_ratio:1.146,rlen_requirement:3335e7,resolution_strategy:"Single Point of Entry (SPE)",material_entities_count:12,is_compliant:!0,notes:"Q3 2024 - All resolution metrics exceed minimum thresholds"},{user_id:t,report_date:"2024-06-30",rcap_amount:278e8,rcap_ratio:1.165,rcap_requirement:2385e7,rcap_surplus_deficit:395e7,rcen_amount:181e8,rcen_ratio:1.075,rcen_requirement:1684e7,rlap_amount:615e8,rlap_ratio:1.242,rlap_requirement:495e8,rlap_surplus_deficit:12e9,rlen_amount:376e8,rlen_ratio:1.138,rlen_requirement:3305e7,resolution_strategy:"Single Point of Entry (SPE)",material_entities_count:12,is_compliant:!0,notes:"Q2 2024 - Resolution readiness maintained"}],u=[{user_id:t,report_date:"2024-09-30",scenario_name:"Severe Market Stress - 30 Day",scenario_type:"30_day_short_term",baseline_liquidity:59e9,baseline_hqla:59e9,baseline_deposits:2548e8,stressed_liquidity:428e8,stressed_cash_inflows:85e8,stressed_cash_outflows:247e8,stressed_net_cash_flow:-162e8,liquidity_shortfall:0,survival_days:30,stress_severity:"Severe",deposit_runoff_rate:.15,wholesale_funding_rollover_rate:.25,credit_line_drawdown_rate:.35,asset_liquidation_haircut:.12,passes_internal_threshold:!0,min_liquidity_buffer_maintained:!0,notes:"30-day severe stress - passes all internal thresholds with adequate buffer"},{user_id:t,report_date:"2024-09-30",scenario_name:"Baseline Adverse - 30 Day",scenario_type:"30_day_short_term",baseline_liquidity:59e9,baseline_hqla:59e9,baseline_deposits:2548e8,stressed_liquidity:482e8,stressed_cash_inflows:124e8,stressed_cash_outflows:232e8,stressed_net_cash_flow:-108e8,liquidity_shortfall:0,survival_days:30,stress_severity:"Moderate",deposit_runoff_rate:.08,wholesale_funding_rollover_rate:.15,credit_line_drawdown_rate:.2,asset_liquidation_haircut:.08,passes_internal_threshold:!0,min_liquidity_buffer_maintained:!0,notes:"30-day baseline adverse - comfortable liquidity position maintained"},{user_id:t,report_date:"2024-09-30",scenario_name:"Extended Crisis - 1 Year",scenario_type:"1_year_extended",baseline_liquidity:59e9,baseline_hqla:59e9,baseline_deposits:2548e8,stressed_liquidity:385e8,stressed_cash_inflows:452e8,stressed_cash_outflows:657e8,stressed_net_cash_flow:-205e8,liquidity_shortfall:0,survival_days:365,stress_severity:"Severe",deposit_runoff_rate:.25,wholesale_funding_rollover_rate:.5,credit_line_drawdown_rate:.6,asset_liquidation_haircut:.2,passes_internal_threshold:!0,min_liquidity_buffer_maintained:!0,notes:"1-year extended crisis - survives full year with liquidity buffer intact"},{user_id:t,report_date:"2024-09-30",scenario_name:"Idiosyncratic Stress - 1 Year",scenario_type:"1_year_extended",baseline_liquidity:59e9,baseline_hqla:59e9,baseline_deposits:2548e8,stressed_liquidity:442e8,stressed_cash_inflows:528e8,stressed_cash_outflows:676e8,stressed_net_cash_flow:-148e8,liquidity_shortfall:0,survival_days:365,stress_severity:"Moderate",deposit_runoff_rate:.18,wholesale_funding_rollover_rate:.35,credit_line_drawdown_rate:.45,asset_liquidation_haircut:.15,passes_internal_threshold:!0,min_liquidity_buffer_maintained:!0,notes:"1-year idiosyncratic stress - maintains adequate liquidity throughout period"}];try{const h=(await Promise.all([R.from("lcr_metrics").insert(n),R.from("nsfr_metrics").insert(a),R.from("balance_sheet_metrics").insert(i),R.from("interest_rate_risk_metrics").insert(l),R.from("resolution_metrics").insert(o),R.from("reg_k_metrics").insert(c),R.from("resolution_liquidity_metrics").insert(d),R.from("liquidity_stress_tests").insert(u)])).filter(v=>v.error);return h.length>0?(console.error("Errors seeding data:",h),{success:!1,errors:h}):{success:!0,message:"State Street Corporation data seeded successfully"}}catch(m){return console.error("Error seeding data:",m),{success:!1,error:m}}}function mm({metricName:t,targetTable:e,targetColumn:s,onClose:n}){const{user:a}=ye(),[i,l]=C.useState([]),[o,c]=C.useState(!0);C.useEffect(()=>{d()},[e,s]);const d=async()=>{if(a)try{const{data:h,error:v}=await R.from("data_lineage").select("*").eq("user_id",a.id).eq("target_table",e).eq("target_column",s).order("dependency_level",{ascending:!0});if(v)throw v;l(h||[])}catch(h){console.error("Error loading lineage data:",h)}finally{c(!1)}},u=i.reduce((h,v)=>{const g=v.dependency_level;return h[g]||(h[g]=[]),h[g].push(v),h},{}),m=Object.keys(u).map(Number).sort((h,v)=>h-v);return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Data Lineage"}),r.jsx("p",{className:"text-sm text-blue-100 mt-1",children:t})]}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",children:r.jsx(Jt,{className:"w-5 h-5 text-white"})})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6",children:o?r.jsx("div",{className:"text-center py-12 text-slate-600",children:"Loading lineage data..."}):i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(sn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-600",children:"No lineage data available for this metric"})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(we,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Target Metric"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{className:"text-slate-700",children:[r.jsx("span",{className:"font-medium",children:"Table:"})," ",e]}),r.jsxs("p",{className:"text-slate-700",children:[r.jsx("span",{className:"font-medium",children:"Column:"})," ",s]})]})]})]})}),m.map((h,v)=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-700 text-white text-sm font-bold",children:h}),r.jsxs("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:["Dependency Level ",h]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-11",children:u[h].map(g=>r.jsxs("div",{className:`relative rounded-lg border-2 p-4 ${g.is_critical?"bg-red-50 border-red-300":"bg-slate-50 border-slate-200"}`,children:[g.is_critical&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx("span",{className:"px-2 py-0.5 bg-red-600 text-white text-xs font-semibold rounded",children:"CRITICAL"})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"SOURCE"}),r.jsx("p",{className:"text-sm font-medium text-slate-900",children:g.source_system}),r.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[g.source_table,".",g.source_column]})]})}),r.jsx(hg,{className:"w-5 h-5 text-slate-400 flex-shrink-0"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"TARGET"}),r.jsx("p",{className:"text-sm font-medium text-slate-900",children:g.target_system}),r.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[g.target_table,".",g.target_column]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${g.transformation_type==="direct"?"bg-green-100 text-green-700":g.transformation_type==="calculated"?"bg-blue-100 text-blue-700":g.transformation_type==="aggregated"?"bg-purple-100 text-purple-700":"bg-amber-100 text-amber-700"}`,children:g.transformation_type.toUpperCase()})}),r.jsx("p",{className:"text-xs text-slate-700",children:g.transformation_rule})]})]})]},g.id))}),v<m.length-1&&r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"w-0.5 h-8 bg-slate-300"})})]},h))]})}),r.jsx("div",{className:"bg-slate-50 px-6 py-4 border-t border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-6 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-green-100 border border-green-300"}),r.jsx("span",{className:"text-slate-600",children:"Direct Mapping"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-blue-100 border border-blue-300"}),r.jsx("span",{className:"text-slate-600",children:"Calculated"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-purple-100 border border-purple-300"}),r.jsx("span",{className:"text-slate-600",children:"Aggregated"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-amber-100 border border-amber-300"}),r.jsx("span",{className:"text-slate-600",children:"Derived"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-red-50 border-2 border-red-300"}),r.jsx("span",{className:"text-slate-600",children:"Critical Path"})]})]})})]})})}function kg({metricName:t,dataSource:e,onClose:s}){const{user:n}=ye(),[a,i]=C.useState([]),[l,o]=C.useState([]),[c,d]=C.useState(!0);C.useEffect(()=>{u()},[e]);const u=async()=>{if(n)try{const[_,b]=await Promise.all([R.from("data_quality_checks").select("*").eq("user_id",n.id).eq("data_source",e).order("last_run_at",{ascending:!1}).limit(10),R.from("data_feeds").select("*").eq("user_id",n.id).ilike("feed_name",`%${e}%`).order("last_run_at",{ascending:!1}).limit(5)]);if(_.error)throw _.error;if(b.error)throw b.error;i(_.data||[]),o(b.data||[])}catch(_){console.error("Error loading quality data:",_)}finally{d(!1)}},m=_=>({completeness:{label:"Completeness Check",description:"Validates that required fields are populated and not null",color:"bg-blue-100 text-blue-700 border-blue-300"},accuracy:{label:"Accuracy Check",description:"Ensures data values are correct and match expected patterns",color:"bg-green-100 text-green-700 border-green-300"},consistency:{label:"Consistency Check",description:"Verifies data consistency across related tables and fields",color:"bg-purple-100 text-purple-700 border-purple-300"},timeliness:{label:"Timeliness Check",description:"Checks if data is fresh and updated within expected timeframes",color:"bg-amber-100 text-amber-700 border-amber-300"},uniqueness:{label:"Uniqueness Check",description:"Validates that records do not contain duplicates",color:"bg-cyan-100 text-cyan-700 border-cyan-300"},validity:{label:"Validity Check",description:"Ensures values conform to defined business rules and constraints",color:"bg-indigo-100 text-indigo-700 border-indigo-300"},variance:{label:"Variance Analysis",description:"Detects unusual changes or anomalies in input values",color:"bg-rose-100 text-rose-700 border-rose-300"}})[_]||{label:_,description:"Data quality validation",color:"bg-slate-100 text-slate-700 border-slate-300"},h=_=>{switch(_){case"passed":return r.jsx(z,{className:"w-5 h-5 text-green-600"});case"failed":return r.jsx(rr,{className:"w-5 h-5 text-red-600"});case"warning":return r.jsx(he,{className:"w-5 h-5 text-amber-600"});default:return r.jsx(en,{className:"w-5 h-5 text-slate-400"})}},v=_=>new Date(_).toLocaleString(),g=_=>_.total_records===0?0:(_.passed_records/_.total_records*100).toFixed(1);return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Data Quality & Feeds"}),r.jsx("p",{className:"text-sm text-green-100 mt-1",children:t})]}),r.jsx("button",{onClick:s,className:"p-2 hover:bg-green-500 rounded-lg transition-colors",children:r.jsx(Jt,{className:"w-5 h-5 text-white"})})]}),r.jsx("div",{className:"flex-1 overflow-auto",children:c?r.jsx("div",{className:"text-center py-12 text-slate-600",children:"Loading quality data..."}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(we,{className:"w-5 h-5 text-green-600"}),"Data Feeds"]}),l.length===0?r.jsxs("div",{className:"bg-slate-50 rounded-lg p-8 text-center",children:[r.jsx(we,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-600",children:"No data feeds configured for this metric"})]}):r.jsx("div",{className:"space-y-3",children:l.map(_=>r.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900",children:_.feed_name}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:_.source_system})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${_.status==="active"?"bg-green-100 text-green-700":_.status==="error"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:_.status.toUpperCase()}),_.is_stale&&r.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-amber-100 text-amber-700",children:"STALE"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Records Loaded"}),r.jsx("p",{className:"font-semibold text-slate-900",children:_.records_loaded.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Errors"}),r.jsx("p",{className:"font-semibold text-slate-900",children:_.error_count})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Last Run"}),r.jsx("p",{className:"font-semibold text-slate-900 text-xs",children:v(_.last_run_at)})]})]})]},_.id))})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(z,{className:"w-5 h-5 text-green-600"}),"Quality Checks"]}),a.length===0?r.jsxs("div",{className:"bg-slate-50 rounded-lg p-8 text-center",children:[r.jsx(z,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-600",children:"No quality checks configured for this metric"})]}):r.jsx("div",{className:"space-y-4",children:a.map(_=>{const b=m(_.check_type),f=g(_);return r.jsx("div",{className:"bg-white rounded-lg border-2 border-slate-200 overflow-hidden",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h(_.status),r.jsx("h4",{className:"font-semibold text-slate-900",children:_.check_name})]}),r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold border ${b.color}`,children:b.label})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`text-2xl font-bold ${parseFloat(f)>=95?"text-green-600":parseFloat(f)>=80?"text-amber-600":"text-red-600"}`,children:[f,"%"]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Pass Rate"})]})]}),r.jsx("div",{className:"bg-slate-50 rounded-lg p-3 mb-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(it,{className:"w-4 h-4 text-slate-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.description})]})}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Total Records"}),r.jsx("p",{className:"font-semibold text-slate-900",children:_.total_records.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Passed"}),r.jsx("p",{className:"font-semibold text-green-600",children:_.passed_records.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Failed"}),r.jsx("p",{className:"font-semibold text-red-600",children:_.failed_records.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Execution Time"}),r.jsxs("p",{className:"font-semibold text-slate-900",children:[_.execution_time_ms,"ms"]})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 text-xs text-slate-500",children:["Last run: ",v(_.last_run_at)]}),_.error_message&&r.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-700",children:_.error_message})})]})},_.id)})})]})]})})]})})}function Cg({children:t,metricName:e,targetTable:s,targetColumn:n,dataSource:a,className:i=""}){const[l,o]=C.useState(!1),[c,d]=C.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`relative group ${i}`,children:[t,r.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[r.jsx("button",{onClick:()=>d(!0),className:"p-1.5 bg-white/90 hover:bg-white rounded-lg shadow-md border border-slate-200 transition-all hover:scale-105",title:"View Data Quality Checks",children:r.jsx(cr,{className:"w-4 h-4 text-green-600"})}),r.jsx("button",{onClick:()=>o(!0),className:"p-1.5 bg-white/90 hover:bg-white rounded-lg shadow-md border border-slate-200 transition-all hover:scale-105",title:"View Data Lineage",children:r.jsx(sn,{className:"w-4 h-4 text-blue-600"})})]})]}),l&&r.jsx(mm,{metricName:e,targetTable:s,targetColumn:n,onClose:()=>o(!1)}),c&&r.jsx(kg,{metricName:e,dataSource:a,onClose:()=>d(!1)})]})}function vd({onNavigate:t}={}){const{user:e}=ye(),[s,n]=C.useState({totalAssets:0,totalLiabilities:0,netLiquidity:0,lcrRatio:null,lcrSurplus:null,nsfrRatio:null,nsfrSurplus:null,tier1Ratio:null,rcapRatio:null,rcapSurplus:null,rcenRatio:null,rlapRatio:null,rlapSurplus:null,rlenRatio:null,cashGap:0,bindingCashGapHorizon:"30-day",bindingStressScenario:"None",bindingStressLiquidity:null,intradayPeak:0,bindingEveScenario:"None",bindingEveChange:null,niiChangePercent:null,dataQualityScore:0}),[a,i]=C.useState(!0),[l,o]=C.useState(!1),[c,d]=C.useState(!1);C.useEffect(()=>{u()},[e]);const u=async()=>{var Lo,Do,Oo,Io,$o,qo,Mo,Fo,Uo,Bo;if(!e)return;const[g,_,b,f,p,x,y,j,k]=await Promise.all([R.from("accounts").select("*").eq("user_id",e.id).eq("is_active",!0),R.from("transactions").select("*").eq("user_id",e.id).order("transaction_date",{ascending:!1}).limit(100),R.from("lcr_metrics").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(1).maybeSingle(),R.from("nsfr_metrics").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(1).maybeSingle(),R.from("balance_sheet_metrics").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(1).maybeSingle(),R.from("interest_rate_risk_metrics").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(1).maybeSingle(),R.from("resolution_liquidity_metrics").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(1).maybeSingle(),R.from("liquidity_stress_tests").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(10),R.from("interest_rate_risk_metrics").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(10)]),N=g.data||[],w=_.data||[],T=N.filter(fe=>["checking","savings","investment"].includes(fe.account_type)).reduce((fe,Ie)=>fe+Ie.current_balance,0),P=N.filter(fe=>["credit","loan"].includes(fe.account_type)).reduce((fe,Ie)=>fe+Math.abs(Ie.current_balance),0),D=w.filter(fe=>fe.amount>0).reduce((fe,Ie)=>fe+Ie.amount,0),Y=w.filter(fe=>fe.amount<0).reduce((fe,Ie)=>fe+Math.abs(Ie.amount),0),S=D-Y,U="30-day",B=T*.15,ze=b.data?b.data.total_hqla-b.data.total_net_cash_outflows:null,Oe=f.data?f.data.available_stable_funding-f.data.required_stable_funding:null,A=((Lo=y.data)==null?void 0:Lo.rcap_ratio)||null,O=((Do=y.data)==null?void 0:Do.rcap_surplus_deficit)||null,q=((Oo=y.data)==null?void 0:Oo.rcen_ratio)||null,X=((Io=y.data)==null?void 0:Io.rlap_ratio)||null,ne=(($o=y.data)==null?void 0:$o.rlap_surplus_deficit)||null,bs=((qo=y.data)==null?void 0:qo.rlen_ratio)||null,lt=j.data||[];let ws="None",ot=null;if(lt.length>0){const Ie=[...lt].sort((Ba,za)=>Ba.stressed_liquidity-za.stressed_liquidity)[0];ws=Ie.scenario_type==="30_day_short_term"?"30-day":"1-year",ot=Ie.stressed_liquidity}const ts=k.data||[];let To="None",Po=null;if(ts.length>0){const Ie=[...ts].sort((Ba,za)=>Math.abs(za.eve_change_percent)-Math.abs(Ba.eve_change_percent))[0];To=Ie.scenario_type||"Unknown",Po=Ie.eve_change_percent}const pm=((Mo=x.data)==null?void 0:Mo.nii_change_percent)||null,Ao=[N.length>0,w.length>0,b.data!==null,f.data!==null,p.data!==null],xm=Ao.filter(Boolean).length/Ao.length*100,gm=N.length>0||b.data||f.data||p.data;d(gm),n({totalAssets:T,totalLiabilities:P,netLiquidity:T-P,lcrRatio:((Fo=b.data)==null?void 0:Fo.lcr_ratio)||null,lcrSurplus:ze,nsfrRatio:((Uo=f.data)==null?void 0:Uo.nsfr_ratio)||null,nsfrSurplus:Oe,tier1Ratio:((Bo=p.data)==null?void 0:Bo.tier1_capital_ratio)||null,rcapRatio:A,rcapSurplus:O,rcenRatio:q,rlapRatio:X,rlapSurplus:ne,rlenRatio:bs,cashGap:S,bindingCashGapHorizon:U,bindingStressScenario:ws,bindingStressLiquidity:ot,intradayPeak:B,bindingEveScenario:To,bindingEveChange:Po,niiChangePercent:pm,dataQualityScore:xm}),i(!1)},m=async()=>{if(e){o(!0);try{const[g,_]=await Promise.all([hm(e.id),Sg(e.id)]);g.success&&_.success?(await u(),alert("All sample data loaded successfully!")):(console.error("Seed errors:",{dashboardResult:g,regulatoryResult:_}),alert("Error loading data. Check console for details."))}catch(g){console.error("Error seeding data:",g),alert("Error loading data. Check console for details.")}o(!1)}},h=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(g),v=g=>g===null?"N/A":`${(g*100).toFixed(2)}%`;return a?r.jsx("div",{className:"text-slate-600",children:"Loading dashboard..."}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:r.jsx(om,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Executive Dashboard"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Comprehensive liquidity and regulatory overview"})]})]}),r.jsxs("button",{onClick:m,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 shadow-sm",title:"Load or refresh sample data",children:[r.jsx(we,{className:"w-4 h-4"}),l?"Refreshing...":"Refresh Data"]})]}),!c&&!a&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(we,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"No Data Found"}),r.jsx("p",{className:"text-sm text-slate-600",children:'Click "Refresh Data" above to load State Street Corporation sample data and populate all dashboard metrics with institutional-grade information.'})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsxs("button",{onClick:()=>t==null?void 0:t("balance-sheet"),className:"bg-white rounded-xl shadow-sm p-6 border-2 border-slate-200 hover:border-blue-500 hover:shadow-md transition-all text-left",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(rm,{className:"w-5 h-5 text-blue-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Balance Sheet"})]}),r.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-3",children:"Balance Sheet & IRRBB"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Total Assets"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:h(s.totalAssets)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Total Equity"}),r.jsx("span",{className:"text-sm font-semibold text-green-600",children:h(s.netLiquidity)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs text-slate-600",children:["Binding EVE (",s.bindingEveScenario,")"]}),r.jsx("span",{className:`text-sm font-semibold ${s.bindingEveChange&&s.bindingEveChange<0?"text-red-600":"text-slate-900"}`,children:s.bindingEveChange!==null?v(s.bindingEveChange):"N/A"})]}),r.jsx("div",{className:"pt-2 border-t border-slate-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-medium text-slate-700",children:"NII Change"}),r.jsx("span",{className:`text-sm font-bold ${s.niiChangePercent&&s.niiChangePercent>=0?"text-green-600":"text-red-600"}`,children:s.niiChangePercent!==null?v(s.niiChangePercent):"N/A"})]})})]})]}),r.jsxs("button",{onClick:()=>t==null?void 0:t("capital-metrics"),className:`rounded-xl shadow-sm p-6 border-2 hover:shadow-md transition-all text-left ${s.tier1Ratio&&s.tier1Ratio>=.08&&s.rcapSurplus&&s.rcapSurplus>=0?"bg-green-50 border-green-300 hover:border-green-500":"bg-amber-50 border-amber-300 hover:border-amber-500"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(cm,{className:"w-5 h-5 text-blue-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Capital Metrics"})]}),r.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Regulatory & Resolution Capital"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Tier 1 Ratio"}),r.jsx("span",{className:`text-sm font-semibold ${s.tier1Ratio&&s.tier1Ratio>=.08?"text-green-600":"text-amber-600"}`,children:s.tier1Ratio!==null?v(s.tier1Ratio):"N/A"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"RCAP Surplus"}),r.jsx("span",{className:`text-sm font-semibold ${s.rcapSurplus&&s.rcapSurplus>=0?"text-green-600":"text-red-600"}`,children:s.rcapSurplus!==null?h(s.rcapSurplus):"N/A"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"RCEN"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:s.rcenRatio!==null?v(s.rcenRatio):"N/A"})]}),r.jsx("div",{className:"pt-2 border-t border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-2",children:[s.tier1Ratio&&s.tier1Ratio>=.08&&s.rcapSurplus&&s.rcapSurplus>=0?r.jsx(z,{className:"w-4 h-4 text-green-600"}):r.jsx(he,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-xs font-medium text-slate-700",children:s.tier1Ratio&&s.tier1Ratio>=.08&&s.rcapSurplus&&s.rcapSurplus>=0?"Well Capitalized":"Monitor"})]})})]})]}),r.jsx(Cg,{metricName:"Liquidity Coverage Ratio (LCR)",targetTable:"lcr_metrics",targetColumn:"lcr_ratio",dataSource:"Analytics",children:r.jsxs("button",{onClick:()=>t==null?void 0:t("liquidity-metrics"),className:`rounded-xl shadow-sm p-6 border-2 hover:shadow-md transition-all text-left w-full ${s.lcrRatio&&s.lcrRatio>=1&&s.nsfrRatio&&s.nsfrRatio>=1&&s.rlapSurplus&&s.rlapSurplus>=0?"bg-green-50 border-green-300 hover:border-green-500":"bg-amber-50 border-amber-300 hover:border-amber-500"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(lm,{className:"w-5 h-5 text-blue-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Liquidity Metrics"})]}),r.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Regulatory & Resolution Liquidity"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"LCR"}),r.jsx("span",{className:`text-sm font-semibold ${s.lcrRatio&&s.lcrRatio>=1?"text-green-600":"text-red-600"}`,children:s.lcrRatio!==null?v(s.lcrRatio):"N/A"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"NSFR"}),r.jsx("span",{className:`text-sm font-semibold ${s.nsfrRatio&&s.nsfrRatio>=1?"text-green-600":"text-red-600"}`,children:s.nsfrRatio!==null?v(s.nsfrRatio):"N/A"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"RLAP Surplus"}),r.jsx("span",{className:`text-sm font-semibold ${s.rlapSurplus&&s.rlapSurplus>=0?"text-green-600":"text-red-600"}`,children:s.rlapSurplus!==null?h(s.rlapSurplus):"N/A"})]}),r.jsx("div",{className:"pt-2 border-t border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-2",children:[s.lcrRatio&&s.lcrRatio>=1&&s.nsfrRatio&&s.nsfrRatio>=1?r.jsx(z,{className:"w-4 h-4 text-green-600"}):r.jsx(he,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-xs font-medium text-slate-700",children:s.lcrRatio&&s.lcrRatio>=1&&s.nsfrRatio&&s.nsfrRatio>=1?"Compliant":"Monitor"})]})})]})]})}),r.jsxs("button",{onClick:()=>t==null?void 0:t("cash-flow"),className:"bg-white rounded-xl shadow-sm p-6 border-2 border-slate-200 hover:border-green-500 hover:shadow-md transition-all text-left",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(cr,{className:"w-5 h-5 text-green-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Cash Flows"})]}),r.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-3",children:"Cash Flow Analysis"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Cash Gap (30-day)"}),r.jsx("span",{className:`text-sm font-semibold ${s.cashGap>=0?"text-green-600":"text-red-600"}`,children:h(s.cashGap)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Net Liquidity (Point-in-Time)"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:h(s.netLiquidity)})]}),r.jsx("div",{className:"pt-2 border-t border-slate-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Binding Gap Horizon"}),r.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:s.bindingCashGapHorizon})]})})]})]}),r.jsxs("button",{onClick:()=>t==null?void 0:t("intraday-liquidity"),className:"bg-white rounded-xl shadow-sm p-6 border-2 border-slate-200 hover:border-purple-500 hover:shadow-md transition-all text-left",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(en,{className:"w-5 h-5 text-purple-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Intraday"})]}),r.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-3",children:"Intraday Liquidity"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Peak Requirement"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:h(s.intradayPeak)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Available"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:h(s.totalAssets)})]}),r.jsx("div",{className:"pt-2 border-t border-slate-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Coverage"}),r.jsx("span",{className:"text-base font-bold text-green-600",children:s.totalAssets>0?`${(s.totalAssets/(s.intradayPeak||1)*100).toFixed(0)}%`:"N/A"})]})})]})]}),r.jsxs("button",{onClick:()=>t==null?void 0:t("fr2052a"),className:"bg-white rounded-xl shadow-sm p-6 border-2 border-slate-200 hover:border-blue-500 hover:shadow-md transition-all text-left",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Gt,{className:"w-5 h-5 text-blue-600"})}),r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Regulatory Reporting"})]}),r.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-3",children:"FR 2052a"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Report Status"}),r.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Current"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Last Submission"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Today"})]}),r.jsx("div",{className:"pt-2 border-t border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(z,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Quality Validated"})]})})]})]}),r.jsxs("button",{onClick:()=>t==null?void 0:t("data-quality"),className:"bg-white rounded-xl shadow-sm p-6 border-2 border-slate-200 hover:border-emerald-500 hover:shadow-md transition-all text-left md:col-span-2 lg:col-span-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:r.jsx(we,{className:"w-5 h-5 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-slate-900",children:"Data Quality Assessment"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Coverage across all data sources - Click for details"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-3xl font-bold text-slate-900",children:[s.dataQualityScore.toFixed(0),"%"]}),r.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Overall Score"})]})]}),r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3 mb-4",children:r.jsx("div",{className:`h-3 rounded-full transition-all ${s.dataQualityScore>=80?"bg-green-500":s.dataQualityScore>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s.dataQualityScore}%`}})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mx-auto mb-2 ${s.totalAssets>0?"bg-green-500":"bg-slate-300"}`}),r.jsx("p",{className:"text-xs text-slate-600",children:"Accounts"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mx-auto mb-2 ${s.cashGap!==0?"bg-green-500":"bg-slate-300"}`}),r.jsx("p",{className:"text-xs text-slate-600",children:"Transactions"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mx-auto mb-2 ${s.lcrRatio!==null?"bg-green-500":"bg-slate-300"}`}),r.jsx("p",{className:"text-xs text-slate-600",children:"LCR Data"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mx-auto mb-2 ${s.nsfrRatio!==null?"bg-green-500":"bg-slate-300"}`}),r.jsx("p",{className:"text-xs text-slate-600",children:"NSFR Data"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mx-auto mb-2 ${s.tier1Ratio!==null?"bg-green-500":"bg-slate-300"}`}),r.jsx("p",{className:"text-xs text-slate-600",children:"Balance Sheet"})]})]})]})]})]})}function Eg(){const{user:t}=ye(),[e,s]=C.useState([]),[n,a]=C.useState(!0),[i,l]=C.useState(!1),[o,c]=C.useState(!1);C.useEffect(()=>{d()},[t]);const d=async()=>{if(!t)return;const{data:b,error:f}=await R.from("accounts").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});console.log("Accounts loaded:",{data:b,error:f}),b&&s(b),a(!1)},u=async()=>{if(t){l(!0);try{const b=await hm(t.id);b.success?(await d(),alert("Sample accounts loaded successfully!")):(console.error("Seed error:",b.error),alert("Error loading data. Check console for details."))}catch(b){console.error("Error seeding data:",b),alert("Error loading data. Check console for details.")}l(!1)}},m=b=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(b),h=b=>["checking","savings","investment"].includes(b)?r.jsx(Kt,{className:"w-5 h-5 text-green-600"}):r.jsx(El,{className:"w-5 h-5 text-red-600"}),v=b=>["checking","savings","investment"].includes(b)?"bg-green-50 border-green-200":"bg-red-50 border-red-200",g=e.filter(b=>["checking","savings","investment"].includes(b.account_type)).reduce((b,f)=>b+f.current_balance,0),_=e.filter(b=>["credit","loan"].includes(b.account_type)).reduce((b,f)=>b+Math.abs(f.current_balance),0);return n?r.jsx("div",{className:"text-slate-600",children:"Loading accounts..."}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-green-600 p-2 rounded-lg",children:r.jsx(Qn,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Accounts"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Manage your accounts and balances"})]})]}),r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[r.jsx(Ro,{className:"w-4 h-4"}),"Add Account"]})]}),e.length===0&&!n&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(we,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"No Accounts Found"}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Load sample accounts to get started with the liquidity management system."}),r.jsxs("button",{onClick:u,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[r.jsx(we,{className:"w-4 h-4"}),i?"Loading Data...":"Load Sample Accounts"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Kt,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Total Assets"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:m(g)})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:r.jsx(El,{className:"w-5 h-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Total Liabilities"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:m(_)})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Qn,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Active Accounts"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:e.length})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"All Accounts"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Account"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Institution"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Balance"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:e.map(b=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${v(b.account_type)}`,children:h(b.account_type)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900",children:b.name}),r.jsx("p",{className:"text-sm text-slate-500",children:b.currency})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800 capitalize",children:b.account_type})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:b.institution||"N/A"}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("p",{className:`font-semibold ${b.current_balance>=0?"text-green-600":"text-red-600"}`,children:m(b.current_balance)})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{className:"p-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(_g,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(dm,{className:"w-4 h-4"})})]})})]},b.id))})]})}),e.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Qn,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No accounts found. Create your first account to get started."})]})]}),o&&r.jsx(Rg,{onClose:()=>c(!1),onSuccess:()=>{c(!1),d()}})]})}function Rg({onClose:t,onSuccess:e}){const{user:s}=ye(),[n,a]=C.useState({name:"",account_type:"checking",currency:"USD",current_balance:0,institution:""}),[i,l]=C.useState(!1),o=async c=>{if(c.preventDefault(),!s)return;l(!0);const{error:d}=await R.from("accounts").insert([{...n,user_id:s.id,is_active:!0}]);if(l(!1),d){alert("Error creating account: "+d.message);return}e()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Add New Account"}),r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Account Name"}),r.jsx("input",{type:"text",value:n.name,onChange:c=>a({...n,name:c.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Operating Account"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Account Type"}),r.jsxs("select",{value:n.account_type,onChange:c=>a({...n,account_type:c.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"checking",children:"Checking"}),r.jsx("option",{value:"savings",children:"Savings"}),r.jsx("option",{value:"investment",children:"Investment"}),r.jsx("option",{value:"credit",children:"Credit"}),r.jsx("option",{value:"loan",children:"Loan"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Institution"}),r.jsx("input",{type:"text",value:n.institution,onChange:c=>a({...n,institution:c.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., State Street Bank"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Initial Balance"}),r.jsx("input",{type:"number",step:"0.01",value:n.current_balance,onChange:c=>a({...n,current_balance:parseFloat(c.target.value)}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:i?"Adding...":"Add Account"})]})]})]})})}function Tg(){const{user:t}=ye(),[e,s]=C.useState([]),[n,a]=C.useState([]),[i,l]=C.useState(!0),[o,c]=C.useState(!1),[d,u]=C.useState("all");C.useEffect(()=>{m()},[t]);const m=async()=>{var j,k;if(!t)return;const[x,y]=await Promise.all([R.from("transactions").select("*").eq("user_id",t.id).order("transaction_date",{ascending:!1}),R.from("accounts").select("id, name, account_type").eq("user_id",t.id)]);console.log("Transactions loaded:",{transactions:((j=x.data)==null?void 0:j.length)||0,accounts:((k=y.data)==null?void 0:k.length)||0}),x.data&&s(x.data),y.data&&a(y.data),l(!1)},h=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),v=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=x=>{const y=n.find(j=>j.id===x);return(y==null?void 0:y.name)||"Unknown Account"},_=d==="all"?e:e.filter(x=>d==="inflow"?x.amount>0:x.amount<0),b=e.filter(x=>x.amount>0).reduce((x,y)=>x+y.amount,0),f=e.filter(x=>x.amount<0).reduce((x,y)=>x+Math.abs(y.amount),0),p=b-f;return i?r.jsx("div",{className:"text-slate-600",children:"Loading transactions..."}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:r.jsx(Wn,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Transactions"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Track all account transactions"})]})]}),r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[r.jsx(Ro,{className:"w-4 h-4"}),"Add Transaction"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(xd,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Total Inflow"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:h(b)})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:r.jsx(pd,{className:"w-5 h-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Total Outflow"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:h(f)})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${p>=0?"bg-green-100":"bg-red-100"}`,children:r.jsx(Wn,{className:`w-5 h-5 ${p>=0?"text-green-600":"text-red-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Net Cash Flow"}),r.jsx("p",{className:`text-2xl font-bold ${p>=0?"text-green-600":"text-red-600"}`,children:h(p)})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"All Transactions"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yg,{className:"w-4 h-4 text-slate-600"}),r.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"px-3 py-1.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Transactions"}),r.jsx("option",{value:"inflow",children:"Inflows Only"}),r.jsx("option",{value:"outflow",children:"Outflows Only"})]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Account"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Amount"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:_.map(x=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:v(x.transaction_date)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${x.amount>0?"bg-green-100":"bg-red-100"}`,children:x.amount>0?r.jsx(xd,{className:"w-4 h-4 text-green-600"}):r.jsx(pd,{className:"w-4 h-4 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900",children:x.description}),r.jsx("p",{className:"text-xs text-slate-500",children:x.transaction_type})]})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:g(x.account_id)}),r.jsx("td",{className:"px-6 py-4",children:x.category&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:x.category})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("p",{className:`font-semibold ${x.amount>=0?"text-green-600":"text-red-600"}`,children:h(x.amount)})})]},x.id))})]})}),_.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Wn,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No transactions found."})]})]}),o&&r.jsx(Pg,{accounts:n,onClose:()=>c(!1),onSuccess:()=>{c(!1),m()}})]})}function Pg({accounts:t,onClose:e,onSuccess:s}){var d;const{user:n}=ye(),[a,i]=C.useState({account_id:((d=t[0])==null?void 0:d.id)||"",description:"",amount:0,transaction_type:"credit",category:"",transaction_date:new Date().toISOString().split("T")[0]}),[l,o]=C.useState(!1),c=async u=>{if(u.preventDefault(),!n)return;o(!0);const{error:m}=await R.from("transactions").insert([{...a,user_id:n.id}]);if(o(!1),m){alert("Error creating transaction: "+m.message);return}s()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Add New Transaction"}),r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Account"}),r.jsx("select",{value:a.account_id,onChange:u=>i({...a,account_id:u.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:t.map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),r.jsx("input",{type:"text",value:a.description,onChange:u=>i({...a,description:u.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Client Service Fees"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Amount"}),r.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:u=>i({...a,amount:parseFloat(u.target.value)}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Use negative for expenses"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Type"}),r.jsxs("select",{value:a.transaction_type,onChange:u=>i({...a,transaction_type:u.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"credit",children:"Credit"}),r.jsx("option",{value:"debit",children:"Debit"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Category"}),r.jsx("input",{type:"text",value:a.category,onChange:u=>i({...a,category:u.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Revenue, Operations"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Date"}),r.jsx("input",{type:"date",value:a.transaction_date,onChange:u=>i({...a,transaction_date:u.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:l?"Adding...":"Add Transaction"})]})]})]})})}function Ag(){const{user:t}=ye(),[e,s]=C.useState([]),[n,a]=C.useState(!0),[i,l]=C.useState(!1);C.useEffect(()=>{o()},[t]);const o=async()=>{if(!t)return;const{data:h}=await R.from("liquidity_reports").select("*").eq("user_id",t.id).order("report_date",{ascending:!1});h&&s(h),a(!1)},c=async(h,v)=>{if(!t)return;const{data:g}=await R.from("accounts").select("*").eq("user_id",t.id).eq("is_active",!0);if(!g)return;const _=g.filter(j=>["checking","savings","investment"].includes(j.account_type)).reduce((j,k)=>j+k.current_balance,0),b=g.filter(j=>["credit","loan"].includes(j.account_type)).reduce((j,k)=>j+Math.abs(k.current_balance),0),f=_-b,p=b>0?_/b:null,x=b>0?_*.9/b:null,{error:y}=await R.from("liquidity_reports").insert({user_id:t.id,report_type:h,total_assets:_,total_liabilities:b,net_liquidity:f,cash_ratio:p,quick_ratio:x,notes:v||null});y||(l(!1),o())},d=h=>{var f,p;const v=[["Liquidity Report"],["Date",new Date(h.report_date).toLocaleDateString()],["Type",h.report_type],[""],["Metric","Value"],["Total Assets",h.total_assets.toFixed(2)],["Total Liabilities",h.total_liabilities.toFixed(2)],["Net Liquidity",h.net_liquidity.toFixed(2)],["Cash Ratio",((f=h.cash_ratio)==null?void 0:f.toFixed(4))||"N/A"],["Quick Ratio",((p=h.quick_ratio)==null?void 0:p.toFixed(4))||"N/A"],[""],["Notes",h.notes||""]].map(x=>x.join(",")).join(`
`),g=new Blob([v],{type:"text/csv"}),_=window.URL.createObjectURL(g),b=document.createElement("a");b.href=_,b.download=`liquidity-report-${h.report_date}.csv`,b.click(),window.URL.revokeObjectURL(_)},u=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(h),m=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return n?r.jsx("div",{className:"text-slate-600",children:"Loading reports..."}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Gt,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Liquidity Reports"})]}),r.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Kt,{className:"w-4 h-4"}),"Generate Report"]})]}),e.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[r.jsx(Gt,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 mb-2",children:"No reports generated yet"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Generate your first liquidity report to track your financial position"})]}):r.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.map(h=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(nm,{className:"w-5 h-5 text-slate-500"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:m(h.report_date)})]}),r.jsxs("p",{className:"text-sm text-slate-600 capitalize",children:[h.report_type," Report"]})]}),r.jsxs("button",{onClick:()=>d(h),className:"flex items-center gap-2 px-3 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[r.jsx(im,{className:"w-4 h-4"}),"Export CSV"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Total Assets"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:u(h.total_assets)})]}),r.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[r.jsx("p",{className:"text-sm text-red-700 mb-1",children:"Total Liabilities"}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:u(h.total_liabilities)})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${h.net_liquidity>=0?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:[r.jsx("p",{className:`text-sm mb-1 ${h.net_liquidity>=0?"text-blue-700":"text-orange-700"}`,children:"Net Liquidity"}),r.jsx("p",{className:`text-2xl font-bold ${h.net_liquidity>=0?"text-blue-900":"text-orange-900"}`,children:u(h.net_liquidity)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Cash Ratio"}),r.jsx("p",{className:"text-xl font-semibold text-slate-900",children:h.cash_ratio?h.cash_ratio.toFixed(4):"N/A"})]}),r.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Quick Ratio"}),r.jsx("p",{className:"text-xl font-semibold text-slate-900",children:h.quick_ratio?h.quick_ratio.toFixed(4):"N/A"})]})]}),h.notes&&r.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Notes"}),r.jsx("p",{className:"text-slate-900",children:h.notes})]})]},h.id))}),i&&r.jsx(Lg,{onClose:()=>l(!1),onGenerate:c})]})}function Lg({onClose:t,onGenerate:e}){const[s,n]=C.useState("monthly"),[a,i]=C.useState(""),[l,o]=C.useState(!1),c=async d=>{d.preventDefault(),o(!0),await e(s,a),o(!1)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Generate Liquidity Report"}),r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Report Type"}),r.jsxs("select",{value:s,onChange:d=>n(d.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"quarterly",children:"Quarterly"}),r.jsx("option",{value:"annual",children:"Annual"}),r.jsx("option",{value:"custom",children:"Custom"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes (Optional)"}),r.jsx("textarea",{value:a,onChange:d=>i(d.target.value),rows:4,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Add any observations or context for this report..."})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:l?"Generating...":"Generate Report"})]})]})]})})}function Dg(){const[t,e]=C.useState([]),[s,n]=C.useState(!0),[a,i]=C.useState(null),[l,o]=C.useState(!1),[c,d]=C.useState({email:"",password:""}),[u,m]=C.useState(""),[h,v]=C.useState(""),[g,_]=C.useState(new Set);C.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:y,error:j}=await R.from("user_management").select("*").order("created_at",{ascending:!1});if(j)throw j;e(y||[])}catch(y){console.error("Error loading users:",y),m("Failed to load users")}finally{n(!1)}},f=async()=>{if(!c.email||!c.password){m("Email and password are required");return}try{const{error:y}=await R.from("user_management").insert([{email:c.email,password:c.password}]);if(y)throw y;v("User added successfully"),d({email:"",password:""}),o(!1),b(),setTimeout(()=>v(""),3e3)}catch(y){m(y.message||"Failed to add user"),setTimeout(()=>m(""),3e3)}},p=async y=>{if(!y.email){m("Email is required");return}try{const j={email:y.email};y.password&&(j.password=y.password);const{error:k}=await R.from("user_management").update(j).eq("id",y.id);if(k)throw k;v("User updated successfully"),i(null),b(),setTimeout(()=>v(""),3e3)}catch(j){m(j.message||"Failed to update user"),setTimeout(()=>m(""),3e3)}},x=async y=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:j}=await R.from("user_management").delete().eq("id",y);if(j)throw j;v("User deleted successfully"),b(),setTimeout(()=>v(""),3e3)}catch(j){m(j.message||"Failed to delete user"),setTimeout(()=>m(""),3e3)}};return s?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-slate-600",children:"Loading users..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(um,{className:"w-8 h-8 text-blue-600"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"User Management"})]}),r.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Ro,{className:"w-4 h-4"}),"Add User"]})]}),u&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}),h&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-700",children:h}),l&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Add New User"}),r.jsx("button",{onClick:()=>{o(!1),d({email:"",password:""})},className:"text-slate-400 hover:text-slate-600",children:r.jsx(Jt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:c.email,onChange:y=>d({...c,email:y.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),r.jsx("input",{type:"password",value:c.password,onChange:y=>d({...c,password:y.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password"})]}),r.jsx("button",{onClick:f,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add User"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Password"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created At"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(y=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"px-6 py-4",children:(a==null?void 0:a.id)===y.id?r.jsx("input",{type:"email",value:a.email,onChange:j=>i({...a,email:j.target.value}),className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("span",{className:"text-slate-900",children:y.email})}),r.jsx("td",{className:"px-6 py-4",children:(a==null?void 0:a.id)===y.id?r.jsx("input",{type:"password",value:a.password||"",onChange:j=>i({...a,password:j.target.value}),placeholder:"Enter new password (optional)",className:"w-full px-2 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-900 font-mono text-sm",children:g.has(y.id)?y.password:""}),r.jsx("button",{onClick:()=>{const j=new Set(g);g.has(y.id)?j.delete(y.id):j.add(y.id),_(j)},className:"text-slate-400 hover:text-slate-600 transition-colors",title:g.has(y.id)?"Hide password":"Show password",children:g.has(y.id)?r.jsx(pg,{className:"w-4 h-4"}):r.jsx(tn,{className:"w-4 h-4"})})]})}),r.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm",children:new Date(y.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 text-right",children:(a==null?void 0:a.id)===y.id?r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs("button",{onClick:()=>p(a),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:[r.jsx(bg,{className:"w-3 h-3"}),"Save"]}),r.jsxs("button",{onClick:()=>i(null),className:"flex items-center gap-1 px-3 py-1 bg-slate-200 text-slate-700 rounded hover:bg-slate-300 transition-colors text-sm",children:[r.jsx(Jt,{className:"w-3 h-3"}),"Cancel"]})]}):r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>i({...y,password:""}),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors text-sm",children:"Edit"}),r.jsxs("button",{onClick:()=>x(y.id),className:"flex items-center gap-1 px-3 py-1 text-red-600 hover:bg-red-50 rounded transition-colors text-sm",children:[r.jsx(dm,{className:"w-3 h-3"}),"Delete"]})]})})]},y.id))})]}),t.length===0&&r.jsx("div",{className:"text-center py-12 text-slate-500",children:"No users found. Add your first user to get started."})]})]})}function Ua({selectedEntityId:t,onEntityChange:e,showMaterialOnly:s=!1}){const{user:n}=ye(),[a,i]=C.useState([]),[l,o]=C.useState(!0),[c,d]=C.useState(!1);C.useEffect(()=>{u()},[n,s]);const u=async()=>{if(!n)return;let h=R.from("legal_entities").select("*").eq("user_id",n.id).order("entity_code");s&&(h=h.eq("is_material_entity",!0));const{data:v,error:g}=await h;v&&i(v),o(!1)},m=a.find(h=>h.id===t);return r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Legal Entity View"}),r.jsxs("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-between gap-3 px-4 py-2 bg-white border border-slate-300 rounded-lg hover:border-slate-400 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gd,{className:"w-4 h-4 text-slate-600"}),r.jsx("span",{className:"text-sm text-slate-900",children:m?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-semibold",children:m.entity_code}),m.is_material_entity&&r.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Material Entity"})]}):"Consolidated (All Entities)"})]}),r.jsx(am,{className:`w-4 h-4 text-slate-600 transition-transform ${c?"rotate-180":""}`})]}),c&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),r.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[r.jsx("button",{onClick:()=>{e(null),d(!1)},className:`w-full text-left px-4 py-3 hover:bg-slate-50 transition-colors border-b border-slate-100 ${t?"":"bg-blue-50"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gd,{className:"w-4 h-4 text-slate-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Consolidated View"}),r.jsx("p",{className:"text-xs text-slate-500",children:"All legal entities aggregated"})]})]})}),l?r.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Loading entities..."}):a.length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"No legal entities found"}):a.map(h=>r.jsx("button",{onClick:()=>{e(h.id),d(!1)},className:`w-full text-left px-4 py-3 hover:bg-slate-50 transition-colors ${t===h.id?"bg-blue-50":""}`,children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:h.entity_code}),h.is_material_entity&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Material Entity"})]}),r.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:h.entity_name}),r.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:[h.jurisdiction,"  ",h.entity_type]})]})})},h.id))]})]})]})}function fm({metricName:t,metricValue:e,targetTable:s,targetColumn:n,dataSource:a,onClose:i}){const{user:l}=ye(),[o,c]=C.useState(!0),[d,u]=C.useState("lineage"),[m,h]=C.useState([]),[v,g]=C.useState([]),[_,b]=C.useState([]),[f,p]=C.useState([]),[x,y]=C.useState(new Set),[j,k]=C.useState(null);C.useEffect(()=>{N()},[s,n]);const N=async()=>{if(l)try{const[S,U,B]=await Promise.all([R.from("data_quality_checks").select("*").eq("user_id",l.id).eq("data_source",a).order("last_run_at",{ascending:!1}).limit(10),R.from("data_feeds").select("*").eq("user_id",l.id).ilike("source_system",`%${a}%`).order("last_run_at",{ascending:!1}).limit(5),R.from("data_lineage").select("*").eq("user_id",l.id).eq("target_table",s).eq("target_column",n).order("dependency_level",{ascending:!0})]);if(S.error)throw S.error;if(U.error)throw U.error;if(B.error)throw B.error;h(S.data||[]),g(U.data||[]),b(B.data||[]);const ze=(B.data||[]).map(Oe=>({table:Oe.source_table,column:Oe.source_column,system:Oe.source_system,transformationType:Oe.transformation_type,transformationRule:Oe.transformation_rule,isCritical:Oe.is_critical,dependencyLevel:Oe.dependency_level}));p(ze)}catch(S){console.error("Error loading metric details:",S)}finally{c(!1)}},w=S=>S?new Date(S).toLocaleString():"Never",T=S=>S.total_records===0?0:(S.passed_records/S.total_records*100).toFixed(1),P=S=>{switch(S){case"direct":return"bg-green-100 text-green-700 border-green-300";case"calculated":return"bg-blue-100 text-blue-700 border-blue-300";case"aggregated":return"bg-purple-100 text-purple-700 border-purple-300";case"derived":return"bg-amber-100 text-amber-700 border-amber-300";default:return"bg-slate-100 text-slate-700 border-slate-300"}},D=S=>{k(S)},Y=S=>{y(U=>{const B=new Set(U);return B.has(S)?B.delete(S):B.add(S),B})};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:t}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsx("span",{className:"text-3xl font-bold text-white",children:e}),r.jsxs("span",{className:"px-3 py-1 bg-blue-500/50 rounded-full text-sm text-white",children:[s,".",n]})]})]}),r.jsx("button",{onClick:i,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",children:r.jsx(Jt,{className:"w-5 h-5 text-white"})})]}),r.jsx("div",{className:"flex gap-2 mt-4",children:["lineage","quality","feeds"].map(S=>r.jsxs("button",{onClick:()=>u(S),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${d===S?"bg-white text-blue-600":"bg-blue-500/30 text-white hover:bg-blue-500/50"}`,children:[S==="lineage"&&"Data Lineage",S==="quality"&&"Quality Checks",S==="feeds"&&"Data Feeds"]},S))})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6",children:o?r.jsx("div",{className:"text-center py-12 text-slate-600",children:"Loading metric details..."}):r.jsxs(r.Fragment,{children:[d==="lineage"&&r.jsx("div",{className:"space-y-6",children:f.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(sn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No predecessor data found"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Current Metric"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{className:"text-slate-700",children:[r.jsx("span",{className:"font-medium",children:"Table:"})," ",s]}),r.jsxs("p",{className:"text-slate-700",children:[r.jsx("span",{className:"font-medium",children:"Column:"})," ",n]}),r.jsxs("p",{className:"text-slate-700",children:[r.jsx("span",{className:"font-medium",children:"Value:"})," ",e]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Predecessor Data"}),r.jsx("div",{className:"space-y-3",children:f.map((S,U)=>{const B=`${S.table}.${S.column}`,ze=x.has(B);return r.jsx("div",{className:`border-2 rounded-lg overflow-hidden ${S.isCritical?"border-red-300 bg-red-50":"border-slate-200 bg-white"}`,children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("button",{onClick:()=>Y(B),className:"p-1 hover:bg-slate-100 rounded",children:ze?r.jsx(am,{className:"w-4 h-4 text-slate-600"}):r.jsx(mg,{className:"w-4 h-4 text-slate-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("span",{className:"font-semibold text-slate-900",children:[S.table,".",S.column]}),S.isCritical&&r.jsx("span",{className:"px-2 py-0.5 bg-red-600 text-white text-xs font-semibold rounded",children:"CRITICAL"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:S.system})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${P(S.transformationType)}`,children:S.transformationType.toUpperCase()}),r.jsx("button",{onClick:()=>D(S),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",title:"View details for this predecessor",children:r.jsx(tn,{className:"w-4 h-4 text-blue-600"})})]})]}),ze&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"TRANSFORMATION RULE"}),r.jsx("p",{className:"text-sm text-slate-700",children:S.transformationRule})]}),r.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:[r.jsx("span",{className:"font-medium",children:"Dependency Level:"})," ",S.dependencyLevel]})]})]})},U)})})]}),r.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:r.jsxs("p",{className:"text-sm text-slate-700",children:[r.jsx("strong",{children:"Note:"})," Click the ",r.jsx(tn,{className:"w-4 h-4 inline mx-1 text-blue-600"})," icon next to any predecessor to view its own data quality, feeds, and lineage information."]})})]})}),d==="quality"&&r.jsx("div",{className:"space-y-4",children:m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(z,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No quality checks configured"})]}):m.map(S=>{const U=T(S);return r.jsxs("div",{className:"bg-white rounded-lg border-2 border-slate-200 p-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 text-lg",children:S.check_name}),r.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold",children:S.check_type})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`text-3xl font-bold ${parseFloat(U)>=95?"text-green-600":parseFloat(U)>=80?"text-amber-600":"text-red-600"}`,children:[U,"%"]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Pass Rate"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:S.total_records.toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Total"})]}),r.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.passed_records.toLocaleString()}),r.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Passed"})]}),r.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.failed_records.toLocaleString()}),r.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Failed"})]}),r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:S.execution_time_ms}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"ms"})]})]}),r.jsxs("div",{className:"text-sm text-slate-500",children:["Last run: ",w(S.last_run_at)]}),S.error_message&&r.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-700",children:S.error_message})})]},S.id)})}),d==="feeds"&&r.jsx("div",{className:"space-y-4",children:v.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(we,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No data feeds configured"})]}):v.map(S=>r.jsxs("div",{className:"bg-white rounded-lg border-2 border-slate-200 p-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 text-lg",children:S.feed_name}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:S.source_system})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${S.status==="active"?"bg-green-100 text-green-700":S.status==="error"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:S.status.toUpperCase()}),S.is_stale&&r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-700",children:"STALE"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:S.records_loaded.toLocaleString()}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Records Loaded"})]}),r.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.error_count}),r.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Errors"})]}),r.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-sm font-bold text-slate-900",children:w(S.last_run_at)}),r.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Last Run"})]})]})]},S.id))})]})})]})}),j&&r.jsx(fm,{metricName:`${j.table}.${j.column}`,metricValue:"Predecessor Data",targetTable:j.table,targetColumn:j.column,dataSource:j.system,onClose:()=>k(null)})]})}function ue({value:t,metricName:e,targetTable:s,targetColumn:n,dataSource:a,className:i=""}){const[l,o]=C.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx("span",{className:i,children:t}),r.jsx("button",{onClick:c=>{c.stopPropagation(),o(!0)},className:"flex-shrink-0 p-1 hover:bg-blue-100 rounded transition-colors",title:"View data quality, feeds, and lineage",children:r.jsx(tn,{className:"w-4 h-4 text-blue-600 hover:text-blue-700"})})]}),l&&r.jsx(fm,{metricName:e,metricValue:t,targetTable:s,targetColumn:n,dataSource:a,onClose:()=>o(!1)})]})}function Og({onNavigate:t}){const{user:e}=ye(),[s,n]=C.useState([]),[a,i]=C.useState([]),[l,o]=C.useState(!0),[c,d]=C.useState(null);C.useEffect(()=>{u()},[e,c]);const u=async()=>{if(!e)return;let b=R.from("balance_sheet_metrics").select("*").eq("user_id",e.id),f=R.from("interest_rate_risk_metrics").select("*").eq("user_id",e.id);c&&(b=b.eq("legal_entity_id",c),f=f.eq("legal_entity_id",c));const[p,x]=await Promise.all([b.order("report_date",{ascending:!1}).limit(10),f.order("report_date",{ascending:!1}).limit(10)]);p.data&&n(p.data),x.data&&i(x.data),o(!1)},m=b=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(b),h=b=>`${(b*100).toFixed(2)}%`,v=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=s[0],_=a[0];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("button",{onClick:()=>t==null?void 0:t("dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(hn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Balance Sheet & Interest Rate Risk"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Comprehensive balance sheet composition and IRRBB analysis"})]}),r.jsx("div",{className:"w-80",children:r.jsx(Ua,{selectedEntityId:c,onEntityChange:d})})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(it,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"About This Metric"}),r.jsx("p",{className:"text-sm text-slate-700 mb-4",children:"Balance sheet metrics provide a comprehensive view of an institution's financial position, assets, liabilities, and equity composition. Interest Rate Risk in the Banking Book (IRRBB) measures potential impacts on economic value of equity (EVE) and net interest income (NII) from interest rate changes."}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 mb-1",children:"Regulatory Requirements:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-700 ml-2",children:[r.jsx("li",{children:"Basel III capital requirements: Tier 1 capital ratio minimum of 6%"}),r.jsx("li",{children:"Leverage ratio minimum of 3% (5% for US G-SIBs)"}),r.jsx("li",{children:"IRRBB standards require institutions to measure and control interest rate risk"}),r.jsx("li",{children:"Supervisory outlier test: EVE decline > 15% of Tier 1 capital triggers enhanced monitoring"})]})]}),r.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[r.jsx("p",{className:"font-medium text-slate-900 mb-2",children:"Regulatory Resources:"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("a",{href:"https://www.bis.org/bcbs/publ/d368.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Basel Committee - Interest Rate Risk in the Banking Book (IRRBB)"})]}),r.jsxs("a",{href:"https://www.federalreserve.gov/supervisionreg/topics/capital.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Federal Reserve - Capital Requirements"})]})]})]})]})]})]})}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(it,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm text-amber-900",children:[r.jsx("strong",{children:"Data Source:"})," Representative sample data based on State Street Corporation's publicly available financial reports. Balance sheet figures are modeled on ",r.jsx("a",{href:"https://investors.statestreet.com/financial-information/quarterly-results/default.aspx",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-amber-700",children:"Q3 2024 10-Q filing"}),". IRRBB metrics represent typical institutional risk sensitivities and are not sourced from actual State Street disclosures."]})})]})}),l?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-slate-600",children:"Loading metrics..."})}):r.jsxs(r.Fragment,{children:[g&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Latest Balance Sheet (",v(g.report_date),")"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Assets"}),r.jsx(ue,{value:m(g.total_assets),metricName:"Total Assets",targetTable:"balance_sheet_metrics",targetColumn:"total_assets",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Liabilities"}),r.jsx(ue,{value:m(g.total_liabilities),metricName:"Total Liabilities",targetTable:"balance_sheet_metrics",targetColumn:"total_liabilities",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Equity"}),r.jsx(ue,{value:m(g.total_equity),metricName:"Total Equity",targetTable:"balance_sheet_metrics",targetColumn:"total_equity",dataSource:"Analytics",className:"text-2xl font-bold text-green-600"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Tier 1 Capital"}),r.jsx(ue,{value:m(g.tier1_capital),metricName:"Tier 1 Capital",targetTable:"balance_sheet_metrics",targetColumn:"tier1_capital",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Tier 1 Capital Ratio"}),r.jsx(ue,{value:h(g.tier1_capital_ratio),metricName:"Tier 1 Capital Ratio",targetTable:"balance_sheet_metrics",targetColumn:"tier1_capital_ratio",dataSource:"Analytics",className:`text-2xl font-bold ${g.tier1_capital_ratio>=.06?"text-green-600":"text-red-600"}`}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Minimum: 6%"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Leverage Ratio"}),r.jsx(ue,{value:h(g.leverage_ratio),metricName:"Leverage Ratio",targetTable:"balance_sheet_metrics",targetColumn:"leverage_ratio",dataSource:"Analytics",className:`text-2xl font-bold ${g.leverage_ratio>=.05?"text-green-600":"text-amber-600"}`}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"US G-SIB Minimum: 5%"})]})]})]}),_&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Interest Rate Risk Scenario: ",_.scenario_type]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"EVE Change"}),r.jsx(ue,{value:h(_.eve_change_percent),metricName:"Economic Value of Equity (EVE) Change",targetTable:"interest_rate_risk_metrics",targetColumn:"eve_change_percent",dataSource:"Analytics",className:`text-2xl font-bold ${_.eve_change_percent<-.15?"text-red-600":_.eve_change_percent<0?"text-amber-600":"text-green-600"}`}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:m(_.eve_change_amount)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"NII Change"}),r.jsx(ue,{value:h(_.nii_change_percent),metricName:"Net Interest Income (NII) Change",targetTable:"interest_rate_risk_metrics",targetColumn:"nii_change_percent",dataSource:"Analytics",className:`text-2xl font-bold ${_.nii_change_percent>=0?"text-green-600":"text-red-600"}`}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:m(_.nii_change_amount)})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Historical Trends"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Date"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Total Assets"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Total Equity"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Tier 1 Ratio"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Leverage Ratio"})]})}),r.jsx("tbody",{children:s.map(b=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:v(b.report_date)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:m(b.total_assets)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-green-600",children:m(b.total_equity)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:h(b.tier1_capital_ratio)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:h(b.leverage_ratio)})]},b.id))})]})})]})]})]})}function Ig({onNavigate:t}){const{user:e}=ye(),[s,n]=C.useState([]),[a,i]=C.useState([]),[l,o]=C.useState([]),[c,d]=C.useState([]),[u,m]=C.useState(!0),[h,v]=C.useState("lcr"),[g,_]=C.useState(null);C.useEffect(()=>{b()},[e,g]);const b=async()=>{if(!e)return;let N=R.from("lcr_metrics").select("*").eq("user_id",e.id),w=R.from("nsfr_metrics").select("*").eq("user_id",e.id),T=R.from("liquidity_stress_tests").select("*").eq("user_id",e.id),P=R.from("resolution_liquidity_metrics").select("*").eq("user_id",e.id);g&&(N=N.eq("legal_entity_id",g),w=w.eq("legal_entity_id",g),T=T.eq("legal_entity_id",g),P=P.eq("legal_entity_id",g));const[D,Y,S,U]=await Promise.all([N.order("report_date",{ascending:!1}).limit(10),w.order("report_date",{ascending:!1}).limit(10),T.order("report_date",{ascending:!1}).limit(10),P.order("report_date",{ascending:!1}).limit(10)]);D.data&&n(D.data),Y.data&&i(Y.data),S.data&&o(S.data),U.data&&d(U.data),m(!1)},f=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(N),p=N=>`${(N*100).toFixed(2)}%`,x=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),y=s[0],j=a[0],k=l[0];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("button",{onClick:()=>t==null?void 0:t("dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(hn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Liquidity Coverage & Stress Testing"}),r.jsx("p",{className:"text-sm text-slate-600",children:"LCR, NSFR, resolution liquidity, and stress test analysis"})]}),r.jsx("div",{className:"w-80",children:r.jsx(Ua,{selectedEntityId:g,onEntityChange:_})})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(it,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"About These Metrics"}),r.jsx("p",{className:"text-sm text-slate-700 mb-4",children:"The Liquidity Coverage Ratio (LCR) and Net Stable Funding Ratio (NSFR) are Basel III regulatory metrics designed to ensure banks maintain adequate liquidity. Resolution liquidity metrics (RLAP/RLEN) ensure adequate liquidity for orderly resolution. Stress testing evaluates liquidity resilience under adverse scenarios."}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 mb-1",children:"Regulatory Requirements:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-700 ml-2",children:[r.jsx("li",{children:"LCR minimum requirement: 100% (HQLA must cover 30-day stressed net cash outflows)"}),r.jsx("li",{children:"NSFR minimum requirement: 100% (available stable funding must exceed required stable funding)"}),r.jsx("li",{children:"US G-SIBs face enhanced liquidity requirements and supervisory stress testing"}),r.jsx("li",{children:"Daily LCR reporting required for Category I and II banking organizations"}),r.jsx("li",{children:"RLAP (Resolution Liquidity Adequacy Position): Liquidity available in resolution"}),r.jsx("li",{children:"RLEN (Resolution Liquidity Execution Need): Liquidity needed for resolution execution"}),r.jsx("li",{children:"Internal stress testing must cover multiple scenarios including institution-specific and market-wide stresses"})]})]}),r.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[r.jsx("p",{className:"font-medium text-slate-900 mb-2",children:"Regulatory Resources:"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("a",{href:"https://www.bis.org/publ/bcbs238.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Basel III: The Liquidity Coverage Ratio (BCBS 238)"})]}),r.jsxs("a",{href:"https://www.bis.org/bcbs/publ/d295.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Basel III: The Net Stable Funding Ratio (BCBS 295)"})]}),r.jsxs("a",{href:"https://www.federalreserve.gov/supervisionreg/topics/liquidity_coverage_ratio.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Federal Reserve - Liquidity Coverage Ratio Rule"})]})]})]})]})]})]})}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(it,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm text-amber-900",children:[r.jsx("strong",{children:"Data Source:"})," Representative sample data modeled on typical institutional liquidity metrics. While State Street Corporation publicly discloses LCR ratios in their ",r.jsx("a",{href:"https://investors.statestreet.com/financial-information/quarterly-results/default.aspx",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-amber-700",children:"quarterly filings"}),", the detailed component breakdowns and stress test results shown here are representative data for demonstration purposes."]})})]})}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{onClick:()=>v("lcr"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h==="lcr"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"LCR Metrics"}),r.jsx("button",{onClick:()=>v("nsfr"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h==="nsfr"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"NSFR Metrics"}),r.jsx("button",{onClick:()=>v("stress"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h==="stress"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Stress Tests"}),r.jsx("button",{onClick:()=>v("resolution"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h==="resolution"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Resolution Liquidity"})]}),u?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-slate-600",children:"Loading metrics..."})}):r.jsxs(r.Fragment,{children:[h==="lcr"&&r.jsxs("div",{className:"space-y-6",children:[y&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Latest LCR (",x(y.report_date),")"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"LCR Ratio"}),r.jsx(ue,{value:p(y.lcr_ratio),metricName:"Liquidity Coverage Ratio (LCR)",targetTable:"lcr_metrics",targetColumn:"lcr_ratio",dataSource:"Analytics",className:`text-2xl font-bold ${y.lcr_ratio>=1?"text-green-600":"text-red-600"}`}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[y.is_compliant?r.jsx(z,{className:"w-4 h-4 text-green-600"}):r.jsx(he,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{className:`text-xs ${y.is_compliant?"text-green-600":"text-red-600"}`,children:y.is_compliant?"Compliant":"Non-Compliant"})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Minimum: 100%"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total HQLA"}),r.jsx(ue,{value:f(y.total_hqla),metricName:"Total High-Quality Liquid Assets (HQLA)",targetTable:"lcr_metrics",targetColumn:"total_hqla",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"High-Quality Liquid Assets"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Net Cash Outflows (30d)"}),r.jsx(ue,{value:f(y.total_net_cash_outflows),metricName:"Total Net Cash Outflows (30-day)",targetTable:"lcr_metrics",targetColumn:"total_net_cash_outflows",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Stressed scenario"})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"LCR Formula & Components"}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 mb-4",children:[r.jsx("p",{className:"text-center text-lg mb-2",children:r.jsx("span",{className:"font-mono font-semibold",children:"LCR = (Total HQLA / Total Net Cash Outflows)  100"})}),r.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("p",{children:[" ",r.jsx("strong",{children:"HQLA"}),": Level 1 (100%) + Level 2A (85%) + Level 2B (50%)"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Net Cash Outflows"}),": Expected outflows - Min(Expected inflows, 75% of outflows)"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Time Horizon"}),": 30-day stressed scenario"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Minimum Requirement"}),": 100% (Category II institutions)"]})]})]}),y&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"HQLA Breakdown"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Level 1 (100%)"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(y.hqla_level_1)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Level 2A (85%)"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(y.hqla_level_2a)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Level 2B (50%)"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(y.hqla_level_2b)})]}),r.jsxs("div",{className:"flex justify-between pt-2 border-t border-slate-200",children:[r.jsx("span",{className:"text-slate-700 font-medium",children:"Total HQLA"}),r.jsx("span",{className:"font-bold text-blue-600",children:f(y.total_hqla)})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"HQLA Level 1 Examples"}),r.jsxs("ul",{className:"text-xs text-slate-600 space-y-1",children:[r.jsx("li",{children:" Central bank reserves"}),r.jsx("li",{children:" US Treasury securities"}),r.jsx("li",{children:" Cash"}),r.jsx("li",{children:" Claims on sovereigns (0% risk weight)"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"Net Cash Outflow Factors"}),r.jsxs("ul",{className:"text-xs text-slate-600 space-y-1",children:[r.jsx("li",{children:" Retail deposits: 3-10% run-off"}),r.jsx("li",{children:" Wholesale deposits: 25-100% run-off"}),r.jsx("li",{children:" Secured funding: 0-100% run-off"}),r.jsx("li",{children:" Committed facilities: 10-100% draw-down"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Historical LCR Trends"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Date"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"LCR Ratio"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"HQLA"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Net Outflows"}),r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Status"})]})}),r.jsx("tbody",{children:s.map(N=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:x(N.report_date)}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${N.lcr_ratio>=1?"text-green-600":"text-red-600"}`,children:p(N.lcr_ratio)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:f(N.total_hqla)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:f(N.total_net_cash_outflows)}),r.jsx("td",{className:"py-3 px-4 text-center",children:N.is_compliant?r.jsx(z,{className:"w-5 h-5 text-green-600 mx-auto"}):r.jsx(he,{className:"w-5 h-5 text-red-600 mx-auto"})})]},N.id))})]})})]})]}),h==="nsfr"&&r.jsxs("div",{className:"space-y-6",children:[j&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Latest NSFR (",x(j.report_date),")"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"NSFR Ratio"}),r.jsx(ue,{value:p(j.nsfr_ratio),metricName:"Net Stable Funding Ratio (NSFR)",targetTable:"nsfr_metrics",targetColumn:"nsfr_ratio",dataSource:"Analytics",className:`text-2xl font-bold ${j.nsfr_ratio>=1?"text-green-600":"text-red-600"}`}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[j.is_compliant?r.jsx(z,{className:"w-4 h-4 text-green-600"}):r.jsx(he,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{className:`text-xs ${j.is_compliant?"text-green-600":"text-red-600"}`,children:j.is_compliant?"Compliant":"Non-Compliant"})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Minimum: 100%"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Available Stable Funding"}),r.jsx(ue,{value:f(j.available_stable_funding),metricName:"Available Stable Funding (ASF)",targetTable:"nsfr_metrics",targetColumn:"available_stable_funding",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"ASF"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Required Stable Funding"}),r.jsx(ue,{value:f(j.required_stable_funding),metricName:"Required Stable Funding (RSF)",targetTable:"nsfr_metrics",targetColumn:"required_stable_funding",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"RSF"})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"NSFR Formula & Components"}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 mb-4",children:[r.jsx("p",{className:"text-center text-lg mb-2",children:r.jsx("span",{className:"font-mono font-semibold",children:"NSFR = (Available Stable Funding / Required Stable Funding)  100"})}),r.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("p",{children:[" ",r.jsx("strong",{children:"ASF"}),": Stable funding from capital, deposits, and long-term borrowings"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"RSF"}),": Stability of assets and off-balance sheet exposures"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Time Horizon"}),": One year stressed scenario"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"Minimum Requirement"}),": 100% (Category II institutions)"]})]})]}),j&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"ASF Breakdown"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Retail Deposits"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(j.retail_deposits)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Wholesale Funding"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(j.wholesale_funding)})]}),r.jsxs("div",{className:"flex justify-between pt-2 border-t border-slate-200",children:[r.jsx("span",{className:"text-slate-700 font-medium",children:"Total ASF"}),r.jsx("span",{className:"font-bold text-blue-600",children:f(j.available_stable_funding)})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"ASF Factors"}),r.jsxs("ul",{className:"text-xs text-slate-600 space-y-1",children:[r.jsx("li",{children:" Capital: 100%"}),r.jsx("li",{children:" Stable retail deposits: 95%"}),r.jsx("li",{children:" Less stable retail deposits: 90%"}),r.jsx("li",{children:" Wholesale deposits: 50%"}),r.jsx("li",{children:" Operational deposits: 50%"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"RSF Factors"}),r.jsxs("ul",{className:"text-xs text-slate-600 space-y-1",children:[r.jsx("li",{children:" Cash and HQLA Level 1: 0%"}),r.jsx("li",{children:" HQLA Level 2A: 15%"}),r.jsx("li",{children:" HQLA Level 2B: 50%"}),r.jsx("li",{children:" Loans to financial institutions: 85%"}),r.jsx("li",{children:" Retail/SME loans: 85%"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Historical NSFR Trends"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Date"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"NSFR Ratio"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"ASF"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"RSF"}),r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Status"})]})}),r.jsx("tbody",{children:a.map(N=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:x(N.report_date)}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${N.nsfr_ratio>=1?"text-green-600":"text-red-600"}`,children:p(N.nsfr_ratio)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:f(N.available_stable_funding)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:f(N.required_stable_funding)}),r.jsx("td",{className:"py-3 px-4 text-center",children:N.is_compliant?r.jsx(z,{className:"w-5 h-5 text-green-600 mx-auto"}):r.jsx(he,{className:"w-5 h-5 text-red-600 mx-auto"})})]},N.id))})]})})]})]}),h==="stress"&&r.jsxs("div",{className:"space-y-6",children:[k&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Latest Stress Test: ",k.scenario_name," (",x(k.report_date),")"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Baseline Liquidity"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:f(k.baseline_liquidity)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Stressed Liquidity"}),r.jsx("p",{className:"text-2xl font-bold text-amber-600",children:f(k.stressed_liquidity)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Liquidity Shortfall"}),r.jsx("p",{className:`text-2xl font-bold ${k.liquidity_shortfall>0?"text-red-600":"text-green-600"}`,children:f(Math.abs(k.liquidity_shortfall))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Survival Days"}),r.jsx("p",{className:`text-2xl font-bold ${k.survival_days>=30?"text-green-600":"text-red-600"}`,children:k.survival_days}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[k.passes_internal_threshold?r.jsx(z,{className:"w-4 h-4 text-green-600"}):r.jsx(he,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{className:`text-xs ${k.passes_internal_threshold?"text-green-600":"text-red-600"}`,children:k.passes_internal_threshold?"Passes":"Fails"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Stress Test History"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Date"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Scenario"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Baseline"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Stressed"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Shortfall"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Days"}),r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Result"})]})}),r.jsx("tbody",{children:l.map(N=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:x(N.report_date)}),r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:N.scenario_name}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:f(N.baseline_liquidity)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-amber-600",children:f(N.stressed_liquidity)}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${N.liquidity_shortfall>0?"text-red-600":"text-green-600"}`,children:f(Math.abs(N.liquidity_shortfall))}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${N.survival_days>=30?"text-green-600":"text-red-600"}`,children:N.survival_days}),r.jsx("td",{className:"py-3 px-4 text-center",children:N.passes_internal_threshold?r.jsx(z,{className:"w-5 h-5 text-green-600 mx-auto"}):r.jsx(he,{className:"w-5 h-5 text-red-600 mx-auto"})})]},N.id))})]})})]})]}),h==="resolution"&&r.jsxs("div",{className:"space-y-6",children:[c[0]&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Resolution Liquidity Metrics (",x(c[0].report_date),")"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`rounded-xl p-6 border-2 ${c[0].rlap_surplus_deficit>=0?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"RLAP"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Resolution Liquidity Adequacy Position"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-3xl font-bold ${c[0].rlap_surplus_deficit>=0?"text-green-700":"text-red-700"}`,children:p(c[0].rlap_ratio)}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Amount"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(c[0].rlap_amount)})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Requirement"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(c[0].rlap_requirement)})]}),r.jsxs("div",{className:"flex justify-between text-xs pt-2 border-t border-slate-300",children:[r.jsx("span",{className:"text-slate-700 font-medium",children:"Surplus/Deficit"}),r.jsx("span",{className:`font-bold ${c[0].rlap_surplus_deficit>=0?"text-green-700":"text-red-700"}`,children:f(c[0].rlap_surplus_deficit)})]})]})]})]}),r.jsxs("div",{className:"rounded-xl p-6 border-2 bg-blue-50 border-blue-300",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"RLEN"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Resolution Liquidity Execution Need"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-blue-700",children:p(c[0].rlen_ratio)}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Amount Needed"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(c[0].rlen_amount)})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Requirement"}),r.jsx("span",{className:"font-semibold text-slate-900",children:f(c[0].rlen_requirement)})]})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Resolution Liquidity Trends"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Date"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"RLAP"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"RLAP Surplus"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"RLEN"}),r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Status"})]})}),r.jsx("tbody",{children:c.map(N=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:x(N.report_date)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:f(N.rlap_amount)}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${N.rlap_surplus_deficit>=0?"text-green-600":"text-red-600"}`,children:f(N.rlap_surplus_deficit)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:f(N.rlen_amount)}),r.jsx("td",{className:"py-3 px-4 text-center",children:N.is_compliant?r.jsx(z,{className:"w-5 h-5 text-green-600 mx-auto"}):r.jsx(he,{className:"w-5 h-5 text-red-600 mx-auto"})})]},N.id))})]})})]})]})]})]})]})}function $g({onNavigate:t}){const{user:e}=ye(),[s,n]=C.useState([]),[a,i]=C.useState([]),[l,o]=C.useState(!0),[c,d]=C.useState("regulatory"),[u,m]=C.useState(null);C.useEffect(()=>{h()},[e,u]);const h=async()=>{if(!e)return;let p=R.from("balance_sheet_metrics").select("*").eq("user_id",e.id),x=R.from("resolution_liquidity_metrics").select("*").eq("user_id",e.id);u&&(p=p.eq("legal_entity_id",u),x=x.eq("legal_entity_id",u));const[y,j]=await Promise.all([p.order("report_date",{ascending:!1}).limit(10),x.order("report_date",{ascending:!1}).limit(10)]);y.data&&n(y.data),j.data&&i(j.data),o(!1)},v=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(p),g=p=>`${(p*100).toFixed(2)}%`,_=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=s[0],f=a[0];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("button",{onClick:()=>t==null?void 0:t("dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(hn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Capital Adequacy & Requirements"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Regulatory capital, internal targets, and resolution capital metrics"})]}),r.jsx("div",{className:"w-80",children:r.jsx(Ua,{selectedEntityId:u,onEntityChange:m})})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(it,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"About These Metrics"}),r.jsx("p",{className:"text-sm text-slate-700 mb-4",children:"Capital metrics measure an institution's financial strength and ability to absorb losses. Regulatory capital ensures compliance with Basel III requirements, while resolution capital metrics (RCAP/RCEN) ensure adequate resources for orderly resolution."}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 mb-1",children:"Key Capital Metrics:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-700 ml-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Tier 1 Capital Ratio:"})," Minimum 6% under Basel III (higher for G-SIBs with buffers)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Leverage Ratio:"})," Minimum 3% (5% for US G-SIBs)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"RCAP (Resolution Capital Adequacy Position):"})," Capital available for recapitalization in resolution"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"RCEN (Resolution Capital Execution Need):"})," Capital needed to execute resolution strategy"]})]})]}),r.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[r.jsx("p",{className:"font-medium text-slate-900 mb-2",children:"Regulatory Resources:"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("a",{href:"https://www.bis.org/bcbs/publ/d424.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Basel III: Finalising Post-Crisis Reforms"})]}),r.jsxs("a",{href:"https://www.federalreserve.gov/supervisionreg/topics/capital.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Federal Reserve - Capital Requirements"})]})]})]})]})]})]})}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(it,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm text-amber-900",children:[r.jsx("strong",{children:"Data Source:"})," Regulatory capital ratios are based on State Street Corporation's ",r.jsx("a",{href:"https://investors.statestreet.com/financial-information/quarterly-results/default.aspx",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-amber-700",children:"publicly disclosed quarterly reports"}),". Resolution capital metrics (RCAP/RCEN) are representative data for demonstration purposes."]})})]})}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{onClick:()=>d("regulatory"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c==="regulatory"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Regulatory Capital"}),r.jsx("button",{onClick:()=>d("internal"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c==="internal"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Internal Targets"}),r.jsx("button",{onClick:()=>d("resolution"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c==="resolution"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Resolution Capital (RCAP/RCEN)"})]}),l?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-slate-600",children:"Loading capital metrics..."})}):r.jsxs(r.Fragment,{children:[c==="regulatory"&&b&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Latest Regulatory Capital (",_(b.report_date),")"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Tier 1 Capital"}),r.jsx(ue,{value:v(b.tier1_capital),metricName:"Tier 1 Capital",targetTable:"balance_sheet_metrics",targetColumn:"tier1_capital",dataSource:"Analytics",className:"text-2xl font-bold text-slate-900"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Common equity + Additional Tier 1"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Tier 1 Capital Ratio"}),r.jsx(ue,{value:g(b.tier1_capital_ratio),metricName:"Tier 1 Capital Ratio",targetTable:"balance_sheet_metrics",targetColumn:"tier1_capital_ratio",dataSource:"Analytics",className:`text-2xl font-bold ${b.tier1_capital_ratio>=.06?"text-green-600":"text-red-600"}`}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Minimum: 6.0% (Basel III)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Leverage Ratio"}),r.jsx(ue,{value:g(b.leverage_ratio),metricName:"Leverage Ratio",targetTable:"balance_sheet_metrics",targetColumn:"leverage_ratio",dataSource:"Analytics",className:`text-2xl font-bold ${b.leverage_ratio>=.05?"text-green-600":"text-amber-600"}`}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"US G-SIB Minimum: 5.0%"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Historical Trends"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Date"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Tier 1 Capital"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Tier 1 Ratio"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"Leverage Ratio"})]})}),r.jsx("tbody",{children:s.map(p=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:_(p.report_date)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:v(p.tier1_capital)}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${p.tier1_capital_ratio>=.06?"text-green-600":"text-red-600"}`,children:g(p.tier1_capital_ratio)}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${p.leverage_ratio>=.05?"text-green-600":"text-amber-600"}`,children:g(p.leverage_ratio)})]},p.id))})]})})]})]}),c==="internal"&&b&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Internal Capital Targets"}),r.jsx("p",{className:"text-sm text-slate-700 mb-4",children:"In addition to regulatory minimums, institutions maintain internal capital targets that exceed regulatory requirements to provide buffers for stress scenarios and business growth."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Internal Tier 1 Target"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"8.5%"}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Current: ",g(b.tier1_capital_ratio)]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Internal Leverage Target"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"6.0%"}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Current: ",g(b.leverage_ratio)]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Capital Buffer Analysis"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Tier 1 Capital Buffer"}),r.jsx("span",{className:"text-sm font-semibold text-green-600",children:g(b.tier1_capital_ratio-.06)})]}),r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:r.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${Math.min((b.tier1_capital_ratio-.06)/.04*100,100)}%`}})}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Above regulatory minimum of 6%"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Leverage Ratio Buffer"}),r.jsx("span",{className:"text-sm font-semibold text-green-600",children:g(b.leverage_ratio-.05)})]}),r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:r.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${Math.min((b.leverage_ratio-.05)/.02*100,100)}%`}})}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Above G-SIB minimum of 5%"})]})]})]})]}),c==="resolution"&&f&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Resolution Capital Metrics (",_(f.report_date),")"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`rounded-xl p-6 border-2 ${f.rcap_surplus_deficit>=0?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"RCAP"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Resolution Capital Adequacy Position"})]}),r.jsxs("div",{children:[r.jsx(ue,{value:g(f.rcap_ratio),metricName:"Resolution Capital Adequacy Position (RCAP) Ratio",targetTable:"resolution_capital_metrics",targetColumn:"rcap_ratio",dataSource:"Analytics",className:`text-3xl font-bold ${f.rcap_surplus_deficit>=0?"text-green-700":"text-red-700"}`}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Amount"}),r.jsx("span",{className:"font-semibold text-slate-900",children:v(f.rcap_amount)})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Requirement"}),r.jsx("span",{className:"font-semibold text-slate-900",children:v(f.rcap_requirement)})]}),r.jsxs("div",{className:"flex justify-between text-xs pt-2 border-t border-slate-300",children:[r.jsx("span",{className:"text-slate-700 font-medium",children:"Surplus/Deficit"}),r.jsx("span",{className:`font-bold ${f.rcap_surplus_deficit>=0?"text-green-700":"text-red-700"}`,children:v(f.rcap_surplus_deficit)})]})]})]})]}),r.jsxs("div",{className:"rounded-xl p-6 border-2 bg-blue-50 border-blue-300",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"RCEN"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Resolution Capital Execution Need"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-blue-700",children:g(f.rcen_ratio)}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Amount Needed"}),r.jsx("span",{className:"font-semibold text-slate-900",children:v(f.rcen_amount)})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Requirement"}),r.jsx("span",{className:"font-semibold text-slate-900",children:v(f.rcen_requirement)})]})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Resolution Capital Trends"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-700",children:"Date"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"RCAP"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"RCAP Surplus"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-700",children:"RCEN"}),r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-700",children:"Status"})]})}),r.jsx("tbody",{children:a.map(p=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:_(p.report_date)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:v(p.rcap_amount)}),r.jsx("td",{className:`py-3 px-4 text-sm text-right font-semibold ${p.rcap_surplus_deficit>=0?"text-green-600":"text-red-600"}`,children:v(p.rcap_surplus_deficit)}),r.jsx("td",{className:"py-3 px-4 text-sm text-right text-slate-900",children:v(p.rcen_amount)}),r.jsx("td",{className:"py-3 px-4 text-center",children:p.is_compliant?r.jsx(z,{className:"w-5 h-5 text-green-600 mx-auto"}):r.jsx(he,{className:"w-5 h-5 text-red-600 mx-auto"})})]},p.id))})]})})]})]})]})]})]})}function qg({onNavigate:t}){const{user:e}=ye(),[s,n]=C.useState([]),[a,i]=C.useState(!0),[l,o]=C.useState("30d"),[c,d]=C.useState("all");C.useEffect(()=>{u()},[e,l,c]);const u=async()=>{if(e)try{const p={"7d":7,"30d":30,"90d":90,"1y":365}[l],x=new Date;x.setDate(x.getDate()-p);const{data:y,error:j}=await R.from("transactions").select("*").eq("user_id",e.id).gte("transaction_date",x.toISOString()).order("transaction_date",{ascending:!0});if(j)throw console.error("Error fetching transactions:",j),j;console.log("Loaded transactions:",y==null?void 0:y.length);const k=new Map;y==null||y.forEach(T=>{const P=new Date(T.transaction_date).toLocaleDateString();k.has(P)||k.set(P,{inflows:0,outflows:0});const D=k.get(P);T.amount>0?D.inflows+=T.amount:D.outflows+=Math.abs(T.amount)});let N=0;const w=Array.from(k.entries()).map(([T,P])=>{const D=P.inflows-P.outflows;return N+=D,{date:T,inflows:P.inflows,outflows:P.outflows,netFlow:D,cumulativeBalance:N}});console.log("Cash flow data points:",w.length),n(w)}catch(f){console.error("Error loading cash flow data:",f)}finally{i(!1)}},m=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(f),h=s.reduce((f,p)=>f+p.inflows,0),v=s.reduce((f,p)=>f+p.outflows,0),g=h-v,_=s.length>0?h/s.length:0,b=s.length>0?v/s.length:0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("button",{onClick:()=>t==null?void 0:t("dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(hn,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Cash Flow Analysis"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Comprehensive cash flow monitoring and projections"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(it,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"About This Metric"}),r.jsx("p",{className:"text-sm text-slate-700 mb-4",children:"Cash flow analysis tracks operational inflows and outflows to monitor liquidity generation and consumption patterns. Understanding cash flow dynamics is essential for liquidity risk management and operational planning."}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 mb-1",children:"Key Insights:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-700 ml-2",children:[r.jsx("li",{children:"Monitor operational cash generation and identify trends"}),r.jsx("li",{children:"Detect periods of cash flow stress or surplus"}),r.jsx("li",{children:"Support short-term liquidity forecasting"}),r.jsx("li",{children:"Identify seasonal patterns and business cycle impacts"})]})]}),r.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[r.jsx("p",{className:"font-medium text-slate-900 mb-2",children:"Related Regulatory Requirements:"}),r.jsx("div",{className:"space-y-1",children:r.jsxs("a",{href:"https://www.federalreserve.gov/supervisionreg/srletters/sr1317a1.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Federal Reserve SR 13-17: Liquidity Risk Management"})]})})]})]})]})]})}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(it,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm text-amber-900",children:[r.jsx("strong",{children:"Data Source:"})," Representative sample transaction data generated for demonstration purposes. Data patterns are modeled on typical institutional banking transaction flows but are not sourced from actual State Street Corporation filings."]})})]})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nm,{className:"w-5 h-5 text-slate-600"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Period:"}),r.jsx("div",{className:"flex gap-2",children:["7d","30d","90d","1y"].map(f=>r.jsx("button",{onClick:()=>o(f),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${l===f?"bg-green-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:f==="1y"?"1 Year":f.toUpperCase()},f))})]}),r.jsx(Ua,{selectedEntity:c,onEntityChange:d})]}),a?r.jsx("div",{className:"text-center py-12 text-slate-600",children:"Loading cash flow data..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Kt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-sm font-medium text-green-700",children:"Total Inflows"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:m(h)}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Avg: ",m(_),"/day"]})]}),r.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(El,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{className:"text-sm font-medium text-red-700",children:"Total Outflows"})]}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:m(v)}),r.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Avg: ",m(b),"/day"]})]}),r.jsxs("div",{className:`rounded-xl p-4 border ${g>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(fg,{className:`w-4 h-4 ${g>=0?"text-green-600":"text-red-600"}`}),r.jsx("span",{className:`text-sm font-medium ${g>=0?"text-green-700":"text-red-700"}`,children:"Net Cash Flow"})]}),r.jsx("p",{className:`text-2xl font-bold ${g>=0?"text-green-900":"text-red-900"}`,children:m(g)}),r.jsx("p",{className:`text-xs mt-1 ${g>=0?"text-green-600":"text-red-600"}`,children:g>=0?"Positive":"Negative"})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(cr,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Data Points"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.length}),r.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Days with activity"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:r.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Daily Cash Flow Details"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Inflows"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Outflows"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Net Flow"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Cumulative Balance"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:s.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-500",children:"No cash flow data available for the selected period"})}):s.map((f,p)=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-slate-900",children:f.date}),r.jsx("td",{className:"px-6 py-4 text-sm text-right font-semibold text-green-600",children:m(f.inflows)}),r.jsx("td",{className:"px-6 py-4 text-sm text-right font-semibold text-red-600",children:m(f.outflows)}),r.jsx("td",{className:`px-6 py-4 text-sm text-right font-semibold ${f.netFlow>=0?"text-green-600":"text-red-600"}`,children:m(f.netFlow)}),r.jsx("td",{className:`px-6 py-4 text-sm text-right font-bold ${f.cumulativeBalance>=0?"text-blue-900":"text-red-900"}`,children:m(f.cumulativeBalance)})]},p))})]})})]})]})]})]})}function Mg({onNavigate:t}){const{user:e}=ye(),[s,n]=C.useState([]),[a,i]=C.useState(!0),[l,o]=C.useState({peakRequirement:0,totalAvailable:0,averageCoverage:0,minCoverage:0});C.useEffect(()=>{c()},[e]);const c=async()=>{if(e)try{const{data:h,error:v}=await R.from("accounts").select("*").eq("user_id",e.id).eq("is_active",!0);if(v)throw console.error("Error fetching accounts:",v),v;console.log("Loaded accounts:",h==null?void 0:h.length);const g=(h==null?void 0:h.filter(y=>["checking","savings","investment"].includes(y.account_type)).reduce((y,j)=>y+j.current_balance,0))||0;console.log("Total assets for intraday:",g);const _=["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00"],b=_.map((y,j)=>{const k=j/(_.length-1),N=g*(.1+Math.sin(k*Math.PI)*.08),w=N*1.2,T=g-N*.5,P=T/w*100;return{time:y,availableLiquidity:T,requiredLiquidity:w,peakUsage:N,coverage:P}}),f=Math.max(...b.map(y=>y.requiredLiquidity)),p=b.reduce((y,j)=>y+j.coverage,0)/b.length,x=Math.min(...b.map(y=>y.coverage));console.log("Intraday positions calculated:",b.length),n(b),o({peakRequirement:f,totalAvailable:g,averageCoverage:p,minCoverage:x})}catch(h){console.error("Error loading intraday data:",h)}finally{i(!1)}},d=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(h),u=h=>h>=120?"text-green-600":h>=100?"text-yellow-600":"text-red-600",m=h=>h>=120?"bg-green-50 border-green-200":h>=100?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("button",{onClick:()=>t==null?void 0:t("dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(hn,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Intraday Liquidity Monitoring"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Real-time liquidity positions throughout the business day"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(it,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"About This Metric"}),r.jsx("p",{className:"text-sm text-slate-700 mb-4",children:"Intraday liquidity monitoring tracks an institution's ability to meet payment and settlement obligations throughout the business day, including obligations to Financial Market Utilities (FMUs) and payment systems. This metric is critical for operational resilience, systemic risk management, and compliance with regulatory expectations."}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 mb-1",children:"Key Financial Market Utilities (FMUs):"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-700 ml-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Fedwire:"})," Federal Reserve's real-time gross settlement system"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"CHIPS:"})," Clearing House Interbank Payments System for large-value USD payments"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"DTC:"})," Depository Trust Company for securities custody and settlement"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"NSCC:"})," National Securities Clearing Corporation for equity and debt clearing"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"FICC:"})," Fixed Income Clearing Corporation for government securities"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"CLS Bank:"})," Continuous Linked Settlement for FX transactions"]})]})]}),r.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[r.jsx("p",{className:"font-medium text-slate-900 mb-1",children:"Regulatory Requirements:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-700 ml-2",children:[r.jsx("li",{children:"BCBS 248: Monitoring tools for intraday liquidity management"}),r.jsx("li",{children:"Federal Reserve requires real-time payment system monitoring and daylight overdraft management"}),r.jsx("li",{children:"Institutions must identify and monitor peak intraday liquidity usage across all FMUs"}),r.jsx("li",{children:"Daily monitoring of maximum daylight overdraft and time-specific net debit positions"}),r.jsx("li",{children:"Stress testing of intraday liquidity positions including FMU access disruptions"})]})]}),r.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[r.jsx("p",{className:"font-medium text-slate-900 mb-2",children:"Regulatory Resources:"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("a",{href:"https://www.bis.org/publ/bcbs248.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"BCBS 248 - Monitoring Tools for Intraday Liquidity Management"})]}),r.jsxs("a",{href:"https://www.federalreserve.gov/paymentsystems/psr_about.htm",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"Federal Reserve - Payment System Risk Policy"})]})]})]})]})]})]})}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(it,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm text-amber-900",children:[r.jsx("strong",{children:"Data Source:"})," Representative calculated positions based on account balances. Intraday positions are simulated using typical institutional payment patterns and are not sourced from actual State Street Corporation real-time payment data."]})})]})}),r.jsx("div",{children:a?r.jsx("div",{className:"text-center py-12 text-slate-600",children:"Loading intraday liquidity data..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 border border-purple-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Kt,{className:"w-4 h-4 text-purple-600"}),r.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Peak Requirement"})]}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d(l.peakRequirement)}),r.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Highest intraday need"})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(cr,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Total Available"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:d(l.totalAvailable)}),r.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Available liquidity"})]}),r.jsxs("div",{className:`rounded-xl p-4 border ${m(l.averageCoverage)}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(z,{className:`w-4 h-4 ${u(l.averageCoverage)}`}),r.jsx("span",{className:`text-sm font-medium ${u(l.averageCoverage)}`,children:"Avg Coverage"})]}),r.jsxs("p",{className:`text-2xl font-bold ${u(l.averageCoverage)}`,children:[l.averageCoverage.toFixed(0),"%"]}),r.jsx("p",{className:`text-xs mt-1 ${u(l.averageCoverage)}`,children:l.averageCoverage>=120?"Strong":l.averageCoverage>=100?"Adequate":"Weak"})]}),r.jsxs("div",{className:`rounded-xl p-4 border ${m(l.minCoverage)}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ni,{className:`w-4 h-4 ${u(l.minCoverage)}`}),r.jsx("span",{className:`text-sm font-medium ${u(l.minCoverage)}`,children:"Min Coverage"})]}),r.jsxs("p",{className:`text-2xl font-bold ${u(l.minCoverage)}`,children:[l.minCoverage.toFixed(0),"%"]}),r.jsx("p",{className:`text-xs mt-1 ${u(l.minCoverage)}`,children:"Lowest point"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden mb-6",children:[r.jsx("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200",children:r.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Hourly Intraday Position"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Time"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Available"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Required"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Peak Usage"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Coverage"}),r.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:s.map((h,v)=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:h.time}),r.jsx("td",{className:"px-6 py-4 text-sm text-right font-semibold text-blue-600",children:d(h.availableLiquidity)}),r.jsx("td",{className:"px-6 py-4 text-sm text-right font-semibold text-slate-600",children:d(h.requiredLiquidity)}),r.jsx("td",{className:"px-6 py-4 text-sm text-right font-semibold text-purple-600",children:d(h.peakUsage)}),r.jsxs("td",{className:`px-6 py-4 text-sm text-right font-bold ${u(h.coverage)}`,children:[h.coverage.toFixed(1),"%"]}),r.jsx("td",{className:"px-6 py-4 text-center",children:h.coverage>=120?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium",children:[r.jsx(z,{className:"w-3 h-3"}),"Strong"]}):h.coverage>=100?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-medium",children:[r.jsx(Ni,{className:"w-3 h-3"}),"Adequate"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[r.jsx(Ni,{className:"w-3 h-3"}),"Weak"]})})]},v))})]})})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Key Insights"}),r.jsxs("ul",{className:"space-y-2 text-sm text-slate-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 mt-1.5"}),r.jsx("span",{children:"Intraday liquidity is monitored hourly to ensure sufficient funds for payment obligations"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 mt-1.5"}),r.jsx("span",{children:"Coverage above 120% indicates strong liquidity buffer throughout the day"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 mt-1.5"}),r.jsx("span",{children:"Peak usage typically occurs mid-day during high transaction volumes"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 mt-1.5"}),r.jsx("span",{children:"Minimum coverage should remain above 100% to meet regulatory expectations"})]})]})]})]})})]})}function Fg({onClose:t}){const{user:e}=ye(),[s,n]=C.useState([]),[a,i]=C.useState([]),[l,o]=C.useState([]),[c,d]=C.useState(!0),[u,m]=C.useState(!1),[h,v]=C.useState("overview"),[g,_]=C.useState(null);C.useEffect(()=>{b()},[e]);const b=async()=>{if(e)try{const[S,U,B]=await Promise.all([R.from("data_quality_checks").select("*").eq("user_id",e.id).order("last_run_at",{ascending:!1}),R.from("data_feeds").select("*").eq("user_id",e.id).order("last_run_at",{ascending:!1}),R.from("data_lineage").select("*").eq("user_id",e.id).order("dependency_level",{ascending:!0}).limit(50)]);S.data&&n(S.data),U.data&&i(U.data),B.data&&o(B.data)}catch(S){console.error("Error loading data:",S)}finally{d(!1)}},f=async()=>{m(!0),await b(),setTimeout(()=>m(!1),500)},p=s.filter(S=>S.status==="passed").length,x=s.filter(S=>S.status==="failed").length,y=s.filter(S=>S.status==="warning").length,j=s.length>0?p/s.length*100:0,k=a.filter(S=>S.status==="active").length,N=a.filter(S=>S.status==="error").length,w=a.filter(S=>S.is_stale).length,T=l.filter(S=>S.is_critical).length,P=a.reduce((S,U)=>S+U.records_loaded,0),D=S=>S?new Date(S).toLocaleString():"Never",Y=l.reduce((S,U)=>{const B=`${U.target_table}.${U.target_column}`;return S[B]||(S[B]=[]),S[B].push(U),S},{});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-40 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-7xl w-full max-h-[95vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(we,{className:"w-6 h-6 text-white"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Data Quality Dashboard"}),r.jsx("p",{className:"text-sm text-blue-100 mt-0.5",children:"Monitoring data feeds, quality checks, and lineage"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:f,disabled:u,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors disabled:opacity-50",children:r.jsx(yd,{className:`w-5 h-5 text-white ${u?"animate-spin":""}`})}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-blue-500 rounded-lg transition-colors",children:r.jsx(Jt,{className:"w-5 h-5 text-white"})})]})]}),r.jsx("div",{className:"border-b border-slate-200 bg-white px-6",children:r.jsx("div",{className:"flex gap-1",children:["overview","checks","feeds","lineage"].map(S=>r.jsx("button",{onClick:()=>v(S),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${h===S?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300"}`,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})}),r.jsx("div",{className:"flex-1 overflow-auto",children:c?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsxs("div",{className:"text-center",children:[r.jsx(yd,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-600",children:"Loading data quality metrics..."})]})}):r.jsxs("div",{className:"p-6",children:[h==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx(z,{className:"w-8 h-8 text-green-600"}),r.jsxs("span",{className:"text-3xl font-bold text-green-900",children:[j.toFixed(0),"%"]})]}),r.jsx("p",{className:"text-sm font-medium text-green-900",children:"Data Quality Score"}),r.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[p," of ",s.length," checks passed"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx(we,{className:"w-8 h-8 text-blue-600"}),r.jsx("span",{className:"text-3xl font-bold text-blue-900",children:a.length})]}),r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Active Data Feeds"}),r.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:[k," running, ",w," stale"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx(sn,{className:"w-8 h-8 text-purple-600"}),r.jsx("span",{className:"text-3xl font-bold text-purple-900",children:l.length})]}),r.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Lineage Mappings"}),r.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:[T," critical paths"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-5 border border-amber-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx(cr,{className:"w-8 h-8 text-amber-600"}),r.jsxs("span",{className:"text-3xl font-bold text-amber-900",children:[(P/1e6).toFixed(1),"M"]})]}),r.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Records Processed"}),r.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Across all feeds"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Quality Check Status"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(z,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"font-medium text-slate-900",children:"Passed"})]}),r.jsx("span",{className:"text-2xl font-bold text-green-600",children:p})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(he,{className:"w-5 h-5 text-amber-600"}),r.jsx("span",{className:"font-medium text-slate-900",children:"Warnings"})]}),r.jsx("span",{className:"text-2xl font-bold text-amber-600",children:y})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(rr,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:"font-medium text-slate-900",children:"Failed"})]}),r.jsx("span",{className:"text-2xl font-bold text-red-600",children:x})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Feed Health"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(z,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"font-medium text-slate-900",children:"Active"})]}),r.jsx("span",{className:"text-2xl font-bold text-green-600",children:k})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(en,{className:"w-5 h-5 text-amber-600"}),r.jsx("span",{className:"font-medium text-slate-900",children:"Stale"})]}),r.jsx("span",{className:"text-2xl font-bold text-amber-600",children:w})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(rr,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:"font-medium text-slate-900",children:"Errors"})]}),r.jsx("span",{className:"text-2xl font-bold text-red-600",children:N})]})]})]})]})]}),h==="checks"&&r.jsx("div",{className:"space-y-4",children:s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(z,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No quality checks configured"})]}):s.map(S=>{const U=S.total_records>0?(S.passed_records/S.total_records*100).toFixed(1):"0";return r.jsxs("div",{className:"bg-white rounded-lg border-2 border-slate-200 p-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 text-lg",children:S.check_name}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold",children:S.check_type}),r.jsx("span",{className:"text-sm text-slate-600",children:S.data_source})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`text-3xl font-bold ${parseFloat(U)>=95?"text-green-600":parseFloat(U)>=80?"text-amber-600":"text-red-600"}`,children:[U,"%"]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Pass Rate"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:S.total_records.toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Total"})]}),r.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.passed_records.toLocaleString()}),r.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Passed"})]}),r.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.failed_records.toLocaleString()}),r.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Failed"})]}),r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:S.execution_time_ms}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"ms"})]})]}),r.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[r.jsx(en,{className:"w-4 h-4"}),"Last run: ",D(S.last_run_at)]})]},S.id)})}),h==="feeds"&&r.jsx("div",{className:"space-y-4",children:a.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(we,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No data feeds configured"})]}):a.map(S=>r.jsxs("div",{className:"bg-white rounded-lg border-2 border-slate-200 p-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 text-lg",children:S.feed_name}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:S.source_system})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${S.status==="active"?"bg-green-100 text-green-700":S.status==="error"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:S.status.toUpperCase()}),S.is_stale&&r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-700",children:"STALE"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:S.records_loaded.toLocaleString()}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Records Loaded"})]}),r.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.error_count}),r.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Errors"})]}),r.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-sm font-bold text-slate-900",children:D(S.last_run_at)}),r.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Last Run"})]})]})]},S.id))}),h==="lineage"&&r.jsx("div",{className:"space-y-4",children:Object.keys(Y).length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(sn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No lineage data available"})]}):Object.entries(Y).map(([S,U])=>r.jsxs("div",{className:"bg-white rounded-lg border-2 border-slate-200 p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 text-lg",children:S}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[U.length," source mappings"]})]}),r.jsxs("button",{onClick:()=>{const[B,ze]=S.split(".");_({table:B,column:ze,name:S})},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[r.jsx(tn,{className:"w-4 h-4"}),"View Lineage"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:U.slice(0,4).map(B=>r.jsxs("div",{className:`p-3 rounded-lg border ${B.is_critical?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("span",{className:"text-xs font-semibold text-slate-600",children:[B.source_table,".",B.source_column]}),B.is_critical&&r.jsx("span",{className:"px-2 py-0.5 bg-red-600 text-white text-xs font-semibold rounded",children:"CRITICAL"})]}),r.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${B.transformation_type==="direct"?"bg-green-100 text-green-700":B.transformation_type==="calculated"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:B.transformation_type})]},B.id))})]},S))})]})})]})}),g&&r.jsx(mm,{metricName:g.name,targetTable:g.table,targetColumn:g.column,onClose:()=>_(null)})]})}function Ug({onClose:t}){const{user:e}=ye(),[s,n]=C.useState([]),[a,i]=C.useState([]),[l,o]=C.useState(!0),[c,d]=C.useState("summary"),[u,m]=C.useState(""),[h,v]=C.useState("all");C.useEffect(()=>{g()},[e]);const g=async()=>{if(!e)return;const[w,T]=await Promise.all([R.from("fr2052a_data").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).order("product_id").limit(100),R.from("fr2052a_quality_checks").select("*").eq("user_id",e.id).order("report_date",{ascending:!1}).limit(20)]);w.data&&n(w.data),T.data&&i(T.data),o(!1)},_=s.filter(w=>{const T=w.product_id.toLowerCase().includes(u.toLowerCase())||w.product_name.toLowerCase().includes(u.toLowerCase()),P=h==="all"||w.product_category===h;return T&&P}),b=["all",...Array.from(new Set(s.map(w=>w.product_category)))],f=s.reduce((w,T)=>w+T.outstanding_balance,0),p=s.filter(w=>w.is_hqla).reduce((w,T)=>w+T.outstanding_balance,0),x=a.filter(w=>w.status==="passed").length,y=a.filter(w=>w.severity==="critical"&&w.status==="failed").length,j=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(w),k=w=>{switch(w){case"passed":return r.jsx(z,{className:"w-5 h-5 text-green-600"});case"failed":return r.jsx(rr,{className:"w-5 h-5 text-red-600"});default:return r.jsx(he,{className:"w-5 h-5 text-amber-600"})}},N=w=>{switch(w){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-amber-100 text-amber-800";default:return"bg-blue-100 text-blue-800"}};return l?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-xl p-8",children:r.jsx("p",{className:"text-slate-600",children:"Loading FR 2052a data..."})})}):r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-7xl w-full my-8",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 rounded-t-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Gt,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"FR 2052a Complex Institution Liquidity Monitoring Report"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Federal Reserve Board regulatory reporting and data quality"})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(Jt,{className:"w-5 h-5 text-slate-600"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Total Products"}),r.jsx("p",{className:"text-3xl font-bold text-blue-900",children:s.length})]}),r.jsx(rm,{className:"w-8 h-8 text-blue-600"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-900",children:"Outstanding Balance"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:j(f)})]}),r.jsx(Kt,{className:"w-8 h-8 text-green-600"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-purple-900",children:"HQLA Amount"}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:j(p)})]}),r.jsx(z,{className:"w-8 h-8 text-purple-600"})]})}),r.jsx("div",{className:`bg-gradient-to-br ${y>0?"from-red-50 to-red-100 border-red-200":"from-green-50 to-green-100 border-green-200"} rounded-xl p-4 border`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${y>0?"text-red-900":"text-green-900"}`,children:"Quality Status"}),r.jsxs("p",{className:`text-3xl font-bold ${y>0?"text-red-900":"text-green-900"}`,children:[x,"/",a.length]})]}),y>0?r.jsx(he,{className:"w-8 h-8 text-red-600"}):r.jsx(z,{className:"w-8 h-8 text-green-600"})]})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>d("summary"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="summary"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Summary"}),r.jsx("button",{onClick:()=>d("data"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="data"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Product Data"}),r.jsx("button",{onClick:()=>d("quality"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="quality"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"Quality Checks"})]})]}),r.jsxs("div",{className:"p-6",children:[c==="summary"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"By Product Category"}),r.jsx("div",{className:"space-y-3",children:b.filter(w=>w!=="all").map(w=>{const T=s.filter(D=>D.product_category===w).length,P=s.filter(D=>D.product_category===w).reduce((D,Y)=>D+Y.outstanding_balance,0);return r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-900 capitalize",children:w}),r.jsxs("p",{className:"text-xs text-slate-600",children:[T," products"]})]}),r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:j(P)})]},w)})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Quality Check Status"}),r.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(w=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[k(w.status),r.jsx("span",{className:"text-sm text-slate-900",children:w.check_name})]}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(w.severity)}`,children:w.severity})]},w.id))})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"FR 2052a Reporting Requirements"}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"The FR 2052a collects detailed quantitative information on liquidity-related items such as cash flows, balance sheet items, and off-balance sheet exposures. Data must meet FRB validation rules and quality standards."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"Reporting Frequency"}),r.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Daily"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"Submission Deadline"}),r.jsx("p",{className:"text-base font-semibold text-slate-900",children:"T+1 12:00 PM ET"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"Maturity Buckets"}),r.jsx("p",{className:"text-base font-semibold text-slate-900",children:"31 Time Bands"})]})]})]})]}),c==="data"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(wg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search by Product ID or Name...",value:u,onChange:w=>m(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsx("select",{value:h,onChange:w=>v(w.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:b.map(w=>r.jsx("option",{value:w,children:w==="all"?"All Categories":w.charAt(0).toUpperCase()+w.slice(1)},w))}),r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(im,{className:"w-4 h-4"}),"Export"]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Product ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Product Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Maturity"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase",children:"Balance"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase",children:"Net Cash Flow"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-600 uppercase",children:"HQLA"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:_.map(w=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:w.product_id}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-900",children:w.product_name}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:w.product_category})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:w.maturity_bucket}),r.jsx("td",{className:"px-6 py-4 text-right text-sm font-semibold text-slate-900",children:j(w.outstanding_balance)}),r.jsx("td",{className:`px-6 py-4 text-right text-sm font-semibold ${w.net_cash_flow>=0?"text-green-600":"text-red-600"}`,children:j(w.net_cash_flow)}),r.jsx("td",{className:"px-6 py-4 text-center",children:w.is_hqla&&r.jsx(z,{className:"w-5 h-5 text-green-600 mx-auto"})})]},w.id))})]})}),_.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Gt,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No products found matching your criteria."})]})]})]}),c==="quality"&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Check Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"FRB Rule"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-600 uppercase",children:"Severity"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase",children:"Passed"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase",children:"Failed"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:a.map(w=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:k(w.status)}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:w.check_name}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800 capitalize",children:w.check_category})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:w.frb_rule_reference}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(w.severity)}`,children:w.severity})}),r.jsx("td",{className:"px-6 py-4 text-right text-sm font-semibold text-green-600",children:w.passed_products}),r.jsx("td",{className:"px-6 py-4 text-right text-sm font-semibold text-red-600",children:w.failed_products})]},w.id))})]})}),a.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(z,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"No quality checks available."})]})]})})]}),r.jsx("div",{className:"sticky bottom-0 bg-slate-50 border-t border-slate-200 p-6 rounded-b-xl",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-3 bg-slate-800 text-white rounded-lg hover:bg-slate-900 transition-colors font-medium",children:"Close"})})]})})}async function Bg(){const t=[{field_name:"MaturityBucket",allowed_value:"Open",description:"Open maturity"},{field_name:"MaturityBucket",allowed_value:"Overnight",description:"Overnight maturity"},{field_name:"MaturityBucket",allowed_value:"2-3 Days",description:"2-3 days maturity"},{field_name:"MaturityBucket",allowed_value:"4-7 Days",description:"4-7 days maturity"},{field_name:"MaturityBucket",allowed_value:"8-14 Days",description:"8-14 days maturity"},{field_name:"MaturityBucket",allowed_value:"15-30 Days",description:"15-30 days maturity"},{field_name:"MaturityBucket",allowed_value:"31-90 Days",description:"31-90 days maturity"},{field_name:"MaturityBucket",allowed_value:"91-180 Days",description:"91-180 days maturity"},{field_name:"MaturityBucket",allowed_value:"181-365 Days",description:"181-365 days maturity"},{field_name:"MaturityBucket",allowed_value:">365 Days",description:"Greater than 365 days"},{field_name:"Product",allowed_value:"Asset",description:"Asset product"},{field_name:"Product",allowed_value:"Secured",description:"Secured product"},{field_name:"Product",allowed_value:"Unsecured",description:"Unsecured product"},{field_name:"Product",allowed_value:"Wholesale",description:"Wholesale product"},{field_name:"Product",allowed_value:"Retail",description:"Retail product"},{field_name:"Product",allowed_value:"Derivative",description:"Derivative product"},{field_name:"CounterpartyType",allowed_value:"Financial",description:"Financial institution"},{field_name:"CounterpartyType",allowed_value:"NonFinancial",description:"Non-financial entity"},{field_name:"CounterpartyType",allowed_value:"Sovereign",description:"Sovereign entity"},{field_name:"CounterpartyType",allowed_value:"Central Bank",description:"Central bank"},{field_name:"CounterpartyType",allowed_value:"Retail",description:"Retail counterparty"},{field_name:"Currency",allowed_value:"USD",description:"US Dollar"},{field_name:"Currency",allowed_value:"EUR",description:"Euro"},{field_name:"Currency",allowed_value:"GBP",description:"British Pound"},{field_name:"Currency",allowed_value:"JPY",description:"Japanese Yen"},{field_name:"Currency",allowed_value:"CHF",description:"Swiss Franc"},{field_name:"Currency",allowed_value:"CAD",description:"Canadian Dollar"},{field_name:"Currency",allowed_value:"AUD",description:"Australian Dollar"},{field_name:"Internal",allowed_value:"Yes",description:"Internal transaction"},{field_name:"Internal",allowed_value:"No",description:"External transaction"},{field_name:"EntityType",allowed_value:"Category I",description:"Category I institution"},{field_name:"EntityType",allowed_value:"Category II",description:"Category II institution"},{field_name:"EntityType",allowed_value:"Category III",description:"Category III institution"},{field_name:"EntityType",allowed_value:"Category IV",description:"Category IV institution"},{field_name:"TableName",allowed_value:"InflowsAssets",description:"Inflows Assets table"},{field_name:"TableName",allowed_value:"InflowsUnsecured",description:"Inflows Unsecured table"},{field_name:"TableName",allowed_value:"OutflowsWholesale",description:"Outflows Wholesale table"},{field_name:"TableName",allowed_value:"OutflowsRetail",description:"Outflows Retail table"},{field_name:"TableName",allowed_value:"SupplementalBalanceSheet",description:"Supplemental Balance Sheet"},{field_name:"TableName",allowed_value:"DerivativeCollateral",description:"Derivative Collateral table"}],{error:e}=await R.from("fr2052a_enumerations").upsert(t,{onConflict:"field_name,allowed_value"});return e?(console.error("Error seeding enumerations:",e),{error:e}):{success:!0}}async function zg(){const t=[{rule_category:"schema_validation",rule_name:"XML Schema Validation",field_name:null,allowed_values:null,validation_logic:"Validates that uploaded file conforms to published FR 2052a XSD schema. Checks structure, required elements, and data types.",is_active:!0},{rule_category:"enumeration",rule_name:"Maturity Bucket Validation",field_name:"MaturityBucket",allowed_values:null,validation_logic:"Validates that MaturityBucket field contains only allowed enumeration values from approved list.",is_active:!0},{rule_category:"enumeration",rule_name:"Product Type Validation",field_name:"Product",allowed_values:null,validation_logic:"Validates that Product field contains only allowed enumeration values.",is_active:!0},{rule_category:"legal_entity",rule_name:"Reporting Entity Integrity",field_name:"ReportingEntity",allowed_values:null,validation_logic:"Validates that ReportingEntity is valid (RSSD or LEI), matches entity registry, and consolidation level is appropriate.",is_active:!0},{rule_category:"internal_transaction",rule_name:"Internal Counterparty Symmetry",field_name:"InternalCounterparty",allowed_values:null,validation_logic:"When Internal=Yes, validates that InternalCounterparty is present and matching offsetting transaction exists with symmetrical flows.",is_active:!0},{rule_category:"field_dependency",rule_name:"Internal Counterparty Required",field_name:"InternalCounterparty",allowed_values:null,validation_logic:"When Internal=Yes, InternalCounterparty field must be populated.",is_active:!0},{rule_category:"cross_field",rule_name:"Lendable Value Check",field_name:"LendableValue",allowed_values:null,validation_logic:"Validates that LendableValue <= MarketValue for all asset rows.",is_active:!0},{rule_category:"cross_field",rule_name:"Weekend Maturity Check",field_name:"MaturityDate",allowed_values:null,validation_logic:"Validates that maturity dates do not fall on weekends.",is_active:!0},{rule_category:"duplicate",rule_name:"Duplicate Row Check",field_name:null,allowed_values:null,validation_logic:"Validates no two rows have identical combination of non-numeric fields (ReportingEntity, Product, SubProduct, Counterparty, MaturityBucket, etc.)",is_active:!0},{rule_category:"data_type",rule_name:"Currency Code Validation",field_name:"Currency",allowed_values:null,validation_logic:"Validates that Currency field uses valid ISO 4217 currency codes.",is_active:!0},{rule_category:"product_hierarchy",rule_name:"Product-SubProduct Applicability",field_name:"SubProduct",allowed_values:null,validation_logic:"Validates that SubProduct values are valid for given Product type based on product hierarchy rules.",is_active:!0},{rule_category:"submission_frequency",rule_name:"Entity Type Submission Mapping",field_name:"EntityType",allowed_values:null,validation_logic:"Validates that reporting entity type (Category I/II/III/IV) matches expected submission frequency (daily vs monthly) and product coverage.",is_active:!0}],{error:e}=await R.from("fr2052a_validation_rules").insert(t);return e&&e.code!=="23505"?(console.error("Error seeding validation rules:",e),{error:e}):{success:!0}}async function Vg(){const t=[{entity_id:"1234567",entity_name:"State Street Corporation",entity_type:"Category II",submission_frequency:"monthly",is_active:!0},{entity_id:"1234568",entity_name:"State Street Bank and Trust Company",entity_type:"Category II",submission_frequency:"monthly",is_active:!0}],{error:e}=await R.from("fr2052a_entity_mapping").upsert(t,{onConflict:"entity_id"});return e?(console.error("Error seeding entities:",e),{error:e}):{success:!0}}async function Hg(){console.log("Seeding FR 2052a enumerations..."),await Bg(),console.log("Seeding FR 2052a validation rules..."),await zg(),console.log("Seeding FR 2052a entities..."),await Vg(),console.log("FR 2052a data seeding complete!")}function Wg(){const[t,e]=C.useState([]),[s,n]=C.useState([]),[a,i]=C.useState(null),[l,o]=C.useState([]),[c,d]=C.useState(!0),[u,m]=C.useState("overview"),[h,v]=C.useState(!1);C.useEffect(()=>{g()},[]);const g=async()=>{d(!0);const{data:w}=await R.from("fr2052a_validation_rules").select("*").order("rule_category",{ascending:!0}),{data:T}=await R.from("fr2052a_file_submissions").select("*").order("upload_timestamp",{ascending:!1}).limit(10);w&&e(w),T&&n(T),d(!1)},_=async()=>{d(!0),await Hg(),await g(),v(!0)},b=async w=>{const{data:T}=await R.from("fr2052a_validation_errors").select("*").eq("submission_id",w).order("created_at",{ascending:!1});T&&o(T)},f=()=>t.reduce((T,P)=>(T[P.rule_category]=(T[P.rule_category]||0)+1,T),{}),p=()=>{const w=s.length,T=s.filter(Y=>Y.submission_status==="validated").length,P=s.filter(Y=>Y.submission_status==="rejected").length,D=s.filter(Y=>Y.submission_status==="pending").length;return{total:w,validated:T,rejected:P,pending:D}},x={schema_validation:"bg-blue-100 text-blue-800",enumeration:"bg-purple-100 text-purple-800",legal_entity:"bg-green-100 text-green-800",internal_transaction:"bg-yellow-100 text-yellow-800",field_dependency:"bg-orange-100 text-orange-800",cross_field:"bg-red-100 text-red-800",duplicate:"bg-pink-100 text-pink-800",data_type:"bg-indigo-100 text-indigo-800",product_hierarchy:"bg-teal-100 text-teal-800",submission_frequency:"bg-cyan-100 text-cyan-800"},y=()=>{const w=f(),T=p();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Rules"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:t.length})]}),r.jsx(we,{className:"h-10 w-10 text-blue-600"})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Submissions"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-2",children:T.total})]}),r.jsx(Gt,{className:"h-10 w-10 text-green-600"})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Validated"}),r.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:T.validated})]}),r.jsx(z,{className:"h-10 w-10 text-green-600"})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Rejected"}),r.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:T.rejected})]}),r.jsx(rr,{className:"h-10 w-10 text-red-600"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Validation Rule Categories"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(w).map(([P,D])=>r.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:D}),r.jsx("p",{className:"text-xs text-slate-600 mt-1 capitalize",children:P.replace(/_/g," ")})]},P))})]}),r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-6 border border-blue-200",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(he,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"FR 2052a Validation System"}),r.jsx("p",{className:"text-sm text-slate-700 mb-4",children:"This system implements the 10 core validation checks required for FR 2052a regulatory reporting compliance:"}),r.jsxs("ul",{className:"text-sm text-slate-700 space-y-2",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(z,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Schema Validation:"})," XML/XSD conformance checks"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(z,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Enumeration Validation:"})," Field value against allowed lists"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(z,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Legal Entity Integrity:"})," RSSD/LEI validation and consolidation"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(z,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Internal Transaction Symmetry:"})," Counterparty matching and flow verification"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(z,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:r.jsx("strong",{children:"And 6 additional validation categories..."})})]})]})]})]})}),!h&&t.length===0&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[r.jsx(we,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Initialize Validation Data"}),r.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Load the initial validation rules, enumerations, and entity mappings to get started."}),r.jsx("button",{onClick:_,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Seed Validation Data"})]})]})},j=()=>{const w=t.reduce((T,P)=>(T[P.rule_category]||(T[P.rule_category]=[]),T[P.rule_category].push(P),T),{});return r.jsx("div",{className:"space-y-6",children:Object.entries(w).map(([T,P])=>r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 capitalize",children:[T.replace(/_/g," ")," (",P.length," rules)"]})}),r.jsx("div",{className:"divide-y divide-slate-200",children:P.map(D=>r.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("h4",{className:"text-base font-semibold text-slate-900",children:D.rule_name}),r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${x[D.rule_category]||"bg-slate-100 text-slate-800"}`,children:D.rule_category.replace(/_/g," ")})]}),D.field_name&&r.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[r.jsx("span",{className:"font-medium",children:"Field:"})," ",D.field_name]}),r.jsx("p",{className:"text-sm text-slate-700",children:D.validation_logic})]},D.id))})]},T))})},k=()=>s.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[r.jsx(gg,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Submissions Yet"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Upload FR 2052a files to begin validation"})]}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"File Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Entity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Period"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Rows"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Errors"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:s.map(w=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:w.file_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:w.reporting_entity}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:new Date(w.reporting_period).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.submission_status==="validated"?"bg-green-100 text-green-800":w.submission_status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:w.submission_status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:w.total_rows}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:r.jsx("span",{className:w.error_rows>0?"text-red-600 font-semibold":"",children:w.error_rows})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("button",{onClick:()=>{i(w),b(w.id),m("errors")},className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Details"})})]},w.id))})]})}),N=()=>a?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Submission: ",a.file_name]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Total Rows"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.total_rows})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Valid Rows"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.valid_rows})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Error Rows"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.error_rows})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Error Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[(a.error_rows/a.total_rows*100).toFixed(1),"%"]})]})]})]}),l.length>0?r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"divide-y divide-slate-200",children:l.map(w=>r.jsx("div",{className:"p-6 hover:bg-slate-50",children:r.jsxs("div",{className:"flex items-start gap-4",children:[w.severity==="critical"?r.jsx(rr,{className:"h-6 w-6 text-red-600 flex-shrink-0"}):r.jsx(he,{className:"h-6 w-6 text-yellow-600 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h4",{className:"text-base font-semibold text-slate-900",children:w.error_type.replace(/_/g," ")}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.severity==="critical"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:w.severity})]}),r.jsx("p",{className:"text-sm text-slate-700 mb-2",children:w.error_message}),w.field_name&&r.jsxs("p",{className:"text-sm text-slate-600",children:[r.jsx("span",{className:"font-medium",children:"Field:"})," ",w.field_name]})]})]})},w.id))})}):r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[r.jsx(z,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Errors Found"}),r.jsx("p",{className:"text-sm text-slate-600",children:"This submission passed all validation checks"})]})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[r.jsx(he,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Submission Selected"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Select a submission to view validation errors"})]});return c?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-slate-600",children:"Loading validation system..."})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"FR 2052a Validation System"}),r.jsx("p",{className:"text-slate-600",children:"Comprehensive data quality and compliance validation for regulatory reporting"})]}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"flex gap-2 border-b border-slate-200",children:[{key:"overview",label:"Overview",icon:Kt},{key:"rules",label:"Validation Rules",icon:we},{key:"submissions",label:"Submissions",icon:Gt},{key:"errors",label:"Error Details",icon:he}].map(({key:w,label:T,icon:P})=>r.jsxs("button",{onClick:()=>m(w),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${u===w?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300"}`,children:[r.jsx(P,{className:"h-4 w-4"}),T]},w))})}),u==="overview"&&y(),u==="rules"&&j(),u==="submissions"&&k(),u==="errors"&&N()]})}function Qg(){const[t,e]=C.useState("dashboard"),[s,n]=C.useState(!0),a=[{id:"dashboard",label:"Executive Dashboard",icon:om},{id:"balance-sheet",label:"Balance Sheet",icon:Kt},{id:"capital-metrics",label:"Capital Metrics",icon:cm},{id:"liquidity-metrics",label:"Liquidity Metrics",icon:lm},{id:"cash-flow",label:"Cash Flow Analysis",icon:cr},{id:"intraday-liquidity",label:"Intraday Liquidity",icon:en},{id:"data-quality",label:"Data Quality",icon:z},{id:"fr2052a",label:"FR 2052a",icon:we},{id:"fr2052a-validation",label:"FR 2052a Validation",icon:xg},{id:"accounts",label:"Accounts",icon:Qn},{id:"transactions",label:"Transactions",icon:Wn},{id:"reports",label:"Reports",icon:Gt},{id:"users",label:"User Management",icon:um}],i=()=>{switch(t){case"dashboard":return r.jsx(vd,{onNavigate:e});case"balance-sheet":return r.jsx(Og,{onNavigate:e});case"capital-metrics":return r.jsx($g,{onNavigate:e});case"liquidity-metrics":return r.jsx(Ig,{onNavigate:e});case"cash-flow":return r.jsx(qg,{onNavigate:e});case"intraday-liquidity":return r.jsx(Mg,{onNavigate:e});case"data-quality":return r.jsx(Fg,{onClose:()=>e("dashboard")});case"fr2052a":return r.jsx(Ug,{onClose:()=>e("dashboard")});case"fr2052a-validation":return r.jsx(Wg,{});case"accounts":return r.jsx(Eg,{});case"transactions":return r.jsx(Tg,{});case"reports":return r.jsx(Ag,{});case"users":return r.jsx(Dg,{});default:return r.jsx(vd,{onNavigate:e})}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex",children:[r.jsxs("aside",{className:`${s?"w-64":"w-16"} bg-white border-r border-slate-200 transition-all duration-300 flex flex-col`,children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[s&&r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-slate-900",children:"Liquidity Hub"}),r.jsx("p",{className:"text-xs text-slate-500",children:"State Street Corp"})]}),r.jsx("button",{onClick:()=>n(!s),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s?r.jsx(Jt,{className:"w-5 h-5"}):r.jsx(vg,{className:"w-5 h-5"})})]}),r.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:a.map(l=>{const o=l.icon,c=t===l.id;return r.jsxs("button",{onClick:()=>e(l.id),className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${c?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,title:s?void 0:l.label,children:[r.jsx(o,{className:`${s?"w-5 h-5":"w-6 h-6 mx-auto"} flex-shrink-0`}),s&&r.jsx("span",{className:"text-sm font-medium",children:l.label})]},l.id)})})]}),r.jsx("main",{className:"flex-1 overflow-y-auto",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i()})})]})}function Gg(){return r.jsx(cg,{children:r.jsx(Qg,{})})}Ah(document.getElementById("root")).render(r.jsx(C.StrictMode,{children:r.jsx(Gg,{})}));
